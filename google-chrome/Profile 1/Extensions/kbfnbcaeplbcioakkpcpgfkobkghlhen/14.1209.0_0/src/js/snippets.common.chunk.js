(self.webpackChunk=self.webpackChunk||[]).push([[7717],{53210:(e,t,n)=>{n.d(t,{B:()=>s});var s,i=n(58303),a=n(12518);!function(e){var t=e.NAME_LENGTH_LIMIT=30,n=e.CONTENT_LENGTH_LIMIT=1e3;e.validate=(e,s,r)=>{const o=((e,n)=>0===e.trim().length?i.G(n.nameEmpty):e.length>t?i.G(n.nameTooLong):i.YP)(e,r),p=((e,t)=>0===e.trim().length?i.G(t.textEmpty):e.length>n?i.G(t.textTooLong):i.YP)(s,r);return i.Wi(o)&&i.Wi(p)?a.right(void 0):a.left({nameError:o,contentError:p})}}(s||(s={}))},4140:(e,t,n)=>{n.d(t,{Vi:()=>i});var s=n(92562);function i(e){return e().then(s.MH)}},42277:(e,t,n)=>{n.d(t,{TV:()=>s});var s=n(69068).v.isRichText},10370:(e,t,n)=>{n.d(t,{B2:()=>v,aA:()=>_,cX:()=>S});var s=n(39953),i=n(49144),a=n(65882),r=n(65647),o=n(70163),p=n(14765),l=n(25989),c=n(74857),d=n(58303),h=n(4140),m=n(72521),u=n(50664),g=n(25403);const _="-1",C="-2",v=[{id:"recent",label:"Recently used",skillIds:[C]},{id:"grammarly",label:"Grammarly",skillIds:["25",_]},{id:"workplace",label:"Workplace",skillIds:["8","9","10","11","12","14","15","23"]},{id:"image",label:"Image",skillIds:["1","3"]}];class S{constructor(e,t,n,m,u,g,_,C,v,S,b,E){this._currentModel=t,this._getCurrentTextMap=u,this._geometryProvider=g,this._geometryLayout=_,this._textFieldLayout=C,this._openSkill=v,this._openSnippets=S,this._appActionsSettings=b,this._setAppActionsSnippetsOnboardingSeen=E,this._activeSkill=new i.X(null),this._skills=(0,s.zG)(n,d.hX((()=>"none"===this._currentModel.mode)),d.g_((()=>Promise.resolve([])),(e=>h.Vi(e.getSkills()))),l.D),this._skillsModel=(0,a.aj)([e,this._activeSkill,m.snippetsAndSettings,this._skills]).pipe(c.b(20),(0,r.U)((([e,t,n,s])=>this.getSkillsModel(n,e,t,s))),(0,o.B)(),(0,p.O)(null))}get skillsModel(){return this._skillsModel}get skills(){return this._skills}_getSkillsForText(e,t){const n=e.toLowerCase();return t.filter((e=>e.label.toLowerCase().includes(n)||e.displayName.toLowerCase().includes(n))).map((e=>{const t=e.label.toLowerCase().includes(n)?e.label.toLowerCase().indexOf(n):e.displayName.toLowerCase().indexOf(n);return{skill:e,range:{start:t,end:t+n.length},location:e.label.toLowerCase().includes(n)?g.C2.name:g.C2.content}}))}getSkillsModel(e,t,n,s){var i,a,r,o,p,l,c,d,h;const g=this._getCurrentTextMap(),S=t&&this._geometryProvider.create(t,g),b=S?this._geometryProvider.getClientRects(S):null,E=null==b?void 0:b[0],f=E&&(0,u.Z)(m.UL.setPosition(this._geometryLayout.getApproximateConversionContext().clientToRelative(E),E),this._textFieldLayout.rect.getApproximate().client,this._textFieldLayout.scroll.getApproximate());if(!f||!s||0===s.length)return null;const x=v.flatMap((e=>e.skillIds)),y=t?g.getPlainText().substring(t.start+e.triggerSequence.length,t.end):"",w=!!(null===(i=s.at(0))||void 0===i?void 0:i.dateLastAccessed)&&0===y.length,L=s.concat({id:_,label:"Snippets",displayName:"Write faster with reusable Snippets",iconUrl:"https://assets.grammarly.com/app_actions/v1/snippets.svg",srcUrl:"",tags:[],dateLastAccessed:0}).concat(w?[{id:C,label:null!==(r=null===(a=null==s?void 0:s.at(0))||void 0===a?void 0:a.label)&&void 0!==r?r:"",displayName:null!==(p=null===(o=null==s?void 0:s.at(0))||void 0===o?void 0:o.displayName)&&void 0!==p?p:"",iconUrl:null!==(c=null===(l=null==s?void 0:s.at(0))||void 0===l?void 0:l.iconUrl)&&void 0!==c?c:"",srcUrl:"",tags:[],dateLastAccessed:0}]:[]).filter((e=>x.includes(e.id))).sort(((e,t)=>x.indexOf(e.id)-x.indexOf(t.id))),k=this._getSkillsForText(y,null!=L?L:[]),A=t?t.end-t.start-e.triggerSequence.length:0,N=n?k.findIndex((e=>e.skill.id===n.id)):-1;return{rect:f,matches:k,mode:"skills",selectSkill:e=>{const t=k.find((t=>t.skill.id===e));t&&this._activeSkill.next(t.skill)},openSkill:n=>{if(n.id===C){const e=null==s?void 0:s.at(0);e&&this._openSkill(e.id)}else n.id===_?this._openSnippets(e,t):this._openSkill(n.id)},onboardingSeen:null!==(h=null===(d=this._appActionsSettings.get())||void 0===d?void 0:d.snippetsOnboardingSeen)&&void 0!==h&&h,onboardingPlacement:f.top>200?"top":"bottom",setOnboardingSeen:()=>this._setAppActionsSnippetsOnboardingSeen(),activeSkill:k.length?n&&N>-1?{skill:n,index:N}:{skill:k[0].skill,index:0}:null,matchLength:A,content:t?g.getPlainText().substring(t.start,t.end):"",groups:v}}shiftActiveSkill(e,t){var n,s;if(t&&t.matches.length&&t.activeSkill){const i=null===(n=t.activeSkill)||void 0===n?void 0:n.index;i>-1?this._activeSkill.next((null===(s=t.matches[Math.min(t.matches.length-1,Math.max(i+(e?-1:1),0))])||void 0===s?void 0:s.skill)||null):this._activeSkill.next(null)}else this._activeSkill.next(null)}}},1136:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_CREATION_SHORTCUT:()=>i.Gx,DEFAULT_TRIGGER_SEQUENCE:()=>i.QQ,SnippetMatchLocation:()=>s.C2,SnippetsFeature:()=>s.EH,SnippetsProviderImpl:()=>i.Zm,SnippetsRpcClient:()=>R,SnippetsUIController:()=>O,processChanges:()=>s.pi});var s=n(25403),i=n(12135),a=n(49231),r=n(36072),o=n(65882),p=n(14765),l=n(60165),c=n(65647),d=n(25770),h=n(71308),m=n(37134),u=n(86340),g=n(91258),_=n(94161),C=n(3745),v=n(10370),S=n(99627),b=n(5409);const E=e=>a.createElement("div",{className:b["appActionsCard__snippet-content"]},e.match.location===s.C2.content?a.createElement(a.Fragment,null,e.match.skill.displayName.slice(0,e.match.range.start),a.createElement("span",{className:b["appActionsCard__snippet-content-match"]},e.match.skill.displayName.slice(e.match.range.start,e.match.range.end)),e.match.skill.displayName.slice(e.match.range.end)):a.createElement(a.Fragment,null,e.match.skill.displayName)),f=e=>a.createElement("div",{className:b["appActionsCard__snippet-name"]},a.createElement("img",{src:e.url,alt:"","aria-hidden":!0,className:b["appActionsCard__snippet-logo"]}),e.match.location===s.C2.name?a.createElement(a.Fragment,null,e.match.skill.label.slice(0,e.match.range.start),a.createElement("span",{className:b["appActionsCard__snippet-name-match"]},e.match.skill.label.slice(e.match.range.start,e.match.range.end)),e.match.skill.label.slice(e.match.range.end)):a.createElement(a.Fragment,null,e.match.skill.label)),x=e=>{const t=a.useRef(null);return a.useEffect((()=>{e.isSelected&&t.current&&t.current.scrollIntoView({block:"nearest"})}),[e.isSelected]),a.createElement("div",{ref:t,...(0,S.Sh)(b.appActionsCard__snippet,e.isSelected?b.appActionsCard__snippet_active:null),role:"button",tabIndex:0,onClick:()=>e.onClick(e.match.skill),onMouseEnter:()=>e.onSelect(e.match.skill)},a.createElement(f,{match:e.match,url:e.match.skill.iconUrl}),a.createElement(E,{match:e.match}))};var y,w=n(77530),L=n(59330),k=n(81279),A=n(41340);!function(e){e[e.Snippets=0]="Snippets",e[e.AppActions=1]="AppActions",e[e.None=2]="None"}(y||(y={}));const N=({children:e,step:t,onClickNext:n})=>t===y.Snippets?a.createElement(A.J,{mainContent:a.createElement(w.k,{align:"center",justify:"space-between",gap:4,padding:3},a.createElement(L.x,{as:"span",variant:"text-small"},"Your snippets are here"),a.createElement(k.z,{variant:"pro",size:"small",onClick:n},"Next")),isOutsideReferenceElement:!1,includeMainContentPadding:!1,distanceFromReferenceElement:16,theme:"darkDS",placement:"right",referenceElementStyle:{width:"100%",display:"block"},size:"medium",show:!0},e):t===y.AppActions?a.createElement(A.J,{mainContent:a.createElement(w.k,{direction:"column",gap:2,padding:3},a.createElement(L.x,{as:"span",variant:"text-small"},"✨ We’ve added actions to your shortcut menu from your Grammarly Enterprise account"),a.createElement(k.z,{variant:"pro",size:"small",onClick:n},"Done")),isOutsideReferenceElement:!1,includeMainContentPadding:!1,distanceFromReferenceElement:16,theme:"darkDS",placement:"right",referenceElementStyle:{width:"100%",display:"block"},size:"medium",show:!0},e):e;var M=n(62207);const T=({defaultVisible:e,placement:t})=>{const[n,s]=a.useState(e);return n?a.createElement(w.k,{...(0,S.Sh)(M.topBox,M[`topBox-placement-${t}`]),gap:2,padding:3,direction:"row",align:"center"},a.createElement(L.x,{as:"span",variant:"text-small"},"Find and filter actions by typing or navigating using your keyboard or mouse."),a.createElement(k.z,{style:{alignSelf:"initial"},size:"small",onClick:()=>s(!1)},"Got it")):null},P=()=>a.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{y:"-0.000167847",width:"18",height:"16",rx:"4",fill:"white"}),a.createElement("path",{d:"M8.40208 11.9998V6.92526L6.50932 8.82512L5.67836 8.00125L9.00222 4.68449L12.319 8.00125L11.5022 8.82512L9.60236 6.92526V11.9998H8.40208Z",fill:"#027E6F"})),I=()=>a.createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{y:"-0.000167847",width:"18",height:"16",rx:"4",fill:"white"}),a.createElement("path",{d:"M9.60236 4.7271V9.80168L11.4951 7.90182L12.3261 8.72568L9.00222 12.0424L5.68546 8.72568L6.50222 7.90182L8.40208 9.80168V4.7271H9.60236Z",fill:"#027E6F"})),B=e=>{const[t,n]=a.useState(e.onboarding.onboardingSeen?y.None:y.Snippets);function s(e,t){if(t===y.Snippets)return e===v.aA;if(t===y.AppActions){const t=v.B2.find((e=>"workplace"===e.id));return e===(null==t?void 0:t.skillIds.at(0))}return!1}return a.createElement(a.Fragment,null,a.createElement(T,{defaultVisible:!e.onboarding.onboardingSeen,placement:e.onboarding.onboardingPlacement}),a.createElement("div",{className:b.appActionsCard},e.matches.length?a.createElement("dl",{className:b.appActionsCard__snippets,style:{overflowY:t===y.None?"auto":"hidden"}},e.groups.map((i=>i.skillIds.some((t=>e.matches.some((e=>e.skill.id===t))))?a.createElement(a.Fragment,{key:i.id},a.createElement("dt",{className:b["appActionsCard__group-name"]},i.label),a.createElement("dt",{className:b["appActionsCard__group-body"]},i.skillIds.map((i=>{var r,o;const p=e.matches.find((({skill:e})=>e.id===i));return p?a.createElement(N,{key:i,step:s(i,t)?t:y.None,onClickNext:()=>{n(t===y.Snippets?y.AppActions:y.None),e.onboarding.setOnboardingSeen()}},a.createElement(x,{match:p,isSelected:p.skill.id===(null===(o=null===(r=e.activeSkill)||void 0===r?void 0:r.skill)||void 0===o?void 0:o.id),onClick:t=>e.openSkill(t),onSelect:t=>e.selectSkill(t.id)})):null})))):null))):a.createElement("div",{className:b.appActionsCard__empty},a.createElement("div",{className:b["appActionsCard__empty-pic"]}),a.createElement("span",{className:b["appActionsCard__empty-title"]},"Your search did not match any app actions")),a.createElement("div",{className:b.appActionsCard__footer},a.createElement("div",{className:b["appActionsCard__footer-hints"]},a.createElement("span",{className:b.buttonTip__group},"Navigate"," ",a.createElement("span",null,a.createElement(P,null)," ",a.createElement(I,null))),a.createElement("span",{className:b.buttonTip__group},"Open ",a.createElement("span",{className:b.buttonTip},"Return")),a.createElement("span",{className:b.buttonTip__group},"Close ",a.createElement("span",{className:b.buttonTip},"Esc"))),a.createElement("div",{className:b["appActionsCard__footer-logo"]},a.createElement(_.J,{icon:C.H,accessibilityLabel:"",size:"small"})))))};class O{constructor(e){this._gnar=e,this._hovered=new r.xQ,this._dismissed=new r.xQ,this.cardHovered=this._hovered.pipe((0,p.O)(!1),(0,l.x)()),this.cardDismissed=this._dismissed.pipe((0,l.x)()),this._activeCardModel=d.h.create(null),this.view=(0,o.aj)([this._activeCardModel]).pipe((0,c.U)((([e])=>{var t,n;let s;switch(null==e?void 0:e.mode){case"skills":s=a.createElement(B,{matches:e.matches,selectSkill:e.selectSkill,activeSkill:e.activeSkill,skills:null!==(t=e.skills)&&void 0!==t?t:[],groups:e.groups,openSkill:e.openSkill,onboarding:{onboardingSeen:e.onboardingSeen,setOnboardingSeen:e.setOnboardingSeen,onboardingPlacement:e.onboardingPlacement}});break;case"list":s=a.createElement(m.L,{matches:e.matches,applySnippet:e.applySnippet,selectSnippet:e.selectSnippet,activeSnippet:e.activeSnippet,triggerSequence:e.triggerSequence,creationShortcut:e.creationShortcut,onOpenLink:e=>this._onOpenLink(e)});break;case"shortcutPopup":s=a.createElement(m.O,{onShow:()=>this._onPopupShow(),openEditor:()=>this._openEditor(),creationShortcut:e.creationShortcut});break;case"editor":s=a.createElement(u.M,{content:null!==(n=e.content)&&void 0!==n?n:"",addSnippet:e.addSnippet,dismiss:this._dismiss.bind(this),triggerSequence:e.triggerSequence});break;default:return null}return e?a.createElement(g.q,null,a.createElement(h.W,{anchorRect:e.rect,anchorMargin:{top:0,left:-15,bottom:5,right:0},onHover:e=>this._hovered.next(e),onClickAway:e=>this._dismissed.next(e),partName:"snippets"},s)):null})))}_onOpenLink(e){this._gnar.snippetsLinkOpened(e)}_openEditor(){const e=this._activeCardModel.get();this._activeCardModel.set({...e,mode:"editor"})}_dismiss(){this._activeCardModel.set(null)}_onPopupShow(){this._gnar.snippetsPopupShow()}show(e){this._activeCardModel.set(e)}hide(){this._activeCardModel.set(null),this._hovered.next(!1)}isVisible(){return!!this._activeCardModel.get()}isShortcutPopupShown(){var e;return"shortcutPopup"===(null===(e=this._activeCardModel.get())||void 0===e?void 0:e.mode)}isEmptySnippetsListShown(){const e=this._activeCardModel.get();return e&&"list"===e.mode&&0===e.matches.length}dispose(){this.hide()}}class R{constructor(e){this._rpc=e,this.addSnippet=this._rpc.addSnippet,this.getSnippets=this._rpc.getSnippets}}},25403:(e,t,n)=>{n.d(t,{C2:()=>$,EH:()=>te,pi:()=>ee});var s=n(39953),i=n(49144),a=n(78084),r=n(65882),o=n(90049),p=n(65647),l=n(55446),c=n(70989),d=n(14765),h=n(70163),m=n(18820),u=n(61447),g=n(54761),_=n(88e3),C=n(85512),v=n(19549),S=n(73863),b=n(60165),E=n(74857),f=n(78488),x=n(8748),y=n(32082),w=n(17888),L=n(97934),k=n(20715),A=n(30152),N=n(82823),M=n(58303),T=n(52256),P=n(25770),I=n(48689),B=n(90522),O=n(93453),R=n(39408),D=n(72521),F=n(50664),U=n(42277),W=n(16470),q=n(84161),z=n(42530),Z=n(31879);function G(){return{items:[],children:new Map}}function V(e,t){return t&&0!==e.length?V(e.slice(1),t.children.get(e[0])||null):t}class H{constructor(e,t){this._root=G(),e.forEach((e=>{const n=e[t];if(!(0,Z.HD)(n))throw new Error("Can't search for non-string attributes");n.toLowerCase().split("").reduce(((t,n)=>(t.items.push(e),t.children.has(n)||t.children.set(n,G()),t.children.get(n))),this._root).items.push(e)}))}search(e){const t=[];let n=null,s={node:this._root,depth:0};const i=[];for(;s;){n=V(e.toLowerCase(),s.node),n&&i.push({node:n,depth:s.depth});const a=s.node.children.values();let r=a.next();for(;!r.done;)t.push({node:r.value,depth:s.depth+1}),r=a.next();s=t.shift()||null}return Array.from(i.reduce(((t,n)=>(n.node.items.forEach((s=>{t.has(s)||t.set(s,{start:n.depth,end:n.depth+e.length})})),t)),new Map).entries()).map((([e,t])=>({item:e,range:t})))}}var $,K=n(86185),j=n(88241),J=n(48856),X=n(10370),Y=n(12135);!function(e){e.name="name",e.content="content"}($||($={}));const Q=/\s+$/;function ee(e,t,n){if(!t){if(e.deltaChange.isEmpty)return null;{const t=e.deltaChange.delta.ops.slice(0);let s=t.pop();for(;t.length&&s&&!m.s.isInsertString(s);)s=t.pop();if(s&&m.s.isInsertString(s)&&!Q.test(s.insert)){const t=e.deltaChange.delta.ops.reduce(((e,t)=>m.s.isInsertString(t)?e+t.insert.length:m.s.isRetain(t)?e+t.retain:e),0);return new RegExp(`^(.*\\s)?${(0,z.hr)(n)}(\\s.*)?$`).test((0,q.l)(e.deltaChange.delta,e.prevText).slice(Math.max(t-n.length-1,0),t+1))?{start:t-n.length,end:t}:null}return null}}{const{effectStartIndex:s,sizeDelta:i}=e.deltaChange.delta.ops.reduce(((e,t)=>(m.s.isRetain(t)?e.index+=t.retain:m.s.isDelete(t)?(e.effectStartIndex=Math.min(e.effectStartIndex,e.index),e.sizeDelta-=t.delete):m.s.isInsertString(t)?(e.effectStartIndex=Math.min(e.effectStartIndex,e.index),e.index+=t.insert.length,e.sizeDelta+=t.insert.length):m.s.isInsertEmbed(t)&&(e.effectStartIndex=Math.min(e.effectStartIndex,e.index),e.index+=1,e.sizeDelta+=1),e)),{index:0,effectStartIndex:1/0,sizeDelta:0});switch(!0){case s<t.start+n.length:case s>t.end:return null;default:return{...t,end:t.end+i}}}}class te{constructor(e,t,n,s,m,u,g,_,C,v,A,N,T,D,F,U,q,z,Z,G,V,$,J=j.Y.create("Snippets")){var Q,te,ne;this._snippetsProvider=e,this._textObserver=t,this._replacementService=n,this._geometryProvider=s,this._geometryLayout=m,this._textFieldLayout=u,this._getCurrentTextMap=g,this._controller=_,this._keyDown=C,this._gnar=v,this._checkingService=A,this._selectionSource=N,this._state=T,this._updateSnippetsShortcutPopupCounter=D,this._setAppActionsSnippetsOnboardingSeen=F,this._isCurrentFieldFocused=U,this._events=q,this._alertStateService=z,this._experimentClient=Z,this._openAssistant=G,this._skillService=V,this._pageState=$,this._log=J,this._subs=[],this._insertionRange=new i.X(null),this._activeSnippet=new i.X(null),this._selectionObservable=(0,a.P)((()=>this._selectionSource.data.changes.pipe((0,p.U)(W.Ey),(0,l.h)((e=>null!==e))))),this._snippetsSearchTrees=new i.X({byName:new H([],"name"),byContent:new H([],"content")}),this._triggerSequence=Y.QQ,this._shortcutPopupSessionCounter=0,this._initialShortcutPopupCounter=0,this._currentModel={mode:"none"},this._isAppActionsExperimentEnabled=P.h.create(!1),this.addSnippetsTriggerToAlert=e=>({...e,extra_properties:{...e.extra_properties,snippet_trigger:this._triggerSequence}}),this.showSnippetsEditor=e=>{this._snippetsProvider.snippetsAndSettings.pipe((0,c.M)(this._selectionObservable.pipe((0,d.O)(null)),this._snippetsSearchTrees),S.q(1)).subscribe((([t,n,s])=>{const i=this._getModel("editor",t,n,s,null,e);i&&this._controller.show(i)}))},this._snippetsTriggered=P.h.create(!this._experimentClient.isGateEnabled(B.K.LazyLoadSnippetsSearchTrees)),this._isAppActionsExperimentEnabled=P.h.create("test"===this._experimentClient.getTreatment(O.p.AppActionsDiscoverabilitySnippets)),this._snippets=(0,r.aj)([this._snippetsProvider.snippetsAndSettings,this._snippetsTriggered]).pipe((0,p.U)((([{snippets:e},t])=>t?e:[])),b.x(((e,t)=>e.length===t.length&&e.every(((e,n)=>e.id===t[n].id)))));const se=(new Date).getTime();let ie=!0;this._subs.push((0,r.aj)([this._snippets,this._snippetsProvider.snippetsAndSettings]).subscribe((([e,t])=>{this._snippetsSearchTrees.next({byName:new H(e,"name"),byContent:new H(e,"content")}),this._gnar.snippetsListLoaded(t.snippets.length,ie?(new Date).getTime()-se:void 0),ie=!1}))),this._initialShortcutPopupCounter=null!==(te=null===(Q=this._state.get())||void 0===Q?void 0:Q.page.snippetsShortcutPopupCounter)&&void 0!==te?te:0,this._snippetsFeatureSkills=this._isAppActionsExperimentEnabled.get()?M.G(new X.cX(this._insertionRange,this._currentModel,this._skillService,this._snippetsProvider,this._getCurrentTextMap,this._geometryProvider,this._geometryLayout,this._textFieldLayout,(e=>this._openSkill(e)),((e,t)=>{this._openSnippets(e,t)}),this._pageState.view("appActionsSettings"),this._setAppActionsSnippetsOnboardingSeen)):M.YP,this._snippetsModel=(0,r.aj)([this._insertionRange,this._activeSnippet,this._textFieldLayout.rect.behavior,this._snippetsProvider.snippetsAndSettings,this._snippetsSearchTrees]).pipe(E.b(20),(0,p.U)((([e,t,n,s,i])=>e?this._getModel("list",s,e,i,t):null)),f.b((e=>{e&&this._snippetsTriggered.set(!0)})),(0,h.B)(),(0,d.O)(null)),this._shortcutPopupModel=x.E,this._subs.push(this._snippetsProvider.snippetsAndSettings.subscribe((({triggerSequence:e})=>{this._triggerSequence=e}))),this._subs.push((0,o.T)(this._snippetsModel,this._shortcutPopupModel.pipe((0,l.h)((e=>"shortcutPopup"===this._currentModel.mode||Boolean(e)))),this._events.pipe((0,c.M)(this._snippetsProvider.snippetsAndSettings,this._snippetsSearchTrees),p.U((([{text:e,textRange:t,onCreate:n},s,i])=>this._getModel("editor",s,t,i,void 0,e,n))),f.b((e=>this._log.trace("Model changed",e))))).pipe(y.D((e=>w.timer(0===(null==e?void 0:e.matchLength)?20:0))),l.h((()=>"skills"!==this._currentModel.mode))).subscribe((e=>{e?this._show(e):this._hide("Model is empty.")})));const ae=M.FS(this._snippetsFeatureSkills);ae&&this._subs.push(ae.skillsModel.pipe(l.h((()=>this._isAppActionsExperimentEnabled.get())),l.h((()=>"none"===this._currentModel.mode||"skills"===this._currentModel.mode)),L.z(y.D((e=>w.timer(0===(null==e?void 0:e.matchLength)?20:0))))).subscribe((e=>{e?(this._show(e),this._gnar.snippetsAppActionsListShow()):this._hide("Skills model is empty.")}))),this._subs.push(this._isCurrentFieldFocused.pipe((0,l.h)((e=>!e))).subscribe((()=>this._hide("Current field lost its focus")))),this._subs.push(this._snippetsProvider.snippetsEnabled.pipe((0,l.h)((e=>!e))).subscribe((()=>this._hide("Snippets feature got disabled.")))),this._subs.push(this._textObserver.contentChanges.async.pipe((0,l.h)((e=>{const t=0===e.changes.length;return t&&this._log.trace("Skipping an empty content change"),!t})),(0,c.M)(this._insertionRange.pipe((0,d.O)(null)),this._snippetsProvider.snippetsAndSettings.pipe((0,d.O)(null)))).subscribe((([e,t,n])=>{if(!n||!n.enabled)return;const s=n.triggerSequence,i=ee(e,t,s);this._insertionRange.next(i),t&&null===i&&this._dismiss("edit"),null===t&&i&&(this._gnar.snippetsTriggerSequenceEntered(!0,s),this._log.trace("Snippets trigger sequence entered."),this._gnar.snippetsListPresented(s))}))),this._subs.push(this._keyDown.pipe((0,c.M)(this._insertionRange.pipe((0,d.O)(null)),this._snippetsModel,null!==(ne=null==ae?void 0:ae.skillsModel)&&void 0!==ne?ne:k.of(null),this._selectionObservable.pipe((0,d.O)(null)),this._isCurrentFieldFocused,this._snippetsProvider.snippetsAndSettings,this._snippetsSearchTrees)).subscribe((([e,t,n,s,i,a,r,o])=>{if(!r.enabled)return;const p=(0,I.O)(),l=e=>e.key.toLowerCase()===r.creationShortcut&&(p.config.systemInfo.os.isMac?e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey:e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey);if(l(e)&&this._log.trace("Creation shortcut was entered"),a&&l(e)&&(!this._controller.isVisible()||this._controller.isShortcutPopupShown()&&i||this._controller.isEmptySnippetsListShown())){this._gnar.snippetsShortcutUsed();const t=this._getModel("editor",r,i,o);if(t)return this._updateSnippetsShortcutPopupCounter(-1),this._hide("Refresh snippets view on shortcut usage."),this._show(t),void e.preventDefault()}if(e.keyCode===K.VD.Escape&&null!==n)return this._dismiss("esc"),void e.stopPropagation();t&&(e.keyCode!==K.VD.Tab&&e.keyCode!==K.VD.RightArrow&&e.keyCode!==K.VD.Return||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey?e.keyCode!==K.VD.UpArrow&&e.keyCode!==K.VD.DownArrow||(e.preventDefault(),e.stopPropagation(),"skills"===this._currentModel.mode&&ae?ae.shiftActiveSkill(e.keyCode===K.VD.UpArrow,s):this._shiftActiveSnippet(e.keyCode===K.VD.UpArrow,n)):"skills"===this._currentModel.mode&&this._currentModel.activeSkill?(e.preventDefault(),e.stopPropagation(),this._currentModel.openSkill(this._currentModel.activeSkill.skill)):t&&(null==n?void 0:n.activeSnippet)&&(e.preventDefault(),e.stopPropagation(),this._applySnippet(n.activeSnippet.snippet,t,r.triggerSequence)))}))),this._subs.push(this._textFieldLayout.scroll.behavior.pipe((0,c.M)(this._snippetsModel),(0,l.h)((([e,t])=>!!t))).subscribe((()=>{this._dismiss("scroll")}))),this._subs.push(this._alertStateService.newlyHighlightedAlerts.pipe(c.M(this._snippetsProvider.snippetsEnabled),l.h((([e,t])=>t&&R.S.isSuggestedSnippetAlert(e)))).subscribe((()=>{this._gnar.suggestedSnippetHighlightShow()}))),this._gnar.snippetsFeatureInit()}_applySnippet(e,t,n){const s=this._experimentClient.isGateEnabled(B.K.RtfSnippets)&&(0,U.TV)(e.contentDelta),i=s?e.contentDelta:e.content;this._dismiss("apply"),this._gnar.snippetsSnippetApplied(s,t.end-t.start-n.length),this._replacementService.performReplacement({pos:t,value:i}),this._checkingService&&this._checkingService.onSnippetFeedback({kind:u.JE.SNIPPET_ACCEPTED,snippetUuid:e.id})}_selectSnippet(e){this._activeSnippet.next(e)}_getSnippetsForText(e,t,n){return[...t.search(e).map((e=>({snippet:e.item,range:e.range,location:$.name}))),...n.search(e).map((e=>({snippet:e.item,range:e.range,location:$.content})))].reduce(((e,t)=>(e.set.has(t.snippet.id)||e.result.push(t),e.set.add(t.snippet.id),e)),{set:new Set,result:new Array}).result}_shiftActiveSnippet(e,t){var n;if(t&&t.matches.length&&t.activeSnippet){const s=t.activeSnippet.index;s>-1?this._activeSnippet.next((null===(n=t.matches[Math.min(t.matches.length-1,Math.max(s+(e?-1:1),0))])||void 0===n?void 0:n.snippet)||null):this._activeSnippet.next(null)}else this._activeSnippet.next(null)}_dismiss(e){this._log.debug("Snippets card dismissed",{reason:e}),this._insertionRange.next(null),this._activeSnippet.next(null),"apply"!==e&&this._gnar.snippetsListDismissed(e)}_getModel(e,t,n,s,i,a,r){var o;const p=this._getCurrentTextMap(),l=n&&this._geometryProvider.create(n,p),c=l?this._geometryProvider.getClientRects(l):null,d=null!==(o=c&&c.length&&("list"===e?c[0]:c[c.length-1]))&&void 0!==o?o:null,h=d&&(0,F.Z)(D.UL.setPosition(this._geometryLayout.getApproximateConversionContext().clientToRelative(d),d),this._textFieldLayout.rect.getApproximate().client,this._textFieldLayout.scroll.getApproximate())||"editor"===e&&(m=this._textFieldLayout.rect.getApproximate().client,D.UL.setPosition(m,{height:1,width:1}));var m;if(!h)return null;if("shortcutPopup"===e){if("test"===this._experimentClient.peekTreatment(O.p.GbSnippetsSelectionPopup))return null;if(this._initialShortcutPopupCounter<0||this._initialShortcutPopupCounter>=3)return null;if(0===this._shortcutPopupSessionCounter&&this._updateSnippetsShortcutPopupCounter(this._initialShortcutPopupCounter+1),this._shortcutPopupSessionCounter%3!=0||this._shortcutPopupSessionCounter>6)return this._shortcutPopupSessionCounter++,null;this._shortcutPopupSessionCounter++}const u=n?this._getSnippetsForText(p.getPlainText().substring(n.start+t.triggerSequence.length,n.end),s.byName,s.byContent):[],g=n?n.end-n.start-t.triggerSequence.length:0,_=i?u.findIndex((e=>e.snippet.id===i.id)):-1;return{rect:h,matches:u,mode:e,applySnippet:e=>{const s=u.find((t=>t.snippet.id===e));n&&s&&this._applySnippet(s.snippet,n,t.triggerSequence)},selectSnippet:e=>{const t=u.find((t=>t.snippet.id===e));t&&this._selectSnippet(t.snippet)},addSnippet:async(e,t)=>{await this._snippetsProvider.addSnippet(e,t)&&(r&&r(),this._gnar.snippetsInlineSnippetCreated()),this._hide("Close on snippet add.")},activeSnippet:u.length?i&&_>-1?{snippet:i,index:_}:{snippet:u[0].snippet,index:0}:null,matchLength:g,triggerSequence:t.triggerSequence,creationShortcut:t.creationShortcut,content:a||("list"!==e&&n?p.getPlainText().substring(n.start,n.end):"")}}async _openSnippets(e,t){const n=this._getModel("list",e,t,this._snippetsSearchTrees.value);n&&(await this._replaceToTriggerSequence(e.triggerSequence,null!=t?t:{start:0,end:0}),this._show(n),this._gnar.snippetsFromAppActionsListShow())}async _replaceToTriggerSequence(e,t){this._getCurrentTextMap().getPlainText().slice(t.start,t.end)!==e&&await this._replacementService.performReplacement({pos:t,value:e},{keepSelection:!1})}_openSkill(e){this._openAssistant({type:J.WT.snippetsAppAction,appActionId:e,payload:{}});const t=this._insertionRange.getValue();t&&this._replacementService.performReplacement({pos:t,value:" "}),this._hide("Close on skill open."),this._gnar.snippetsAppActionClick(e)}_show(e){this._log.debug("Show snippets card",{mode:e.mode}),this._currentModel=e,this._controller.show(e)}_hide(e){this._currentModel&&this._log.debug("Hide snippets card",{reason:e}),this._currentModel={mode:"none"},this._controller.hide()}static _subscribeToMuteOrUndoMuteButtonClick(e,t,n,i,a){e.add(t.pipe(l.h(i),c.M(n),p.U((([e,t])=>v.nL.hasItems(t)?(0,s.zG)(t.currentLens.items.get(e.id),M.g_((()=>null),(e=>e.value))):null)),l.h(z.fQ),l.h(C.i.isSuggestedSnippetItem)).subscribe(a))}dispose(){this._subs.forEach((e=>e.unsubscribe()))}initCardActionsProcessing(e,t,n,i){return new A.y((()=>{const a=new N.w;return a.add(e.pipe(l.h(_.lY.isCreateSnippetAction),f.b((()=>{this._gnar.suggestedSnippetCardAccept("assistant")}))).subscribe((({snippetName:e,snippetText:t})=>{this._snippetsProvider.addSnippet(e,t)}))),a.add(e.pipe(l.h(_.lY.isSuggestedSnippetSuccessDismissed)).subscribe((e=>{(0,s.zG)(t.getById(e.alertId),M.tS(g.bZ.getRawId),M.g_((()=>this._log.error("Tried to acknowledge nonexistent snippet alert from the sidebar",{alertId:e.alertId})),(e=>{var t;return null===(t=this._checkingService)||void 0===t?void 0:t.onAlertAcknowledged(e,u.e3.Sidebar)})))}))),a.add(n.pipe(l.h(C.i.isSuggestedSnippetItem)).subscribe((()=>{this._gnar.suggestedSnippetMiniCardShow()}))),a.add(e.pipe(l.h(_.lY.isAlertCardShow),p.U((e=>e.alertId)),E.b(300)).subscribe((e=>(0,s.zG)(t.getById(e),M.hX(g.bZ.isSuggestedSnippet),T.bw((()=>{this._gnar.suggestedSnippetCardLook("assistant")})))))),a.add(e.pipe(l.h(_.lY.isAlertIgnoreAction)).subscribe((e=>(0,s.zG)(t.getById(e.alertId),M.hX(g.bZ.isSuggestedSnippet),T.bw((()=>{this._gnar.suggestedSnippetCardDismiss("assistant")})))))),te._subscribeToMuteOrUndoMuteButtonClick(a,e,i,_.lY.isMuteCategoryAction,(()=>{this._gnar.suggestedSnippetCardDeactivate("assistant")})),te._subscribeToMuteOrUndoMuteButtonClick(a,e,i,_.lY.isUndoMuteCategoryAction,(()=>{this._gnar.suggestedSnippetCardUndoDeactivate("assistant")})),()=>a.unsubscribe()}))}}},12135:(e,t,n)=>{n.d(t,{Gx:()=>C,QQ:()=>_,Zm:()=>E});var s=n(49144),i=n(8748),a=n(25989),r=n(20715),o=n(60841),p=n(64218),l=n(65647),c=n(43456),d=n(55446),h=n(21768),m=n(90522),u=n(73930),g=n(48674);const _="\\",C="s",v=e=>new h.i(e.ops),S=({id:e,name:t,hierarchy:n,contentDelta:s})=>{return{id:e,name:t,hierarchy:n,content:(i=s,g.$.renderToPlainText(v(i))),contentDelta:v(s)};var i},b=({isEnabled:e,userShortcuts:t,snippets:n})=>({enabled:e,creationShortcut:e?(null==t?void 0:t.createSnippetTrigger.toLowerCase())||C:"",triggerSequence:e?(null==t?void 0:t.snippetsTrigger)||_:"",snippets:e&&(null==n?void 0:n.map(S))||[]});class E{constructor(e,t,n,a){this._checkingService=e,this._rpcClient=t,this._state=n,this._experimentClient=a,this._reloadSubject=new s.X(null),this.snippetsAndSettings=this._reloadSubject.pipe((0,o.w)((()=>this._requestSnippets().pipe((0,p.K)((()=>i.E))))),(0,l.U)(b),(0,c.d)()),this.snippetsEnabled=this.snippetsAndSettings.pipe((0,l.U)((e=>e.enabled)))}async addSnippet(e,t){const n=await this._rpcClient.addSnippet({name:e,contentDelta:{ops:[{insert:t+"\n"}]},hierarchy:"PERSONAL"});return this._reloadSubject.next(null),n?S(n):null}_requestSnippets(){if(this._experimentClient.isGateEnabled(m.K.LoadSnippetsViaGoldenGate))return(0,a.D)(this._rpcClient.getSnippets()).pipe((0,o.w)((e=>e?(0,r.of)(e):i.E)));{const r=(e=this._state,null!==(s=null===(n=null===(t=e.get())||void 0===t?void 0:t.user.institutionInfo)||void 0===n?void 0:n.id.toString())&&void 0!==s?s:null);if(r&&this._checkingService)return this._checkingService.readyState.pipe((0,d.h)((e=>e===u.kQ.firstTextCheckCompleted)),(0,o.w)((()=>{var e;return(0,a.D)((null===(e=this._checkingService)||void 0===e?void 0:e.requestSnippets(Number(r)))||i.E)})))}var e,t,n,s;return i.E}}},37134:(e,t,n)=>{n.d(t,{L:()=>E,O:()=>w});var s=n(48689),i=n(79514),a=n(49231),r=n(25403),o=n(42478),p=n(99627),l=n(24853),c=n(16502),d=n(40240);const h=e=>{const t=(50-(e.range.end-e.range.start))/2-3;return e.location===r.C2.content?{prefix:m(e.snippet.content,e.range.start,t),content:e.snippet.content.slice(e.range.start,e.range.end),suffix:e.snippet.content.slice(e.range.end)}:{content:e.snippet.content}},m=(e,t,n=1/0)=>e.slice(0,t).split(" ").reduceRight(((e,t,s)=>{let i=e.text,a=e.wordsLeft;return a?(i.length+t.length<n&&(i=i?`${t} ${i}`:t||" "),t?a--:i=`${i}`,!a&&s&&(i=`...${i}`),{text:i,wordsLeft:a}):e}),{text:"",wordsLeft:2}).text,u=()=>(0,s.O)().config.systemInfo.os.isMac?"CONTROL":"ALT",g=()=>a.createElement("svg",{viewBox:"0 0 10 6",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M9.354,4.603L5,0.249L0.646,4.603C0.451,4.798 0.451,5.115 0.646,5.31C0.842,5.505 1.158,5.505 1.354,5.31L5,1.663C5,1.663 8.646,5.31 8.646,5.31C8.842,5.505 9.158,5.505 9.354,5.31C9.549,5.115 9.549,4.798 9.354,4.603Z"})),_=()=>a.createElement("svg",{viewBox:"0 0 10 6",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M0.646,1.183L5,5.536L9.354,1.183C9.549,0.988 9.549,0.671 9.354,0.476C9.158,0.28 8.842,0.28 8.646,0.476L5,4.122C5,4.122 1.354,0.476 1.354,0.476C1.158,0.28 0.842,0.28 0.646,0.476C0.451,0.671 0.451,0.988 0.646,1.183Z"})),C=()=>a.createElement("svg",{viewBox:"0 0 4 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M2,12C0.895,12 0,12.895 0,14C0,15.105 0.895,16 2,16C3.105,16 4,15.105 4,14C4,12.895 3.105,12 2,12ZM2,13C2.552,13 3,13.448 3,14C3,14.552 2.552,15 2,15C1.448,15 1,14.552 1,14C1,13.448 1.448,13 2,13ZM2,6C0.895,6 0,6.895 0,8C0,9.105 0.895,10 2,10C3.105,10 4,9.105 4,8C4,6.895 3.105,6 2,6ZM2,7C2.552,7 3,7.448 3,8C3,8.552 2.552,9 2,9C1.448,9 1,8.552 1,8C1,7.448 1.448,7 2,7ZM2,0C0.895,0 0,0.895 0,2C0,3.105 0.895,4 2,4C3.105,4 4,3.105 4,2C4,0.895 3.105,0 2,0ZM2,1C2.552,1 3,1.448 3,2C3,2.552 2.552,3 2,3C1.448,3 1,2.552 1,2C1,1.448 1.448,1 2,1Z"})),v=()=>a.createElement("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M25.5,16C25.5,10.753 21.247,6.5 16,6.5C10.753,6.5 6.5,10.753 6.5,16C6.5,21.247 10.753,25.5 16,25.5C21.247,25.5 25.5,21.247 25.5,16ZM24.5,16C24.5,20.694 20.694,24.5 16,24.5C11.306,24.5 7.5,20.694 7.5,16C7.5,11.306 11.306,7.5 16,7.5C20.694,7.5 24.5,11.306 24.5,16ZM15.5,15.5L11.5,15.5C11.224,15.5 11,15.724 11,16C11,16.276 11.224,16.5 11.5,16.5L15.5,16.5L15.5,20.5C15.5,20.776 15.724,21 16,21C16.276,21 16.5,20.776 16.5,20.5L16.5,16.5L20.5,16.5C20.776,16.5 21,16.276 21,16C21,15.724 20.776,15.5 20.5,15.5L16.5,15.5L16.5,11.5C16.5,11.224 16.276,11 16,11C15.724,11 15.5,11.224 15.5,11.5L15.5,15.5Z"})),S=()=>a.createElement("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M9,22.5C9,23.881 10.119,25 11.5,25L22.5,25C22.776,25 23,24.776 23,24.5C23,24.224 22.776,24 22.5,24L11.5,24C10.672,24 10,23.328 10,22.5C10,21.672 10.672,21 11.5,21L22.5,21C22.776,21 23,20.776 23,20.5L23,13.5C23,13.224 22.776,13 22.5,13C22.224,13 22,13.224 22,13.5L22,20C22,20 11.5,20 11.5,20C10.937,20 10.418,20.186 10,20.5L10,9.5C10,8.672 10.672,8 11.5,8C11.5,8 16.5,8 16.5,8C16.776,8 17,7.776 17,7.5C17,7.224 16.776,7 16.5,7L11.5,7C10.119,7 9,8.119 9,9.5L9,22.5ZM22.5,22L11.5,22C11.224,22 11,22.224 11,22.5C11,22.776 11.224,23 11.5,23L22.5,23C22.776,23 23,22.776 23,22.5C23,22.224 22.776,22 22.5,22ZM22,7L19.5,7C19.224,7 19,7.224 19,7.5C19,7.776 19.224,8 19.5,8L22,8L22,10.5C22,10.776 22.224,11 22.5,11C22.776,11 23,10.776 23,10.5L23,8L25.5,8C25.776,8 26,7.776 26,7.5C26,7.224 25.776,7 25.5,7L23,7L23,4.5C23,4.224 22.776,4 22.5,4C22.224,4 22,4.224 22,4.5L22,7Z"})),b=()=>a.createElement("svg",{viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M24.5,23.5C24.776,23.5 25,23.724 25,24C25,24.276 24.776,24.5 24.5,24.5L7.5,24.5C7.224,24.5 7,24.276 7,24C7,23.724 7.224,23.5 7.5,23.5L24.5,23.5Z"}),a.createElement("path",{d:"M20.894,8.354L22.146,9.606C22.732,10.192 22.732,11.142 22.146,11.727L12.374,21.5L9,21.5L9,18.126L18.773,8.354C19.359,7.768 20.308,7.768 20.894,8.354ZM17.666,10.873L10,18.54L10,20.5L11.96,20.5L19.626,12.833L17.666,10.873ZM19.48,9.061L18.373,10.166L20.333,12.126L21.439,11.02C21.635,10.825 21.635,10.508 21.439,10.313L20.187,9.061C19.992,8.865 19.675,8.865 19.48,9.061Z"})),E=e=>{let t=!1;const n=a.useRef(null),[s,r]=a.useState({menuOpen:!1,visibleSnippetsAmount:30});a.useEffect((()=>o()));const o=()=>{const{activeSnippet:i}=e;if(i&&n.current){const e=58,a=n.current,r=a.scrollTop,o=i.index*e,p=Math.max(0,i.index*e-2*e),l=r+e/2<p?p:r-e/2>o?o:r;l!==r&&(t=!0,a.scrollTop=l,setTimeout((()=>{t=!1}),0));const c=(s.visibleSnippetsAmount-1)*e;r+a.offsetHeight>c&&m()}},m=()=>{r((e=>({...e,visibleSnippetsAmount:s.visibleSnippetsAmount+30})))},E=t=>{r((e=>({...e,menuOpen:!1}))),e.onOpenLink(t)};return a.createElement("div",{className:l.snippetsCard},e.matches.length?a.createElement("dl",{ref:n,className:l.snippetsCard__snippets},e.matches.slice(0,s.visibleSnippetsAmount).map((n=>{var s,i;return a.createElement("div",{...(0,p.Sh)(l.snippetsCard__snippet,n.snippet.id===(null===(i=null===(s=e.activeSnippet)||void 0===s?void 0:s.snippet)||void 0===i?void 0:i.id)?l.snippetsCard__snippet_active:null),key:n.snippet.id,onClick:()=>e.applySnippet(n.snippet.id),onMouseEnter:()=>{return s=n.snippet.id,void(t||e.selectSnippet(s));var s}},a.createElement(f,{match:n,triggerSequence:e.triggerSequence}),a.createElement(x,{match:n,content:h(n)}))}))):a.createElement(y,{creationShortcut:e.creationShortcut}),a.createElement("div",{className:l.snippetsCard__footer},a.createElement("div",{className:l["snippetsCard__footer-logo"]},a.createElement(c.T,{backgroundColor:d.bd.black,type:"mini",size:16})),a.createElement("div",{className:l["snippetsCard__footer-hints"]},a.createElement("span",{className:l.buttonTip__group},"navigate"," ",a.createElement("span",{className:l.buttonTip},a.createElement(g,null))," ",a.createElement("span",{className:l.buttonTip},a.createElement(_,null))),a.createElement("span",{className:l.buttonTip__group},"select ",a.createElement("span",{className:l.buttonTip},"Enter")),a.createElement("span",{className:l.buttonTip__group},"cancel ",a.createElement("span",{className:l.buttonTip},"Esc"))),a.createElement("span",{...(0,p.Sh)(l["snippetsCard__footer-menuButton"],s.menuOpen?l["snippetsCard__footer-menuButton_active"]:null),onClick:()=>{r((e=>({...e,menuOpen:!s.menuOpen})))}},a.createElement(C,null)),s.menuOpen&&a.createElement("ul",{className:l["snippetsCard__footer-menu"]},a.createElement("li",{className:l["snippetsCard__footer-menuItem"]},a.createElement("a",{target:"_blank",rel:"noreferrer",href:(0,i.Um)().snippetsNew,onClick:()=>{E("new")}},a.createElement("span",{className:l["snippetsCard__footer-menuItem-icon"]},a.createElement(v,null)),a.createElement("span",{className:l["snippetsCard__footer-menuItem-textGroup"]},a.createElement("span",{className:l["snippetsCard__footer-menuItem-text"]},"Create snippet"),a.createElement("span",{className:l["snippetsCard__footer-shortcut"]},a.createElement("span",{className:l.buttonTip},u())," +"," ",a.createElement("span",{className:l.buttonTip},e.creationShortcut.toUpperCase()))))),a.createElement("li",{className:l["snippetsCard__footer-menuItem"]},a.createElement("a",{target:"_blank",rel:"noreferrer",href:(0,i.Um)().snippetsAdmin,onClick:()=>{E("library")}},a.createElement("span",{className:l["snippetsCard__footer-menuItem-icon"]},a.createElement(S,null)),a.createElement("span",{className:l["snippetsCard__footer-menuItem-textGroup"]},a.createElement("span",{className:l["snippetsCard__footer-menuItem-text"]},"Open library")))),a.createElement("li",{className:l["snippetsCard__footer-menuItem"]},a.createElement("a",{target:"_blank",rel:"noreferrer",href:(0,i.Um)().snippetsSettings,onClick:()=>{E("customize")}},a.createElement("span",{className:l["snippetsCard__footer-menuItem-icon"]},a.createElement(b,null)),a.createElement("span",{className:l["snippetsCard__footer-menuItem-textGroup"]},a.createElement("span",{className:l["snippetsCard__footer-menuItem-text"]},"Edit shortcut"),a.createElement("span",{className:l["snippetsCard__footer-shortcut"]},a.createElement("span",{...(0,p.Sh)(l.buttonTip,l["snippetsCard__footer-editShortcut"])},e.triggerSequence))))))))},f=e=>a.createElement("dt",{className:l["snippetsCard__snippet-name"]},a.createElement("span",{...(0,p.Sh)(l["snippetsCard__snippet-logo"],"PERSONAL"===e.match.snippet.hierarchy?l["snippetsCard__snippet-logo-personal"]:l["snippetsCard__snippet-logo-global"])}),a.createElement("span",{className:l["snippetsCard__snippet-name-match"]},e.triggerSequence),e.match.location===r.C2.name?a.createElement(a.Fragment,null,e.match.snippet.name.slice(0,e.match.range.start),a.createElement("span",{className:l["snippetsCard__snippet-name-match"]},e.match.snippet.name.slice(e.match.range.start,e.match.range.end)),e.match.snippet.name.slice(e.match.range.end)):a.createElement(a.Fragment,null,e.match.snippet.name)),x=e=>a.createElement("dd",{className:l["snippetsCard__snippet-content"]},e.match.location===r.C2.content?a.createElement(a.Fragment,null,e.content.prefix,a.createElement("span",{className:l["snippetsCard__snippet-content-match"]},e.content.content),e.content.suffix):a.createElement(a.Fragment,null,e.content.content)),y=e=>a.createElement("div",{className:l.snippetsCard__empty},a.createElement("div",{className:l["snippetsCard__empty-pic"]}),a.createElement("span",{className:l["snippetsCard__empty-title"]},"Your search did not match any snippets"),a.createElement("div",{className:l["snippetsCard__empty-shortcut"]},"To create one, press ",a.createElement("span",{...(0,p.Sh)(l.buttonTip)},u()),"+",a.createElement("span",{...(0,p.Sh)(l.buttonTip)},e.creationShortcut.toUpperCase()))),w=e=>(a.useEffect((()=>{e.onShow()}),[]),a.createElement("div",{className:l.snippetsCreateBtn},a.createElement("span",{className:l.snippetsCreateBtn__logo},a.createElement("svg",{viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M10.97,0C4.912,0 0,4.91 0,10.968C0,17.026 4.912,21.938 10.97,21.938C17.03,21.938 21.94,17.026 21.94,10.968C21.94,4.91 17.03,0 10.97,0ZM17.133,16.713C17.133,17.169 16.748,17.529 16.276,17.443C15.916,17.379 15.696,17.041 15.696,16.677L15.696,15.97L15.821,15.188C14.601,16.595 12.827,17.401 10.965,17.394C7.281,17.394 4.315,14.344 4.528,10.612C4.713,7.402 7.308,4.746 10.514,4.532C12.978,4.366 15.166,5.609 16.384,7.454L16.38,7.454C16.572,7.864 16.484,8.24 16.163,8.464C16.038,8.552 15.889,8.599 15.736,8.599C15.494,8.599 15.267,8.48 15.128,8.282L15.128,8.274C14.246,7.044 12.708,6.007 10.956,6.007C7.593,6.007 5.012,9.377 6.368,12.912C6.965,14.468 8.38,15.582 10.028,15.84C12.051,16.158 13.902,15.462 14.968,13.898L14.302,14.015L13.152,14.015C12.788,14.015 12.45,13.795 12.385,13.435C12.3,12.965 12.66,12.58 13.115,12.58L17.133,12.58L17.133,16.713Z"}))),a.createElement("span",{className:l.snippetsCreateBtn__textGroup},a.createElement("span",{onClick:()=>e.openEditor(),className:l.snippetsCreateBtn__text},"Create a snippet"),a.createElement("span",{onClick:()=>e.openEditor(),className:l.snippetsCreateBtn__shortcut},a.createElement("span",{className:l.buttonTip},u())," +"," ",a.createElement("span",{className:l.buttonTip},e.creationShortcut.toUpperCase()))),a.createElement(o.u,{offset:{vertical:-12},message:"Turn highlighted text into a snippet to use it later.",showDelay:300},a.createElement("span",{className:l.snippetsCreateBtn__tooltip},"?"))))},86340:(e,t,n)=>{n.d(t,{M:()=>c});var s=n(90023),i=n(49231),a=n(24853),r=n(53210),o=n(12518),p=n(58303);const l={nameEmpty:"Name cannot be empty.",nameTooLong:"Snippet names cannot exceed 30 characters.",textEmpty:"Snippet cannot be empty.",textTooLong:"Snippets cannot exceed 1,000 characters."},c=e=>{const[t,n]=i.useState(""),[c,d]=i.useState(e.content),[h,m]=i.useState(""),[u,g]=i.useState(""),_=(t,n)=>{(0,s.zG)(r.B.validate(t,n,l),o.fold((e=>{(0,s.zG)(e.nameError,p.g_((()=>m("")),m)),(0,s.zG)(e.contentError,p.g_((()=>g("")),g))}),(()=>{e.addSnippet(t,n),m(""),g("")})))};return i.createElement("div",{className:a.snippetsEditor,onKeyUp:e=>{"Enter"===e.key&&_(t,c)}},i.createElement("div",{className:a.snippetsEditor__topWrapper},i.createElement("input",{onMouseDown:e=>e.stopPropagation(),onChange:e=>{const t=e.target;n(t.value)},autoFocus:!0,className:a.snippetsEditor__topWrapper_name,placeholder:"New snippet",name:"snippet-name-input"}),h.length?i.createElement("div",{className:a.snippetsEditor__topWrapper_nameError},h):null,i.createElement("textarea",{onMouseDown:e=>e.stopPropagation(),onChange:e=>{const t=e.target;d(t.value)},className:a.snippetsEditor__topWrapper_content,placeholder:"Write a snippet of text that can be used again and again.",value:c,name:"snippet-content-input"}),u.length?i.createElement("div",{className:a.snippetsEditor__topWrapper_contentError},u):null),i.createElement("div",{className:a.snippetsEditor__bottomWrapper},i.createElement("div",{className:a.snippetsEditor__bottomWrapper_logo},i.createElement("svg",{viewBox:"0 0 22 22",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M10.97,0C4.912,0 0,4.91 0,10.968C0,17.026 4.912,21.938 10.97,21.938C17.03,21.938 21.94,17.026 21.94,10.968C21.94,4.91 17.03,0 10.97,0ZM17.133,16.713C17.133,17.169 16.748,17.529 16.276,17.443C15.916,17.379 15.696,17.041 15.696,16.677L15.696,15.97L15.821,15.188C14.601,16.595 12.827,17.401 10.965,17.394C7.281,17.394 4.315,14.344 4.528,10.612C4.713,7.402 7.308,4.746 10.514,4.532C12.978,4.366 15.166,5.609 16.384,7.454L16.38,7.454C16.572,7.864 16.484,8.24 16.163,8.464C16.038,8.552 15.889,8.599 15.736,8.599C15.494,8.599 15.267,8.48 15.128,8.282L15.128,8.274C14.246,7.044 12.708,6.007 10.956,6.007C7.593,6.007 5.012,9.377 6.368,12.912C6.965,14.468 8.38,15.582 10.028,15.84C12.051,16.158 13.902,15.462 14.968,13.898L14.302,14.015L13.152,14.015C12.788,14.015 12.45,13.795 12.385,13.435C12.3,12.965 12.66,12.58 13.115,12.58L17.133,12.58L17.133,16.713Z"}))),i.createElement("div",{className:a.snippetsEditor__bottomWrapper_text},"This snippet will be added to your default collection. To use it later, type",i.createElement("span",{className:a.buttonTip},e.triggerSequence)),i.createElement("div",{className:a.snippetsEditor__bottomWrapper_buttons},i.createElement("div",{onClick:()=>e.dismiss(),className:a.snippetsEditor__bottomWrapper_cancelBtn,"data-name":"cancel-snippet-button"},"Cancel"),i.createElement("div",{onClick:()=>_(t,c),className:a.snippetsEditor__bottomWrapper_saveBtn,"data-name":"save-snippet-button"},"Save"))))}},91258:(e,t,n)=>{n.d(t,{q:()=>i});var s=n(49231);const i=e=>s.createElement("div",{onKeyDown:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation()},e.children)},5409:e=>{e.exports={appActionsCard:"hZIgk","appActionsCard__group-name":"tajII","appActionsCard__group-body":"tppnx",appActionsCard__snippets:"aEeRP",appActionsCard__snippet:"R_SJq",appActionsCard__snippet_active:"p0dAk","appActionsCard__snippet-logo":"XApNs","appActionsCard__snippet-name":"KoPc1","appActionsCard__snippet-name-match":"xSw9m","appActionsCard__snippet-content":"PZ6Xs","appActionsCard__snippet-content-match":"HSZW9",appActionsCard__footer:"KFUuC","appActionsCard__footer-logo":"tWsnV","appActionsCard__footer-hints":"dNqeX",appActionsCard__empty:"P1CSu","appActionsCard__empty-pic":"HH1gd","appActionsCard__empty-title":"SUcEo",buttonTip:"XSY_n",buttonTip__group:"lcpTl"}},62207:e=>{e.exports={topBox:"J4IDK","topBox-placement-top":"d4cO9","topBox-placement-bottom":"P_x6D"}},24853:e=>{e.exports={snippetsEditor:"igUqv",snippetsEditor__topWrapper:"NdPJC",snippetsEditor__topWrapper_name:"AQyZX",snippetsEditor__topWrapper_nameError:"VYFmy",snippetsEditor__topWrapper_content:"lyWj9",snippetsEditor__topWrapper_contentError:"h8EXg",snippetsEditor__bottomWrapper:"gplIn",snippetsEditor__bottomWrapper_logo:"TMR5J",snippetsEditor__bottomWrapper_text:"XTBlB",snippetsEditor__bottomWrapper_buttons:"V71h0",snippetsEditor__bottomWrapper_cancelBtn:"QjlVw",snippetsEditor__bottomWrapper_saveBtn:"m3H6c",snippetsCreateBtn:"hWTDz",snippetsCreateBtn__logo:"gw5Ma",snippetsCreateBtn__textGroup:"dJ_Sb",snippetsCreateBtn__text:"j4i2d",snippetsCreateBtn__shortcut:"zGRMe",snippetsCreateBtn__tooltip:"EOOEz",snippetsCard:"RuyGy",snippetsCard__snippets:"JendO",snippetsCard__snippet:"UNhhl",snippetsCard__snippet_active:"a_Eej","snippetsCard__snippet-logo":"EIQls","snippetsCard__snippet-logo-personal":"PQHUg","snippetsCard__snippet-logo-global":"luE5K","snippetsCard__snippet-name":"JhypS","snippetsCard__snippet-name-match":"h9hHI","snippetsCard__snippet-content":"uDeBL","snippetsCard__snippet-content-match":"veKIf",snippetsCard__footer:"g1Jue","snippetsCard__footer-logo":"Gd_W9","snippetsCard__footer-shortcut":"eFTGO","snippetsCard__footer-hints":"OYNqN","snippetsCard__footer-menuButton":"Wvuh7","snippetsCard__footer-menuButton_active":"jP25n","snippetsCard__footer-editShortcut":"iBiq4","snippetsCard__footer-menu":"THTqk","snippetsCard__footer-menuItem":"azm2J","snippetsCard__footer-menuItem-text":"n1zYx","snippetsCard__footer-menuItem-icon":"V5lh4","snippetsCard__footer-menuItem-textGroup":"M7kb8",snippetsCard__empty:"b9RUX","snippetsCard__empty-pic":"j3NQL","snippetsCard__empty-title":"fJLFQ","snippetsCard__empty-shortcut":"DT7J3",buttonTip:"gLNn3",buttonTip__group:"mvPjS"}},81279:(e,t,n)=>{n.d(t,{z:()=>l});var s=n(49231),i=n(63178),a=n(51007),r=n(2498),o=n(90382),p=n(59330);const l=s.forwardRef((function(e,t){const{size:n="medium",children:l,iconEnd:c,iconStart:d,text:h,tabIndex:m,shortcut:u}=e,{buttonProps:g,isPressed:_,ref:C,inProgress:v,variant:S}=(0,a.zT)(e,t),{isFocusVisible:b,focusProps:E}=(0,r.Fx)(),{isLoading:f}=e,x=null!=h?h:"string"==typeof l?l:void 0;return s.createElement("button",{className:(0,i.W)((0,a.gj)(e,_,v,b,!1),f&&"gds-button-loading"),ref:C,"aria-disabled":f,...g,...E,tabIndex:null!=m?m:0},s.createElement(s.Fragment,null,f?s.createElement(o.a,{accessibilityLabel:"Loading",style:{position:"absolute"}},s.createElement(o.a.Circular,{variant:"inherit",className:"gds-button-loader",size:{small:"small",medium:"small",large:"medium",xlarge:"medium","2xlarge":"large","3xlarge":"large","4xlarge":"large"}[n]})):null,(0,a.g_)(S,d,n),(0,a.Vh)(x,l,a.g$[n],S),(0,a.FX)(S,c,n),null!=u&&!["premium","critical","pro","enterprise"].includes(S)&&s.createElement(p.x,{variant:a.g$[n],className:"gds-button-shortcut",as:"kbd"},u)))}))},77530:(e,t,n)=>{n.d(t,{k:()=>o});var s=n(49231),i=n(73255),a=n(41226),r=n(63178);const o=s.forwardRef((function(e,t){const{utility:n,other:i}=(0,a.a)(e),{accessibilityLabel:o,align:l,as:c,children:d,className:h,direction:m="row",elevation:u,flex:g,gap:_=0,justify:C,wrap:v=!1,style:S={},...b}=i,E=function({direction:e,wrap:t,elevation:n,className:s}){return(0,r.W)("gds-flex","column"===e&&"gds-flex-direction-column",t&&"gds-flex-wrap",n&&`gds-flex-elevation-${n}`,s)}({direction:m,wrap:v,elevation:u,className:h}),f=(0,a.f)(n),x={...p(_),alignItems:l,justifyContent:C,flex:g,...f,...S},y=null!=c?c:"div";return s.createElement(y,{"aria-label":o,ref:t,className:E,style:x,...b},d)}));function p(e){if(null==e)return{};if("number"==typeof e)return{gap:`var(--space-${(0,i.Jy)(e)})`};return{gap:`${null==e.row?"normal":`var(--space-${(0,i.Jy)(e.row)})`} ${null==e.column?"normal":`var(--space-${(0,i.Jy)(e.column)})`}`}}},78426:(e,t,n)=>{n.d(t,{E:()=>r});let s=null;let i;class a{constructor(){const e=document.getElementById("gds-liveAnnouncer");this.node=document.createElement("div"),this.node.setAttribute("id","gds-liveAnnouncer"),this.node.dataset.liveAnnouncer="true",this.node.classList.add("gds-sr-only"),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),e||document.body.append(this.node)}createLog(e){const t=document.createElement("div");return t.setAttribute("role","status"),t.setAttribute("aria-live",e),t.setAttribute("id",`gds-${e}`),t}createEmptyNode(e){const t=document.getElementById(`gds-${e}`);t&&(t.innerHTML="<p>&nbsp;</p>")}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}clearOldMessages(e){e&&e.childNodes.forEach((t=>e.removeChild(t)))}announce(e,t="assertive",n){if(!this.node)return;const s=document.createElement("p");s.textContent=e,this.clearOldMessages(this.assertiveLog),this.clearOldMessages(this.politeLog),"assertive"===t?this.assertiveLog.appendChild(s):this.politeLog.appendChild(s),""!==e&&setTimeout((()=>{s.remove()}),n)}clear(e){this.node&&(e?"assertive"===e?this.assertiveLog.innerHTML="":this.politeLog.innerHTML="":(this.assertiveLog.innerHTML="",this.politeLog.innerHTML=""))}}const r={announce:function(e,t="polite",n=7e3){s&&(s.createEmptyNode("polite"),s.createEmptyNode("assertive")),s||(s=new a),i&&clearTimeout(i),i=setTimeout((()=>{s&&s.announce(e,t,n)}),10)},clear:function(e){s&&s.clear(e)},destroy:function(){s&&(s.destroy(),s=null)}}},50078:(e,t,n)=>{n.d(t,{W:()=>a});var s=n(49231),i=n(63178);const a=({size:e="medium",variant:t="default",className:n,...a})=>s.createElement("div",{className:(0,i.W)("gds-branded-loader-container",`gds-branded-loader-container-size-${e.toLowerCase()}`,n),...a},s.createElement("svg",{viewBox:"0 0 128 128",fill:`var(--color-icon-base-${t})`,xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{className:"gds-branded-loader-bobble gds-branded-loader-top-left",d:"M59.7334 38.4C59.7334 26.6179 50.1821 17.0667 38.4001 17.0667C26.618 17.0667 17.0667 26.6179 17.0667 38.4C17.0667 50.1821 26.618 59.7333 38.4001 59.7333H59.7334V38.4Z"}),s.createElement("path",{className:"gds-branded-loader-bobble gds-branded-loader-bottom-left",d:"M59.7334 98.1333C59.7334 114.628 46.3616 128 29.8667 128C13.3718 128 6.48499e-05 114.628 6.48499e-05 98.1333C6.48499e-05 81.6384 13.3718 68.2667 29.8667 68.2667H59.7334V98.1333Z"}),s.createElement("path",{className:"gds-branded-loader-bobble gds-branded-loader-top-right",d:"M68.2666 29.8667C68.2666 13.3718 81.6384 0 98.1333 0C114.628 0 128 13.3718 128 29.8667C128 46.3616 114.628 59.7333 98.1333 59.7333H68.2666V29.8667Z"}),s.createElement("path",{className:"gds-branded-loader-bobble gds-branded-loader-bottom-right",d:"M68.2666 89.6C68.2666 101.382 77.8179 110.933 89.5999 110.933C101.382 110.933 110.933 101.382 110.933 89.6C110.933 77.8179 101.382 68.2667 89.5999 68.2667H68.2666V89.6Z"})))},52955:(e,t,n)=>{n.d(t,{V:()=>a});var s=n(49231),i=n(63178);const a=({size:e="medium",variant:t="default",className:n,...a})=>s.createElement("div",{className:(0,i.W)("gds-circular-loader-container",`gds-circular-loader-container-size-${e.toLowerCase()}`,n),...a},s.createElement("svg",{viewBox:"25 25 50 50",width:"100%","aria-hidden":"true"},s.createElement("circle",{className:(0,i.W)("gds-circular-loader",`gds-circular-loader-${e.toLowerCase()}`,`gds-circular-loader-variant-${t.toLowerCase()}`),cx:"50",cy:"50",r:"20",fill:"none",strokeMiterlimit:"1"})))},90382:(e,t,n)=>{n.d(t,{a:()=>p});var s=n(49231),i=n(52955),a=n(79863),r=n(50078),o=n(78426);const p=(0,a.o)((({accessibilityLabel:e="Loading",shouldFocus:t=!1,onLoaded:n,children:i,...a})=>{const r=s.useRef(null);return(0,s.useEffect)((()=>{var e;return t&&(null==(e=r.current)||e.focus()),()=>{null==n||n(),o.E.clear("polite")}}),[]),(0,s.useEffect)((()=>{e&&o.E.announce(e,"polite")}),[e,o.E]),s.createElement("div",{ref:r,role:"progressbar","aria-label":e,"aria-valuetext":"In progress",...a},i)}),"Loader",{Circular:i.V,Branded:r.W})},54763:(e,t,n)=>{function s(e){if(void 0!==e)return"light-green"===e?"var(--light-green)":"yellow-green"===e?"var(--yellow-green)":/-\d\d?\d?$/.test(e)||"white"===e?`var(--${e})`:`var(--color-${e})`}n.d(t,{y:()=>s})},41226:(e,t,n)=>{n.d(t,{a:()=>a,f:()=>r});var s=n(54763),i=n(73255);function a(e){const{bgColor:t,borderColor:n,borderRadius:s,color:i,margin:a,marginLeft:r,marginRight:o,marginTop:p,marginBottom:l,padding:c,paddingLeft:d,paddingRight:h,paddingTop:m,paddingBottom:u,width:g,height:_,...C}=e;return{utility:{bgColor:t,borderColor:n,borderRadius:s,color:i,margin:a,marginLeft:r,marginRight:o,marginTop:p,marginBottom:l,padding:c,paddingLeft:d,paddingRight:h,paddingTop:m,paddingBottom:u,width:g,height:_},other:C}}function r(e){const{bgColor:t,borderColor:n,borderRadius:a,color:r,margin:o,marginLeft:p,marginRight:l,marginTop:c,marginBottom:d,padding:h,paddingLeft:m,paddingRight:u,paddingTop:g,paddingBottom:_,width:C,height:v}=e;return{backgroundColor:(0,s.y)(t),border:void 0!==n?`1px solid var(--color-border-${n})`:void 0,borderRadius:void 0!==a?`var(--radius-${(0,i.Jy)(a)})`:void 0,color:void 0!==r?`var(--color-text-${r})`:void 0,width:"number"==typeof C?`${C}px`:C,height:"number"==typeof v?`${v}px`:v,...(0,i.AA)({margin:o,marginLeft:p,marginRight:l,marginTop:c,marginBottom:d}),...(0,i.VI)({padding:h,paddingLeft:m,paddingRight:u,paddingTop:g,paddingBottom:_})}}}}]);