(self.webpackChunk=self.webpackChunk||[]).push([[5213],{22848:(e,t,a)=>{a.d(t,{v:()=>k});var i=a(93453),r=a(72925),n=a(90023),o=a(12518),c=a(47739),l=a(17071),s=a(64629),d=a(92014),g=a(27602),p=a(4623),u=a(10894);var m=a(58303),v=a(25770),f=a(44025),h=a(16925),x=a(11274);const C=e=>e.createDocument?e.createDocument:t=>x._A.create((e=>e.getDocumentId?e.getDocumentId:()=>{})(e)(t));var y=a(16374),S=a(69171),F=a(13798);const T={ruleName:"isKnowledgeHubEnabled",match:(e,t)=>"test"===t.experimentClient.getTreatment(i.p.KnowledgeHubAtlassian)},I=".ak-renderer-document",k=(w="Jira",M=e=>({createLayout:()=>new r.A(e.field),validationRules:[T,{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(I)}],textMap:{createFieldTextMap:e=>new p.Z(e,((e,t)=>p.Z.defaultFilterNode(e,t)&&(e=>!e.classList.contains("expand-content-wrapper"))(e)))}}),b=I,{kind:F.A.readonly,name:`readonlyContent.${w}`,contentSelector:b,match:e=>{const t=((e,t,a,i)=>{const r=a(e),o=r.target||e.field,c=r.textMap||{createFieldTextMap:p.Z.create},m=(r.createSelectionSource||(()=>(0,g.B)(o)))();return{target:o,initialState:e.state,integrationName:`contentEditable.${t}`,validationRules:[{ruleName:"notABody",match:(0,l.ff)(d.XD)},{ruleName:"isReadonlyContentField",match:(e,t)=>e.matches(i)}],textMap:c,expiration:d.Jj,createSelectionSource:()=>(0,g.B)(o),mapChange:n.yR,...r,selectionSource:m,createTextObserver:()=>new u.j(o,s.k.fromDiff,m,void 0,c.createFieldTextMap)}})(e,w,M,b);return(0,n.zG)((0,y.O)(t.target,e,t.integrationName,t.validationRules),o.map((()=>({targetField:t.target,matchExpires:t.expiration(t.target),execute:e=>{var a;const i=S.Y.decorate((0,n.zG)(((e,t)=>{var a;const i=t.createTextObserver(),r=t.createHighlightsFilterFactory?t.createHighlightsFilterFactory(i):h.u,n=t.createLayout(t.target);return{doc:C(e)(t.target),textField:t.target,domain:e.pageContext.domain,url:e.pageContext.url,layout:n,createCheckingService:t=>e.createCheckingService(t),mapChange:t.mapChange,state:v.h.create(t.initialState),actions:e.actions,fieldSettings:e.fieldSettings,notifications:(0,f.Cq)(e.app.notifications,"ctx.app.notifications"),gnar:e.gnar,productMetricsCSClient:e.productMetricsCSClient,felog:e.felog,config:e.pageContext.config,experimentClient:e.experimentClient,isCurrentFieldFocused:v.h.create(!1),selectionSource:t.selectionSource,textObserver:i,createAlertProcessor:t.createAlertProcessor,createTextRevisionManager:t.createTextRevisionManager,geometryProvider:t.highlightGeometryProvider,customizations:{...t.customizations,getDocEvents:(null===(a=t.customizations)||void 0===a?void 0:a.getDocEvents)||e.getDocEvents,isGbuttonVisible:v.h.create(!1)},highlightsFilterFactory:r,iframeConnectionId:e.iframeConnectionId,eventPropagationHandler:e.eventPropagationHandler,forceIntegrationEntirelyInsideIframe:e.forceIntegrationEntirelyInsideIframe,pageIntegrationId:e.pageContext.id,integrationName:t.integrationName,typingTracker:e.pageContext.typingTracker,vBarsIntegrationInfo:m.YP}})(e,t),c.kC,n.a9),t.integrationName,t.target);return null===(a=t.onCreate)||void 0===a||a.call(t),{update(e){i.update(e)},dispose(){var e;i.dispose(),null===(e=t.onDispose)||void 0===e||e.call(t)}}},desiredCustomizations:{capiStartSessionOptions:{...e.capiStartSessionOptions,mode:"READ_ONLY"}}}))))}});var w,M,b},25590:(e,t,a)=>{a.r(t),a.d(t,{Jira:()=>f});var i,r=a(8748),n=a(90049),o=a(18615),c=a(34859),l=a(72925),s=a(92014),d=a(68599),g=a(43009),p=a(53253),u=a(16374),m=a(22848),v=a(4623);!function(e){e.createTextMap=t=>new v.Z(t,(t=>!e.hasPlaceholder(t))),e.hasPlaceholder=e=>!!e.querySelector(".placeholder-decoration")}(i||(i={}));var f,h=a(88900),x=a(52073),C=a(16711);!function(e){const t=g.M.generic((e=>({overwriteGenericOpts:{validationRules:p.u,createLayout:()=>new l.A(e.field.closest(".ak-editor-content-area, .content-area")||e.field),expiration:e=>{const t=e.closest("body > span > div"),a=t?C.x.observeStyle(t).pipe((0,o.P)((e=>"0"===e.opacity)),(0,c.h)(void 0)):(0,r.c)();return(0,n.T)((0,s.Jj)(e),a)},textMap:{createFieldTextMap:i.createTextMap}}}))),a=d.T.textarea("Jira.issuePageDescription",(e=>({validate:(e,t)=>(0,u.O)(e.field,e,t,[{ruleName:"isNearDescriptionWikiEditField",match:e=>!!e.closest("#description-wiki-edit")}]),createLayout:()=>new l.A(e.field)})));e.page=(0,h.$W)({name:"JIRA-readonly",domain:x.fI},[t,a,d.T.iframe("Jira"),d.T.contentEditable("Jira",(e=>({createLayout:()=>new l.A(e.field)}))),d.T.textarea("Jira",(e=>({createLayout:()=>new l.A(e.field)}))),m.v])}(f||(f={}))}}]);