/*! For license information please see Grammarly-check.js.LICENSE.txt */
var e={16742:(e,t,n)=>{var i=n(2010),r="chrome-extension://__MSG_@@extension_id__/",s="moz-extension://__MSG_@@extension_id__/",o="safari-web-extension://__MSG_@@extension_id__/",a=self.GR_RESOURCE_ROOT||r,c=self.GR_RESOURCE_ROOT||s,l=self.GR_RESOURCE_ROOT||o;e.exports={__css:i.toString().replace(new RegExp(r,"g"),a).replace(new RegExp(s,"g"),c).replace(new RegExp(o,"g"),l),...i.locals}},62269:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var n={prod:"grammarly.com",preprod:"ppgr.io",qa:"qagr.io"};t.config=function(e){var t=n[e];return{url:{properties:"https://properties."+t,treatment:"https://treatment."+t,gates:"https://gates."+t}}}},43693:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Experiment=void 0;var n=function(){function e(e,t){this.name=e,this._experiences=t}return Object.defineProperty(e.prototype,"experiences",{get:function(){return Object.fromEntries(this._experiences.map((function(e){return[e,e]})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"experiencesArray",{get:function(){return this._experiences},enumerable:!1,configurable:!0}),e}();t.Experiment=n},54936:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentClient=void 0;var s=n(54391),o=n(45052),a=n(48782),c=function(e,t,n,c,l){var u=this;void 0===l&&(l={}),this._treatmentService=e,this._experiments=t,this._gatesService=n,this._gates=c,this._config=l,this._experimentTreatments=new Map,this._gateTreatments=new Map,this._initialFetched=!1,this.setPrefetchedTreatments=function(e){if(u._startRefreshIfNeeded(),!o.validateTreatmentsWithType(e))throw new Error("Not valid treatments");u._updateTreatmentForExpAndGates(e)},this._updateTreatmentForExpAndGates=function(e){u._treatmentService.refresh&&u._treatmentService.refresh(),u._experimentTreatments=new Map(e.filter((function(e){return e.type===a.ExperimentType.experiment})).map((function(e){return[e.experimentName,e]}))),u._gateTreatments=new Map(e.filter((function(e){return e.type===a.ExperimentType.gate})).map((function(e){return[e.experimentName,e]})))},this.fetchTreatments=function(e){return void 0===e&&(e={}),i(u,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this._startRefreshIfNeeded(),[4,this._fetchTreatments(e.clearCacheOnError)];case 1:return t.sent(),[2]}}))}))},this._fetchTreatments=function(e){return i(u,void 0,void 0,(function(){var t,n,i,s,o,a,c;return r(this,(function(r){switch(r.label){case 0:t=null,n=null,r.label=1;case 1:return r.trys.push([1,3,,4]),i=this._experiments.concat(this._gates),[4,this._treatmentService.getTreatment(i.map((function(e){return e.name})))];case 2:return t=r.sent(),[3,4];case 3:return s=r.sent(),n=s,e&&this._experimentTreatments.clear(),[3,4];case 4:if(t)return this._updateTreatmentForExpAndGates(t),[2];o=null,a=null,r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this._gatesService.getTreatment(this._gates.map((function(e){return e.name})))];case 6:return o=r.sent(),[3,8];case 7:return c=r.sent(),a=c,e&&this._gateTreatments.clear(),[3,8];case 8:if(o&&(this._gateTreatments=new Map(o.map((function(e){return[e.experimentName,e]})))),a||n)throw a||n;return[2]}}))}))},this._startRefreshIfNeeded=function(){u._initialFetched||(u._config.ttl&&(u._refreshTreatment=setInterval((function(){return i(u,void 0,void 0,(function(){var e,t=this;return r(this,(function(n){switch(n.label){case 0:return e=function(){return i(t,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._fetchTreatments()];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},this._config.ttl&&this._config.useRefreshJitter?(this._delayedRefreshTreatment=setTimeout(e,.1*this._config.ttl*Math.random()),[3,3]):[3,1];case 1:return[4,e()];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}),u._config.ttl)),u._initialFetched=!0)},this.dispose=function(){u._refreshTreatment&&clearInterval(u._refreshTreatment),u._delayedRefreshTreatment&&clearTimeout(u._delayedRefreshTreatment)},this.getTreatment=function(e){var t=u.peekTreatment(e);return null!==t&&u.logTreatment(e,t).catch((function(){})),t},this.peekTreatment=function(e){var t=u._experimentTreatments.get(e.name)||u._gateTreatments.get(e.name),n=null==t?void 0:t.groupName;if(n){var i=e.experiencesArray.find((function(e){return s.getGroupNames(e).includes(n)}));if(i)return i}return null},this.logTreatment=function(e,t){if(u._config.ssrDisableLogging)return Promise.resolve();var n=u._experimentTreatments.get(e.name)||u._gateTreatments.get(e.name);if(!n||s.getExperienceName(n.groupName)!==t)throw new Error("Cannot find associated treatment");return(void 0!==n.needLog?n.needLog:n.type!==a.ExperimentType.gate)?u._treatmentService.logTreatment(n):Promise.resolve()},this.isGateEnabled=function(e){return u._getExperienceOfEnabledGate(e.name)===e.experience},this._getExperienceOfEnabledGate=function(e){var t=u._gateTreatments.get(e);return t?s.getExperienceName(t.groupName):null},this.getDynamicConfiguration=function(e){var t=u._experimentTreatments.get(e.name)||u._gateTreatments.get(e.name);return t&&t.dynamicConfiguration?t.dynamicConfiguration:null}};t.ExperimentClient=c},39406:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Gate=void 0;var n=function(e,t){void 0===t&&(t="enabled"),this.name=e,this.experience=t};t.Gate=n},1940:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GatesService=void 0;var s=n(62269),o=n(61602),a=n(45052),c=function(){function e(e,t,n){this.type="gate",this._httpClient=new o.HttpClient(e,t),this._gatesUrl=s.config(n).url.gates+"/gates/get"}return e.prototype.getTreatment=function(e){return i(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,this._httpClient.post(this._gatesUrl,e)];case 1:if(t=n.sent(),a.validateTreatmentsWithType(t))return[2,t];throw new Error("Did not get valid gate treatments")}}))}))},e}();t.GatesService=c},61602:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;var s=function(){function e(e,t){var n=this;this._fetch=e,this._config=t,this._fetchWithTimeout=this._config.timeout?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Promise.race([n._fetch.apply(n,e),new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout"))}),n._config.timeout)}))])}:this._fetch}return e.prototype.get=function(e){return i(this,void 0,void 0,(function(){var t,n;return r(this,(function(i){switch(i.label){case 0:return[4,this._getHeaders()];case 1:return t=i.sent(),[4,this._fetchWithTimeout(e,{credentials:"include",mode:"cors",headers:t})];case 2:return n=i.sent(),[2,this._parseResponse(n)]}}))}))},e.prototype.post=function(e,t){return i(this,void 0,void 0,(function(){var i,s;return r(this,(function(r){switch(r.label){case 0:return[4,this._getHeaders()];case 1:return i=r.sent(),[4,this._fetchWithTimeout(e,{method:"POST",credentials:"include",mode:"cors",headers:n(n({},i),{"Content-Type":"application/json"}),body:JSON.stringify(t)})];case 2:return s=r.sent(),[2,this._parseResponse(s)]}}))}))},e.prototype._filterHeaders=function(e){var t={};return Object.entries(e).forEach((function(e){var n=e[0],i=e[1];i&&(t[n]=i)})),t},e.prototype._getHeaders=function(){return i(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return this._config.getApplicationHeaders?(e=this._filterHeaders,[4,this._config.getApplicationHeaders()]):[3,2];case 1:return[2,e.apply(this,[t.sent()])];case 2:throw new Error("Cannot get application headers")}}))}))},e.prototype._parseResponse=function(e){if(!e.ok)throw new Error("Network response was not ok, status "+e.status);return"application/json"===e.headers.get("Content-Type")?e.json():e.text()},e}();t.HttpClient=s},61986:(e,t,n)=>{t.Cc=t.KS=void 0;var i=n(54936);var r=n(48782);var s=n(1940);var o=n(67853);var a=n(43693);Object.defineProperty(t,"KS",{enumerable:!0,get:function(){return a.Experiment}});var c=n(39406);Object.defineProperty(t,"Cc",{enumerable:!0,get:function(){return c.Gate}})},67853:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropertiesClient=void 0;var i=n(62269),r=n(61602),s=function(){function e(e,t,n){this._propertiesUrl=i.config(t).url.properties+"/properties",this._httpClient=new r.HttpClient(e,n)}return e.prototype.getAll=function(){return this._httpClient.get(this._propertiesUrl)},e.prototype.getOne=function(e){var t=this._propertiesUrl+"/"+e;return this._httpClient.get(t)},e.prototype.set=function(e){return this._httpClient.post(this._propertiesUrl,e)},e}();t.PropertiesClient=s},54391:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupNames=t.getExperienceName=void 0;t.getExperienceName=function(e){return e.endsWith("_1")||e.endsWith("_2")?e.slice(0,-2):null};t.getGroupNames=function(e){return[e+"_1",e+"_2"]}},45052:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateTreatmentsWithType=void 0;var n=function(e){return"string"==typeof e};t.validateTreatmentsWithType=function(e){return Array.isArray(e)&&e.reduce((function(e,t){return e&&(n((i=t).experimentName)&&n(i.groupName)&&n(i.experimentId)&&n(i.type));var i}),!0)}},48782:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreatmentService=t.ExperimentType=void 0;var s=n(62269),o=n(61602),a=n(45052);!function(e){e.experiment="experiment",e.gate="gate"}(t.ExperimentType||(t.ExperimentType={}));var c=function(e){var t=function(e){return e.holdoutTreatment?":"+e.holdoutTreatment.experimentId+t(e.holdoutTreatment):""};return""+(e.groupName+":"+e.userId+":"+e.experimentId)+t(e)},l=function(){function e(e,t,n,i){this._persistentStorageOpts=i,this.type="experiment",this._throttleLogs=new Map,this._sentLogs={},this._httpClient=new o.HttpClient(e,t),this._treatmentUrl=s.config(n).url.treatment+"/treatment"}return e.prototype.getTreatment=function(e){return i(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return t=this._treatmentUrl+"/get",n=e,[4,this._httpClient.post(t,n)];case 1:if(i=r.sent(),a.validateTreatmentsWithType(i))return[2,i];throw new Error("Did not get valid treatments")}}))}))},e.prototype.logTreatment=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return this._checkShouldThrottle(e)||this._checkSent(e)?[2]:[4,this._sendLogTreatment(e)];case 1:return t.sent(),this._setSentLogs(e),[2]}}))}))},e.prototype.refresh=function(){this._throttleLogs.clear()},e.prototype.initSentLogsStorage=function(){return i(this,void 0,void 0,(function(){var e,t,n=this;return r(this,(function(i){switch(i.label){case 0:if(!this._persistentStorageOpts)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._persistentStorageOpts.get(this._sentLogsStorageKey)];case 2:return e=i.sent()||{},t=new Set(this._persistentStorageOpts.experimentNames),Object.entries(e).forEach((function(e){var i=e[0],r=e[1];t.has(i)&&n._updateSentLogs(i,r)})),[3,4];case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"_sentLogsStorageKey",{get:function(){var t;return e.STORAGE_KEY_PREFIX+(null===(t=this._persistentStorageOpts)||void 0===t?void 0:t.clientName)},enumerable:!1,configurable:!0}),e.prototype._checkShouldThrottle=function(e){var t=c(e),n=this._throttleLogs.get(e.experimentName)===t;return n||this._throttleLogs.set(e.experimentName,t),n},e.prototype._checkSent=function(e){var t=c(e);return this._sentLogs[e.experimentName]===t},e.prototype._setSentLogs=function(e){var t=c(e);this._updateSentLogs(e.experimentName,t,!0)},e.prototype._updateSentLogs=function(e,t,n){void 0===n&&(n=!1),(n||void 0===this._sentLogs[e])&&(this._sentLogs[e]=t),n&&this._persistSentLogs()},e.prototype._persistSentLogs=function(){return i(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),this._persistentStorageOpts?[4,this._persistentStorageOpts.set(this._sentLogsStorageKey,this._sentLogs)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}}))}))},e.prototype._sendLogTreatment=function(e){var t=this._treatmentUrl+"/log";return this._httpClient.post(t,e)},e.STORAGE_KEY_PREFIX="TreatmentServiceStorage_",e}();t.TreatmentService=l},2010:(e,t,n)=>{var i=n(42663),r=n(2963)(i);r.push([e.id,"._cWTM9-animatedUnderline{visibility:hidden;position:fixed;}._cWTM9-animatedUnderline:after{content:'';position:absolute;visibility:visible;height:3px;bottom:0;border-radius:10px;background:#488cc8;animation:_Axb1F-showUnderline 1.3s ease forwards}._cWTM9-animatedUnderline._qSuCO-completeAnimation:after{animation:_Axb1F-showUnderline .2s ease forwards}@keyframes _Axb1F-showUnderline{0%{width:0%}100%{width:100%}}._hoLGP-checkAnimatedUnderline{animation:_Axb1F-showUnderline 2s ease forwards;}._hoLGP-checkAnimatedUnderline._qSuCO-completeAnimation{animation:_Axb1F-showUnderline .2s ease forwards}",""]),r.locals={animatedUnderline:"_cWTM9-animatedUnderline",showUnderline:"_Axb1F-showUnderline",completeAnimation:"_qSuCO-completeAnimation",checkAnimatedUnderline:"_hoLGP-checkAnimatedUnderline"},e.exports=r},2963:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);i&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},42663:e=>{e.exports=function(e){return e[1]}},87104:e=>{e.exports={animatedUnderline:"ymqHP",showUnderline:"JQguZ",completeAnimation:"ExcM8"}},44675:e=>{var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},94100:function(e,t,n){var i;!function(r,s){var o="function",a="undefined",c="object",l="string",u="model",d="name",h="type",p="vendor",g="version",f="architecture",m="console",_="mobile",b="tablet",v="smarttv",y="wearable",w="embedded",x="Amazon",E="Apple",C="ASUS",S="BlackBerry",T="Firefox",k="Google",I="Huawei",R="LG",F="Microsoft",A="Motorola",O="Opera",N="Samsung",P="Sharp",L="Sony",M="Xiaomi",D="Zebra",U="Facebook",G=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},B=function(e,t){return typeof e===l&&-1!==j(t).indexOf(j(e))},j=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===a?e:e.substring(0,350)},H=function(e,t){for(var n,i,r,a,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=i=0;n<h.length&&!l;)if(l=h[n++].exec(e))for(r=0;r<p.length;r++)u=l[++i],typeof(a=p[r])===c&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):s:this[a[0]]=u?a[1].call(this,u,a[2]):s:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):s):this[a]=u||s;d+=2}},V=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(B(t[n][i],e))return"?"===n?s:n}else if(B(t[n],e))return"?"===n?s:n;return e},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,g],[/opios[\/ ]+([\w\.]+)/i],[g,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[g,[d,O]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],g],[/\bfocus\/([\w\.]+)/i],[g,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[g,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[g,[d,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],g],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,U],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[g,V,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,j]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",j]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,j]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,N],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,N],[h,_]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[p,E],[h,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,E],[h,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,I],[h,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[p,I],[h,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,M],[h,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,M],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[h,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[h,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[h,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,A],[h,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,A],[h,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,R],[h,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,R],[h,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[h,_]],[/(pixel c)\b/i],[u,[p,k],[h,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,k],[h,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,L],[h,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,L],[h,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[h,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,x],[h,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,x],[h,_]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[h,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,S],[h,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,C],[h,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,C],[h,_]],[/(nexus 9)/i],[u,[p,"HTC"],[h,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[h,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[h,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[h,_]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,P],[h,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[h,_]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[h,b]],[/(surface duo)/i],[u,[p,F],[h,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[h,_]],[/(u304aa)/i],[u,[p,"AT&T"],[h,_]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[h,_]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[h,b]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[h,b]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[h,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[h,b]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[h,b]],[/\b(k88) b/i],[u,[p,"ZTE"],[h,b]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[h,_]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[h,_]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[h,b]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[h,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[h,b]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[h,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[h,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[h,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[h,_]],[/\b(ph-1) /i],[u,[p,"Essential"],[h,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[h,b]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[h,b]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[h,b]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[h,b]],[/(sprint) (\w+)/i],[p,u,[h,_]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,F],[h,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,D],[h,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,D],[h,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[h,m]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[u,[p,L],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,F],[h,m]],[/smart-tv.+(samsung)/i],[p,[h,v]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,N],[h,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,R],[h,v]],[/(apple) ?tv/i],[p,[u,"Apple TV"],[h,v]],[/crkey/i],[[u,"Chromecast"],[p,k],[h,v]],[/droid.+aft(\w)( bui|\))/i],[u,[p,x],[h,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[p,P],[h,v]],[/(bravia[\w ]+)( bui|\))/i],[u,[p,L],[h,v]],[/(mitv-\w{5}) bui/i],[u,[p,M],[h,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,W],[u,W],[h,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,v]],[/((pebble))app/i],[p,u,[h,y]],[/droid.+; (glass) \d/i],[u,[p,k],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,D],[h,y]],[/(quest( 2)?)/i],[u,[p,U],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[h,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[h,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,_]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[g,V,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[g,V,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,g],[/\(bb(10);/i],[g,[d,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,g],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,g]]},q=function(e,t){if(typeof e===c&&(t=e,e=s),!(this instanceof q))return new q(e,t).getResult();var n=e||(typeof r!==a&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n}(z,t):z;return this.getBrowser=function(){var e,t={};return t.name=s,t.version=s,H.call(t,n,i.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:s,t},this.getCPU=function(){var e={};return e.architecture=s,H.call(e,n,i.cpu),e},this.getDevice=function(){var e={};return e.vendor=s,e.model=s,e.type=s,H.call(e,n,i.device),e},this.getEngine=function(){var e={};return e.name=s,e.version=s,H.call(e,n,i.engine),e},this.getOS=function(){var e={};return e.name=s,e.version=s,H.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===l&&e.length>350?W(e,350):e,this},this.setUA(n),this};q.VERSION="1.0.32",q.BROWSER=G([d,g,"major"]),q.CPU=G([f]),q.DEVICE=G([u,p,h,m,_,v,b,y,w]),q.ENGINE=q.OS=G([d,g]),typeof t!==a?(e.exports&&(t=e.exports=q),t.UAParser=q):n.amdO?(i=function(){return q}.call(t,n,t,e))===s||(e.exports=i):typeof r!==a&&(r.UAParser=q);var K=typeof r!==a&&(r.jQuery||r.Zepto);if(K&&!K.ua){var J=new q;K.ua=J.getResult(),K.ua.get=function(){return J.getUA()},K.ua.set=function(e){J.setUA(e);var t=J.getResult();for(var n in t)K.ua[n]=t[n]}}}("object"==typeof self?self:this)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.amdO={},(()=>{var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}Object.create;Object.create;function i(e){return"function"==typeof e}var r=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}};function o(e){setTimeout((function(){throw e}),0)}var a={closed:!0,next:function(e){},error:function(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete:function(){}},c=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function l(e){return null!==e&&"object"==typeof e}var u=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),d=u,h=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,s=n._ctorUnsubscribe,o=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var u=0;u<r.length;++u){r[u].remove(this)}if(i(o)){s&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof d?p(e.errors):[e]}}if(c(a)){u=-1;for(var h=a.length;++u<h;){var g=a[u];if(l(g))try{g.unsubscribe()}catch(e){t=t||[],e instanceof d?t=t.concat(p(e.errors)):t.push(e)}}}if(t)throw new d(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var i=n;(n=new e)._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function p(e){return e.reduce((function(e,t){return e.concat(t instanceof d?t.errors:t)}),[])}var g=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),f=function(e){function n(t,i,r){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=a;break;case 1:if(!t){s.destination=a;break}if("object"==typeof t){t instanceof n?(s.syncErrorThrowable=t.syncErrorThrowable,s.destination=t,t.add(s)):(s.syncErrorThrowable=!0,s.destination=new m(s,t));break}default:s.syncErrorThrowable=!0,s.destination=new m(s,t,i,r)}return s}return t(n,e),n.prototype[g]=function(){return this},n.create=function(e,t,i){var r=new n(e,t,i);return r.syncErrorThrowable=!1,r},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},n}(h),m=function(e){function n(t,n,r,s){var o,c=e.call(this)||this;c._parentSubscriber=t;var l=c;return i(n)?o=n:n&&(o=n.next,r=n.error,s=n.complete,n!==a&&(i((l=Object.create(n)).unsubscribe)&&c.add(l.unsubscribe.bind(l)),l.unsubscribe=c.unsubscribe.bind(c))),c._context=l,c._next=o,c._error=r,c._complete=s,c}return t(n,e),n.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},n.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;o(e)}}},n.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw e;o(e)}},n.prototype.__tryOrSetError=function(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(o(t),!0)}return!1},n.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},n}(f);var _=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function b(e){return e}function v(e){return 0===e.length?b:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var y=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this.operator,r=function(e,t,n){if(e){if(e instanceof f)return e;if(e[g])return e[g]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(i?r.add(i.call(r,this.source)):r.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,i=t.destination,r=t.isStopped;if(n||r)return!1;e=i&&i instanceof f?i:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=w(t))((function(t,i){var r;r=n.subscribe((function(t){try{e(t)}catch(e){i(e),r&&r.unsubscribe()}}),i,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[_]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:v(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=w(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function w(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function x(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new E(e,t))}}var E=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new C(e,this.project,this.thisArg))},e}(),C=function(e){function n(t,n,i){var r=e.call(this,t)||this;return r.project=n,r.count=0,r.thisArg=i||r,r}return t(n,e),n.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},n}(f);function S(e,t,n,r){return i(n)&&(r=n,n=void 0),r?S(e,t,n).pipe(x((function(e){return c(e)?r.apply(void 0,e):r(e)}))):new y((function(i){T(e,t,(function(e){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(e)}),i,n)}))}function T(e,t,n,i,r){var s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var o=e;e.addEventListener(t,n,r),s=function(){return o.removeEventListener(t,n,r)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,n),s=function(){return a.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var c=e;e.addListener(t,n),s=function(){return c.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,u=e.length;l<u;l++)T(e[l],t,n,i,r)}i.add(s)}function k(e,t){return new Promise(((n,i)=>{setTimeout((()=>{void 0!==t?i(t):n()}),e)}))}function I(){let e,t;return{promise:new Promise(((n,i)=>{e=n,t=i})),resolve:e,reject:t}}function R(e){return new Promise(((t,n)=>{e.then(n,t)}))}class F extends Error{}function A(e){return new Promise(((t,n)=>setTimeout((()=>n(new F("Promise timed out."))),e)))}function O(e,t){return e.some((e=>e===t))?t:void 0}class N extends Error{constructor(e){super(`Matching not exhaustive: unexpected value ${JSON.stringify(e)}`)}}function P(e){throw new N(e)}function L(e){if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?void 0:t}return"number"==typeof e?e:void 0}function M(e,t){try{return e()}catch(e){return t(e)}}function D(){}function U(e){return null!=e}function G(e){let t,n=!1;return(...i)=>(n||(n=!0,t=e(...i)),t)}function B(e,t,n){const i=new Set;let r;return(...s)=>{const o=t(...s);return i.has(o)||(i.add(o),r=e(...s)),null==n||n(...s),r}}function j(e,t){let n,i,r=!0;function s(e,n){return r&&(r=!1,i=I(),setTimeout((()=>{try{i.resolve(t(...n))}catch(e){i.reject(e)}finally{r=!0}}),e)),i.promise}return(...t)=>{const i=n;return n=Date.now(),s(void 0===i||n-i>=e?0:e-(n-i),t)}}async function W(e,t,n){const i=n();if(!(e>0))return i;try{return await i}catch(i){return await k(t),W(e-1,t,n)}}var H;!function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}e.create=function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(H||(H={}));void 0!==self.requestIdleCallback&&self.requestIdleCallback;class V extends Error{constructor(e){super(`Assertion failed: ${e?"string"==typeof e?e:e():"(unnamed)"}`)}}function $(e,t){if(null==e)throw new V((()=>t?`Expected ${t} to be non-null`:"Expected non-null"));return e}var z,q,K,J,Y,X,Z,Q,ee;function te(e,t){return[].concat(...e.map(t))}function ne(e,t){return e.filter((e=>!!e)).join(t)}!function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};function n(e,n,i){return"retail"===i&&"safariIOSWebExtension"===n?"safariIOSExt-retail":"edge"===e?"chromiumEdgeExt":t[n]}e.getAppName=n,e.create=function(e,t,i,r){return{appName:$(n(e,t,i),"gnar app name"),url:`https://gnar.${r}`,ingestionUrl:`https://in.${r}/v1/events`,domain:`.${r}`,sendEmailInfoTracking:!0,sendFluidExperimentData:!1}}}(z||(z={})),function(e){const t={chromiumWebExtension:"extensionChrome",firefoxWebExtension:"extensionFirefox",safariAppExtension:"extensionSafari",safariWebExtension:"extensionSafariWeb",safariIOSWebExtension:"extensionSafariIOS"};e.create=function(e,n,i,r){let s;return s="retail"===i&&"safariIOSWebExtension"===n?"extensionSafariIOS-retail":"edge"===e?"extensionEdge":$(t[n],"felog app name"),{appName:s,sendUsageMetrics:!0,sendPerfMetricsType:"dev"===r?"local":"off"}}}(q||(q={})),function(e){const t={chromiumWebExtension:"extension_chrome",firefoxWebExtension:"extension_firefox",safariAppExtension:"extension_safari",safariWebExtension:"extension_safari_web",safariIOSWebExtension:"extension_safari_ios"},n={regular:"inline",retail:"retail_demo"};e.create=(e,i,r)=>({clientType:"edge"===e?"extension_chromium_edge":$(t[i],"capi client type"),clientSubType:$(n[r],"capi client subType")})}(K||(K={})),function(e){e.create=function(e){return{urls:{fetchMessages:`${e}/api/v1/messages`,acknowledgeMessage:`${e}/api/v1/messages/acknowledge`,dismissMessage:`${e}/api/v1/messages/dismiss`}}}}(J||(J={})),function(e){e.create=function(e){return{urls:{getInAppMessages:`${e}/api/inApp/getMessages`,track:`${e}/api/events/track`,trackInAppOpen:`${e}/api/events/trackInAppOpen`,trackInAppClose:`${e}/api/events/trackInAppClose`,trackInAppConsume:`${e}/api/events/inAppConsume`,trackInAppClick:`${e}/api/events/trackInAppClick`,userUpdate:`${e}/api/users/update`}}}}(Y||(Y={})),function(e){e.create=function(e){return{urls:{getIterableClientAccessToken:`${e}/token`}}}}(X||(X={})),function(e){const t={chromiumWebExtension:"chromeExt",firefoxWebExtension:"firefoxExt",safariAppExtension:"safariExt",safariWebExtension:"safariWebExt",safariIOSWebExtension:"safariIOSExt"};e.create=function(e,n){return{xClientType:"edge"===e?"chromiumEdgeExt":t[n]}}}(Z||(Z={})),function(e){let t;var n;n=t=e.GrStaticUrl||(e.GrStaticUrl={}),n.toGrStaticUrl=e=>"https://assets.extension.grammarly.com/"+e}(Q||(Q={})),function(e){e.create=function(t,n,i,r){const s="safari"===t?"disableAppsPromotion=true":"";function o(e){const t=`https://${e}.${n}`;return(e="",n="")=>{const i=ne([s,n],"&");return ne([t+e,i],"?")}}const a=o("www"),c=o("app"),l=o("account"),u=o("redirect"),d=e.GrStaticUrl.toGrStaticUrl,h=`https://data.${n}`,p=`https://auth.${n}/v3`,g=`https://auth.${n}/v4`,f=`https://capi.${n}/api/configuration/cheetah/v1/settings`,m=`https://goldengate.${n}/skills`,_=`https://capi.${n}`,b=`wss://capi.${n}/freews`;return{accountSubscription:l("/subscription"),accountSubscriptionAddBillingInfo:l("/admin/subscription","popup=add_billing_info"),adminAccountSubscription:l("/admin/subscription"),accountAdminSubscriptionAddBillingInfoToUngatedTrial:l("/admin/subscription","popup=ungated_trial"),app:c(),appPersonalDictionary:l("/customize"),featuresSettings:l("/customize/features"),capi:b,capiStatic:b,capiGDocs:`wss://capi.${n}/gdocs`,dapi:h,cheetahSettings:f,skills:m,editorDictionary:c("/profile/dictionary"),desktop:a("/desktop"),dictionary:`https://capi.${n}/api/defs`,docs:c("/docs"),docsApi:`https://dox.${n}/documents`,newDoc:c("/docs/new"),tokens:`${g}/api`,auth:p,userOrAnonymous:`${p}/user/oranonymous`,userOrAnonymousV4:`${g}/api/userinfo`,signin:a("/signin"),signup:a("/signup"),dialect:`${_}/api/configuration/language/v1/settings`,passport:`https://goldengate.${n}/passport/api/v1/passport`,fbSignin:a("/signin","fromExtensionFb=true"),fbSignup:a("/signup","fromExtensionFb=true"),googleSignin:a("/signin","fromExtensionGoogle=true"),googleSignup:a("/signup","fromExtensionGoogle=true"),resetPassword:a("/resetpassword"),newFelog:i,vmetrics:r,welcomeC:a("/extension-success"),afterInstall:a("/after_install_page/"),planComparison:a("/plans"),businessHomepage:a("/business"),businessPricing:a("/business/pricing"),businessStyleGuide:a("/business/styleguide"),businessBrandTones:a("/business/brand-tones"),uninstall:a("/extension-uninstall"),terms:a("/terms"),policy:a("/privacy-policy"),californiaPolicy:a("/privacy-policy#for-california-users"),extensionSuccess:a("/extension-success"),firefoxPrivatePolicy:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/privacy/",dynamicConfigUrl:"https://config.extension.grammarly.com/dynamicConfig.json",pageConfigUrl:"https://config.extension.grammarly.com/browserplugin/config.json",grammarlyDomain:n,grammarlyProtocol:"https:",redirect:u("/redirect"),snippetsApi:`https://goldengate.${n}/snippets/v1/snippets`,snippetsNew:l("/admin/snippets","action=create"),snippetsAdmin:l("/admin/snippets"),snippetsSettings:l("/customize/snippets"),knowledgeHubApi:`https://goldengate.${n}/knowledge-hub/v1/institution`,settingsRegistryApi:`https://goldengate.${n}/settings-registry/v1`,suggestionsSettings:l("/customize/suggestions"),allSettings:l(),styleGuideSettings:l("/admin/style-guide"),writingStyleSettings:l("/admin/style-guide-writing-style"),brandTones:l("/admin/brand-tones"),grammarlyIdeasSelf:c("/ideas/grow/self"),grammarlyIdeasPeer:c("/ideas/grow/peer"),grammarlyIdeasSales:c("/ideas/sales"),iOSApp:"grammarly://home",iOSUpgrade:"grammarly://premium-instructions?deepLinkSource=safari",standWithUkraine:a("/stand-with-ukraine"),standWithUkraineBlockedUserPing:"https://rwsgfy.grammarly.com/stand-with-ukraine",tourGdocs:a("/tour-gdocs"),dataSharing:`https://goldengate.${n}/privacy/v1/api/data-sharing`,specialOffer:`https://goldengate.${n}/vito`,assets:{assistantOnboardingTourGif:d("assets/assistant/assistant-onboarding-tour"),ownerActivationIPMHeader:d("assets/ipm/owner-activation-ipm-header"),graduationIpmSvg:d("assets/ipm/graduation-campaign-ipm"),writingProgressIpmGif:d("assets/ipm/writing-progress-ipm-header"),onboardingTour:{inlineSuggestionsPreviewImage:d("assets/onboarding/inline-suggestions-preview-image-v2.jpg"),inlineSuggestionsAnimation:d("assets/onboarding/inline-suggestions-v2.mp4"),clickToAcceptAnimation:d("assets/onboarding/click-to-accept-v2.mp4"),happyWritingAnimation:d("assets/onboarding/happy-writing-v2.mp4")},knowledgeShareOnboardingTour:{step1:d("assets/knowledgeShareOnboarding/ks-onboarding-step1.mp4"),step2:d("assets/knowledgeShareOnboarding/ks-onboarding-step2.mp4"),step3:d("assets/knowledgeShareOnboarding/ks-onboarding-step3.mp4")}},support:`https://support.${n}/hc/en-us/requests/new#/`,grammarlyEmployeesBugReportsUrl:"https://in-product.report.grammarly.io/v1/report"}}}(Q||(Q={})),function(e){const t="grammarly.com",n="qagr.io",i="ppgr.io";e.create=function(e,r,s,o){const a=(e,t,n,i,r)=>"prod"===o?e:"qa"===o?t:"dev-qa"===o?n:"dev-preprod"===o?i:"dev"===o?r:void P(o),c="https://127.0.0.1:8000",l=a("https://f-log-extension.grammarly.io",c,c,c,c),u=a("https://extension.femetrics.grammarly.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.qagr.io/batch/import","https://femetrics.ppgr.io/batch/import","https://femetrics.qagr.io/batch/import"),d=a(t,n,n,i,n),h=a(t,n,n,i,t),p=a("https://chipmunk.grammarly.com","https://chipmunk.qagr.io","https://chipmunk.qagr.io","https://chipmunk.ppgr.io","https://chipmunk.grammarly.com");return{url:Q.create(e,h,l,u),gnar:z.create(e,r,s,d),felog:q.create(e,r,s,o),capi:K.create(e,r,s),chipmunk:J.create("https://chipmunk.grammarly.com"),iterable:Y.create("https://api.iterable.com"),mise:X.create(p),auth:Z.create(e,r),extensionId:"87677a2c52b84ad3a151a4a72f5bd3c4"}}}(ee||(ee={}));const ie=M((()=>browser),(()=>self.browser)),re=M((()=>browser),(()=>self.browser));self.chrome=self.chrome;var se,oe,ae,ce,le,ue;!function(e){e.create=function(e,t,n,i,r,s,o,a){const c=void 0!==s&&void 0!==o?s:"UNVERSIONED",l=`${e}.${t}.${n}`,u=["prod"!==r?r:null,c!==i?c:null].filter((e=>!!e)).join(".");return{version:l,fullVersion:`${l}-${[i,u].filter((e=>""!==e)).join("/")}`,commitHash:o,gitBranch:s,manifestVersion:a}},e.getManifestVersion=function(e,t,n){switch(e){case"safariAppExtension":switch(t){case"bg":case"popup":return n.safari.extension.displayVersion;default:return}case"chromiumWebExtension":return n.chrome.runtime.getManifest().version;case"firefoxWebExtension":return ie.runtime.getManifest().version;case"safariWebExtension":case"safariIOSWebExtension":return re.runtime.getManifest().version;default:return P(e)}}}(se||(se={})),function(e){e.create=function(e){return O(["chrome","safari","firefox","edge"],e)},e.isValidTargetBrowser=function(e){return["chrome","safari","firefox","edge"].includes(e)}}(oe||(oe={})),function(e){e.create=function(e){return O(["dev","prod","qa","dev-qa","dev-preprod"],e)}}(ae||(ae={})),function(e){e.create=function(e){return O(["regular","retail"],e)}}(ce||(ce={})),function(e){e.create=function(e){return O(["chromiumWebExtension","firefoxWebExtension","safariAppExtension","safariWebExtension","safariIOSWebExtension"],e)}}(le||(le={})),function(e){e.create=function(e,t,n,i,r){return{browser:e,extensionType:t,deploymentType:n,env:i,context:r}}}(ue||(ue={}));var de=n(94100);const he=e=>e.split(".")[0],pe=(e=self.navigator.userAgent)=>{const t=new de.UAParser(e).getResult();return{browserName:t.browser.name||"unknown",browserVersion:t.browser.version?he(t.browser.version):void 0,osName:t.os.name||"unknown",osVersion:t.os.version?he(t.os.version):void 0,userAgent:e}};var ge,fe,me,_e,be;!function(e){e.create=function(e){const t=pe(e);return{name:t.browserName||"other",version:t.browserVersion,userAgent:e}}}(ge||(ge={})),function(e){e.create=function(e){const t=pe(e);return{name:t.osName,version:t.osVersion,isWindows:-1!==e.indexOf("Win"),isMac:-1!==e.indexOf("Mac"),isChromeOS:-1!==e.indexOf("CrOS")}}}(fe||(fe={})),function(e){e.create=function(e){return{browser:ge.create(e),os:fe.create(e)}}}(me||(me={})),function(e){function t(e,t,n,i,r,s,o){return{env:e,major_number:t,build_number:n,release_number:i,git_branch:r,git_commit:s,manifest_version:o}}e.create=t,e.fromBrowserify=function(){return t("prod","14","1209","0","UNVERSIONED","UNVERSIONED","3")}}(_e||(_e={})),function(e){e.getTargetEnv=function(e){if(!e.env)throw new Error("processEnv.env is null or undefined");const t=ae.create(e.env);if(!t)throw new Error(`Invalid processEnv.env: ${e.env}`);return t},e.create=function(e,t,n,i,r,s,o=self.navigator.userAgent){const a=[r.major_number,r.build_number,r.release_number].map(L);let c;if(3===a.length&&a.every((e=>void 0!==e)))c=a;else{let e;try{e=se.getManifestVersion(t,i,self)}catch(e){}const n=(e||"").split(".").map(L);c=3===n.length&&n.every((e=>void 0!==e))?n:[0,0,0]}const[l,u,d]=c;return{buildInfo:se.create(l,u,d,e,s,r.git_branch,r.git_commit,r.manifest_version),bundleInfo:ue.create(e,t,n,s,i),appConfig:ee.create(e,t,n,s),systemInfo:me.create(o)}}}(be||(be={}));const ve=new class{constructor(e){this._getFallbackValue=e}init(e){if(void 0!==this._value)throw new Error("Global value already initialized.");this._value=e}get(){if(void 0===this._value){if(void 0===this._getFallbackValue)throw new Error("Global value not initialized and no fallback value provided.");this._value=this._getFallbackValue()}return this._value}}((()=>{throw new Error("Global config not initialized")}));let ye=()=>ve.get();function we(){return ye()}function xe(){return we().appConfig.extensionId}function Ee(){return"chrome"===we().bundleInfo.browser}function Ce(){return"edge"===we().bundleInfo.browser}function Se(){return we().bundleInfo.browser}function Te(){return we().appConfig.url}function ke(){try{return self.parent!==self}catch(e){return!0}}const Ie=e=>e.replace(/^www\./,"");function Re(e){const t=e&&e.ownerDocument||document,n=t.location||t.defaultView.location;return n?Ie(n.hostname):""}function Fe(e){return"firefox"===we().bundleInfo.browser&&/^about:/.test(e)?e:""===e?"":Ie(new URL(e).hostname)}function Ae(e,t){var n,i,r;const s=null===(r=null===(i=null===(n=null==t?void 0:t.citationBuilder)||void 0===n?void 0:n.domains)||void 0===i?void 0:i[e])||void 0===r?void 0:r.disabled;return void 0!==s?!s:void 0}function Oe(e,t){return Me(t).some((t=>new RegExp(t.domain).test(e)))}function Ne(e){var t,n;return!(null!==(n=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==n&&n)}function Pe(e,t){return Me(t).some((t=>{const n=new RegExp(t.domain),i=new RegExp(t.pathname);return n.test(e.hostname)&&i.test(e.pathname)}))}function Le(e,t,n){const i=Ae(e,n);return Ne(t)&&(void 0===i&&Oe(e,t)||!0===i)}function Me(e){var t,n;return null!==(n=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==n?n:[]}G((()=>Fe(document.location.href)));G((e=>{const t=document.location.href;return{url:t,domain:Fe(t),isUrlAllowlisted:Pe(document.location,e)}})),G((()=>H.create()));class De{registerFieldIntegration(e,t,n,i,r){return{dispose(){}}}addTypingTarget(e){}dispose(e){}}function Ue(e,t){return function(n){return n.lift(new Ge(e,t))}}var Ge=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Be(e,this.predicate,this.thisArg))},e}(),Be=function(e){function n(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.thisArg=i,r.count=0,r}return t(n,e),n.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},n}(f),je=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return t(n,e),n.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},n.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},n.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},n.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,t){var n=!1,i=void 0;try{this.work(e)}catch(e){n=!0,i=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),i},n.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},n}(function(e){function n(t,n){return e.call(this)||this}return t(n,e),n.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},n}(h)),We=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),He=function(e){function n(t,i){void 0===i&&(i=We.now);var r=e.call(this,t,(function(){return n.delegate&&n.delegate!==r?n.delegate.now():i()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return t(n,e),n.prototype.schedule=function(t,i,r){return void 0===i&&(i=0),n.delegate&&n.delegate!==this?n.delegate.schedule(t,i,r):e.prototype.schedule.call(this,t,i,r)},n.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},n}(We),Ve=new He(je),$e=function(e){return function(t){for(var n=0,i=e.length;n<i&&!t.closed;n++)t.next(e[n]);t.complete()}};function ze(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var qe=ze(),Ke=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Je(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Ye=function(e){if(e&&"function"==typeof e[_])return i=e,function(e){var t=i[_]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ke(e))return $e(e);if(Je(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,o),e};if(e&&"function"==typeof e[qe])return t=e,function(e){for(var n=t[qe]();;){var i=void 0;try{i=n.next()}catch(t){return e.error(t),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,i,r=l(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Xe=function(e){function n(t){var n=e.call(this)||this;return n.parent=t,n}return t(n,e),n.prototype._next=function(e){this.parent.notifyNext(e)},n.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},n}(f),Ze=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.notifyNext=function(e){this.destination.next(e)},n.prototype.notifyError=function(e){this.destination.error(e)},n.prototype.notifyComplete=function(){this.destination.complete()},n}(f);function Qe(e,t){if(!t.closed)return e instanceof y?e.subscribe(t):Ye(e)(t)}var et={leading:!0,trailing:!1};function tt(e,t,n){return void 0===t&&(t=Ve),void 0===n&&(n=et),function(i){return i.lift(new nt(e,t,n.leading,n.trailing))}}var nt=function(){function e(e,t,n,i){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=i}return e.prototype.call=function(e,t){return t.subscribe(new it(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),it=function(e){function n(t,n,i,r,s){var o=e.call(this,t)||this;return o.duration=n,o.scheduler=i,o.leading=r,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return t(n,e),n.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(rt,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},n.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},n.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},n}(f);function rt(e){e.subscriber.clearThrottle()}function st(e){return e&&"function"==typeof e.schedule}var ot=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.notifyNext=function(e,t,n,i,r){this.destination.next(t)},n.prototype.notifyError=function(e,t){this.destination.error(e)},n.prototype.notifyComplete=function(e){this.destination.complete()},n}(f),at=function(e){function n(t,n,i){var r=e.call(this)||this;return r.parent=t,r.outerValue=n,r.outerIndex=i,r.index=0,r}return t(n,e),n.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},n.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},n}(f);function ct(e,t,n,i,r){if(void 0===r&&(r=new at(e,n,i)),!r.closed)return t instanceof y?t.subscribe(r):Ye(t)(r)}function lt(e,t){return new y((function(n){var i=new h,r=0;return i.add(t.schedule((function(){r!==e.length?(n.next(e[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}))}function ut(e,t){return t?lt(e,t):new y($e(e))}var dt={};function ht(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,i=void 0;return st(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),ut(e,i).lift(new pt(n))}var pt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new gt(e,this.resultSelector))},e}(),gt=function(e){function n(t,n){var i=e.call(this,t)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return t(n,e),n.prototype._next=function(e){this.values.push(dt),this.observables.push(e)},n.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var i=e[n];this.add(ct(this,i,void 0,n))}}},n.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},n.prototype.notifyNext=function(e,t,n){var i=this.values,r=i[n],s=this.toRespond?r===dt?--this.toRespond:this.toRespond:0;i[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},n.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},n}(ot);function ft(e,t){return function(n){return n.lift(new mt(e,t))}}var mt=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new _t(e,this.compare,this.keySelector))},e}(),_t=function(e){function n(t,n,i){var r=e.call(this,t)||this;return r.keySelector=i,r.hasKey=!1,"function"==typeof n&&(r.compare=n),r}return t(n,e),n.prototype.compare=function(e,t){return e===t},n.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var i=!1;if(this.hasKey)try{i=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))},n}(f),bt=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),vt=function(e){function n(t,n){var i=e.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return t(n,e),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},n}(h),yt=function(e){function n(t){var n=e.call(this,t)||this;return n.destination=t,n}return t(n,e),n}(f),wt=function(e){function n(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return t(n,e),n.prototype[g]=function(){return new yt(this)},n.prototype.lift=function(e){var t=new xt(this,this);return t.operator=e,t},n.prototype.next=function(e){if(this.closed)throw new bt;if(!this.isStopped)for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].next(e)},n.prototype.error=function(e){if(this.closed)throw new bt;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),r=0;r<n;r++)i[r].error(e);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new bt;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),i=0;i<t;i++)n[i].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(t){if(this.closed)throw new bt;return e.prototype._trySubscribe.call(this,t)},n.prototype._subscribe=function(e){if(this.closed)throw new bt;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new vt(this,e))},n.prototype.asObservable=function(){var e=new y;return e.source=this,e},n.create=function(e,t){return new xt(e,t)},n}(y),xt=function(e){function n(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return t(n,e),n.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},n.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},n.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},n.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):h.EMPTY},n}(wt),Et=function(e){function n(t){var n=e.call(this)||this;return n._value=t,n}return t(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),n.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},n.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new bt;return this._value},n.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},n}(wt);function Ct(){}var St=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Tt(e,this.nextOrObserver,this.error,this.complete))},e}(),Tt=function(e){function n(t,n,r,s){var o=e.call(this,t)||this;return o._tapNext=Ct,o._tapError=Ct,o._tapComplete=Ct,o._tapError=r||Ct,o._tapComplete=s||Ct,i(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Ct,o._tapError=n.error||Ct,o._tapComplete=n.complete||Ct),o}return t(n,e),n.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},n.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},n.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},n}(f);function kt(){return function(e){return e.lift(new It(e))}}var It=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var i=new Rt(e,n),r=t.subscribe(i);return i.closed||(i.connection=n.connect()),r},e}(),Rt=function(e){function n(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return t(n,e),n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,i=e._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}else this.connection=null},n}(f),Ft=function(e){function n(t,n){var i=e.call(this)||this;return i.source=t,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return t(n,e),n.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},n.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},n.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new Ot(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e},n.prototype.refCount=function(){return kt()(this)},n}(y),At=function(){var e=Ft.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),Ot=function(e){function n(t,n){var i=e.call(this,t)||this;return i.connectable=n,i}return t(n,e),n.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},n.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},n.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},n}(yt);var Nt=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,i=this.subjectFactory(),r=n(i).subscribe(e);return r.add(t.subscribe(i)),r},e}();function Pt(){return new wt}function Lt(){return function(e){return kt()((t=Pt,function(e){var i;if(i="function"==typeof t?t:function(){return t},"function"==typeof n)return e.lift(new Nt(i,n));var r=Object.create(e,At);return r.source=e,r.subjectFactory=i,r})(e));var t,n}}function Mt(e,t){return function(n,i){return t(n(e(i)),i)}}function Dt(e,t){return{get:e,set:t,modify:Mt(e,t),compose:n=>Dt((t=>n.get(e(t))),((i,r)=>t(n.set(i,e(r)),r)))}}function Ut(...e){if(0===e.length)throw new TypeError("Can not compose zero lenses. You probably want `Lens.identity`.");if(1===e.length)return e[0];{let t=e[0];return e.slice(1).forEach((e=>{t=t.compose(e)})),t}}Dt((e=>e),((e,t)=>e));(function e(t,n){return{get:t,set:n,modify:Mt(t,n),compose:i=>e((e=>{const n=t(e);return void 0!==n?i.get(n):void 0}),((e,r)=>{const s=t(r);return void 0!==s?n(i.set(e,s),r):r}))}})((e=>{}),((e,t)=>t));function Gt(e){const t=[];let n;for(;!(n=e.next()).done;)t.push(n.value);return t}function Bt(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function jt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}const Wt=function(){const e=Object.prototype.toString;return"[object Arguments]"===e.call(arguments)?function(t){return"[object Arguments]"===e.call(t)}:function(e){return Bt("callee",e)}}(),Ht=function(){const e=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),i=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1};return"function"!=typeof Object.keys||n?function(r){if(Object(r)!==r)return[];let s,o;const a=[],c=n&&Wt(r);for(s in r)!Bt(s,r)||c&&"length"===s||(a[a.length]=s);if(e)for(o=t.length-1;o>=0;)s=t[o],Bt(s,r)&&!i(a,s)&&(a[a.length]=s),o-=1;return a}:function(e){return Object(e)!==e?[]:Object.keys(e)}}();function Vt(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}function $t(e,t,n=[],i=[]){if(jt(e,t))return!0;if(Vt(e)!==Vt(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(Vt(e)){case"Arguments":case"Array":case"Object":if(null!=(r=e)&&"function"==typeof r.then)return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!jt(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!jt(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1;break;case"Map":case"Set":if(!$t(Gt(e.entries()),Gt(t.entries()),n,i))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var r;const s=Ht(e);if(s.length!==Ht(t).length)return!1;let o=n.length-1;for(;o>=0;){if(n[o]===e)return i[o]===t;o-=1}for(n.push(e),i.push(t),o=s.length-1;o>=0;){const r=s[o];if(!Bt(r,t)||!$t(t[r],e[r],n,i))return!1;o-=1}return n.pop(),i.pop(),!0}const zt=void 0!==n(44675)&&!1;function qt(e,t,n){if(e in n&&$t(t,n[e]))return n;{const i={};for(const e in n)i[e]=n[e];return i[e]=t,i}}const Kt=new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"return\\s","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));new RegExp(["^","function","\\(","[^), ]+","\\)","\\{",'("use strict";)?',"(\\$_\\$wf\\(\\d+\\);)?","return\\s","(\\$_\\$w\\(\\d+, \\d+\\),\\s)?","[^\\.]+\\.(\\S+?);?","\\}","$"].join("\\s*"));function Jt(e){return function(e){const t=Kt,n=e.match(t);if(n&&n[2])return n[2].split(".");throw new TypeError(`Expected a property expression, got "${e}".\n\n      A property expression should be a referentially transparent (no side-effects),\n      single-expression "getter" function.\n\n      Correct example: "function (x) { return x.some }" or "x => x.some".\n      Incorrect example: "function (x) { var y = x.some; return y }" or "({some}) => some"`)}(e.toString())}function Yt(e){return void 0===e?e=>Dt((t=>t[e]),((t,n)=>qt(e,t,n))):Dt((t=>t[e]),((t,n)=>qt(e,t,n)))}let Xt=0;function Zt(e){if(Xt<10){Xt++;const t=`x.${e.join(".")}`,n=`'${e.join("', '")}'`;!function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("[Focal]: "+e);try{throw new Error(e)}catch(e){}}(`The property expression overload of Atom.lens and Lens.prop are deprecated and will be removed in next versions of Focal. Please use the key name overload for Atom.lens and Lens.key instead. You can convert your code by changing the calls:\n  a.lens(x => ${t}) to a.lens(${n}),\n  Lens.prop((x: T) => ${t}) to Lens.key<T>()(${n}).`)}}class Qt extends Et{view(...e){return void 0!==e[0]?"function"==typeof e[0]?new rn(this,e[0]):"string"==typeof e[0]?new rn(this,Ut(...e.map(Yt())).get):new rn(this,(t=>e[0].get(t))):this}}class en extends Qt{set(e){this.modify((()=>e))}lens(e,...t){return new nn(this,"function"==typeof e?function(e){const t=Jt(e);return zt&&Zt(t),Ut(...t.map(Yt()))}(e):"string"==typeof e?Ut(Yt(e),...t.map((e=>Yt(e)))):e,$t)}}class tn extends en{constructor(e){super(e)}get(){return this.getValue()}modify(e){const t=this.getValue(),n=e(t);$t(t,n)||this.next(n)}set(e){$t(this.getValue(),e)||this.next(e)}}class nn extends en{_source;_lens;_eq;constructor(e,t,n=$t){super(void 0),this._source=e,this._lens=t,this._eq=n}get(){return this._subscription?this.getValue():this._lens.get(this._source.get())}modify(e){this._source.modify((t=>this._lens.modify(e,t)))}set(e){this._source.modify((t=>this._lens.set(e,t)))}_onSourceValue(e){const t=this.getValue(),n=this._lens.get(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new h((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class rn extends Qt{_source;_getter;_eq;constructor(e,t,n=$t){super(void 0),this._source=e,this._getter=t,this._eq=n}get(){return this._subscription?this.getValue():this._getter(this._source.get())}_onSourceValue(e){const t=this.getValue(),n=this._getter(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=this._source.subscribe((e=>this._onSourceValue(e)))),this._refCount++;const t=new h((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}class sn extends Qt{_sources;_combineFn;_eq;constructor(e,t,n=$t){super(void 0),this._sources=e,this._combineFn=t,this._eq=n}get(){return this._subscription?this.getValue():this._combineFn(this._sources.map((e=>e.get())))}_onSourceValues(e){const t=this.getValue(),n=this._combineFn(e);this._eq(t,n)||this.next(n)}_subscription=null;_refCount=0;subscribe(...e){this._subscription||(this._subscription=ht(this._sources).subscribe((e=>this._onSourceValues(e)))),this._refCount++;const t=new h((()=>{--this._refCount<=0&&this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}));return t.add(super.subscribe(...e)),t}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._refCount=0,super.unsubscribe()}}var on,an;function cn(e,t){var n,i;const r=Ie(new URL(e).hostname),s=null===(n=null==t?void 0:t.domainAliasRules)||void 0===n?void 0:n.find((t=>new RegExp(t.pattern).test(e)));return{originalDomain:r,domainAlias:null!==(i=null==s?void 0:s.alias)&&void 0!==i?i:r}}!function(e){e.create=function(e){return new tn(e)},e.log=function(e,t){const n=(e,t,n)=>console.log("%c"+e,`color: ${t}; font-weight: bold`,n);let i=e.get();return e.subscribe((e=>{"function"==typeof t?t(i,e):(console.group(`UPDATE ${t?`TYPE: ${t} `:""}@ ${(new Date).toTimeString()}`),n("prev state","#9E9E9E",i),n("next state","#4CAF50",e),console.groupEnd()),i=e})),e},e.combine=function(...e){return new sn(e.slice(void 0,-1),(t=>e[e.length-1](...t)))},e.fromObservable=function(t){const n=new Et(null),i=t.pipe((r=t=>{const i=n.value;null===i?n.next(e.create(t)):i.set(t)},function(e){return e.lift(new St(r,s,o))}),Lt());var r,s,o;return new y((e=>{const t=new h;return t.add(n.pipe(Ue((e=>!!e))).subscribe(e)),t.add(i.subscribe(void 0,(t=>e.error(t)),(()=>e.complete()))),t}))}}(on||(on={})),function(e){e.idle="idle",e.inProgress="inProgress"}(an||(an={}));class ln{constructor(e){if(this._capacity=e,this._start=0,this._end=0,this._isFull=!1,e<0)throw new Error(`Invalid capacity ${e}`);this._buffer=new Array(e),0===e&&(this._isFull=!0)}get size(){return this._isFull?this._buffer.length:(this._end-this._start+this._buffer.length)%this._buffer.length}get capacity(){return this._capacity}get isEmpty(){return 0===this.size}get isFull(){return this._isFull}get head(){return this.isEmpty?null:this._buffer[this._start]}get tail(){return this.isEmpty?null:this._buffer[0===this._end?this.capacity-1:this._end-1]}enqueue(e){if(0===this.capacity)return null;let t=null;return this.isFull&&(t=this._buffer[this._start],this._startInc()),this._buffer[this._end]=e,this._endInc(),this._start===this._end&&(this._isFull=!0),t}dequeue(){if(this.isEmpty)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this._startInc(),this._isFull=!1,e}delete(e){const t=this._buffer.indexOf(e);if(t>=0){if(t<this._end){for(let e=t;e<this._end-1;e++)this._buffer[e]=this._buffer[e+1];this._buffer[--this._end]=null}else{for(let e=this._start;e<t;e++)this._buffer[e+1]=this._buffer[e];this._buffer[this._start]=null,this._startInc()}return this._isFull=!1,!0}return!1}_startInc(){this._start++,this._start===this.capacity&&(this._start=0)}_endInc(){this._end++,this._end===this.capacity&&(this._end=0)}clear(){this._buffer=new Array(this.capacity),this._start=this._end=0,this.capacity>0&&(this._isFull=!1)}toArray(){let e;return e=this.isEmpty?[]:this._start<this._end?this._buffer.slice(this._start,this._end):this._buffer.slice(this._start,this.capacity).concat(this._buffer.slice(0,this._end)),e}resize(e){if(e===this.capacity)return;if(e<0)throw new Error(`Invalid newCapacity ${e}`);let t=this.toArray();e>=this.size?(t.length=e,this._end=this.size,this._isFull=!1):(t=e?t.slice(-e):[],this._end=e,this._isFull=!0),this._buffer=t,this._start=0,this._capacity=e}}const un=e=>e===Object(e)&&!Array.isArray(e);var dn,hn;!function(e){function t(e){return{message:e.message,stack:e.stack}}e.normalizeException=t,e.isCircularObject=function(e){try{return!("string"==typeof JSON.stringify(e))}catch(e){return e.message.includes("Converting circular structure to JSON")}},e.normalizeData=function e(n,i=new WeakSet){try{return self.HTMLElement&&n instanceof self.HTMLElement?{type:(r=n).nodeName,html:r.outerHTML,attributes:Array.from(r.attributes).reduce(((e,t)=>({...e,[t.nodeName]:t.nodeValue})),{})}:n instanceof Error?t(n):Array.isArray(n)?n.map((t=>e(t,i))):"function"==typeof n?`${n.name}()`:un(n)?i.has(n)?"circular data!":(i.add(n),Object.keys(n).reduce(((t,r)=>({...t,[r]:e(n[r],i)})),{})):n}catch(e){return Cn.create("HistoryLogNormalizer").error("cannot normalize data",e,n),t(new Error("Data normalization fail!"))}var r}}(dn||(dn={})),function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(hn||(hn={}));const pn={[hn.TRACE]:1,[hn.DEBUG]:2,[hn.INFO]:3,[hn.WARN]:4,[hn.ERROR]:5,[hn.FATAL]:6};function gn(e){return pn[e]||0}const fn=Object.freeze({"gdocs.injected":{limit:30},"gdocs.textMap.error":{limit:20}}),mn=["CRITICAL","HIGH","MEDIUM","LOW"],_n={[hn.FATAL]:"CRITICAL",[hn.ERROR]:"CRITICAL",[hn.WARN]:"HIGH",[hn.INFO]:"MEDIUM",[hn.DEBUG]:"LOW",[hn.TRACE]:"LOW"},bn={CRITICAL:{limit:100,advancedLoggingLimit:500},HIGH:{limit:100,advancedLoggingLimit:500},MEDIUM:{limit:200,advancedLoggingLimit:1e3},LOW:{limit:0,advancedLoggingLimit:1e3}};class vn{constructor(e){var t;this.historyArgs=e,this.customBuffers={},this.defaultBuffers=Object.fromEntries(mn.map((e=>[e,new ln(bn[e].limit)]))),null===(t=e.enableAdvancedInProd)||void 0===t||t.subscribe((()=>{this.resizeDefaultBuffers()})),e.isBG&&this.restoreDefaultBufferLogsFromStorage(),this.initializeDebugCommands()}isHistoryEnabled(){var e;return!!(null===(e=this.historyArgs.enableInProd)||void 0===e?void 0:e.get())}isAdvancedHistoryEnabled(){var e,t;return!!(null===(e=this.historyArgs.enableInProd)||void 0===e?void 0:e.get())&&!!(null===(t=this.historyArgs.enableAdvancedInProd)||void 0===t?void 0:t.get())}getBufferCapacity(e){var t;return this.isAdvancedHistoryEnabled()&&null!==(t=e.advancedLoggingLimit)&&void 0!==t?t:e.limit}getDefaultBuffer(e){return this.defaultBuffers[_n[e]]}getCustomBuffer(e){return this.customBuffers[e]||(this.customBuffers[e]=new ln(this.getBufferCapacity(fn[e]))),this.customBuffers[e]}resizeDefaultBuffers(){for(const[e,t]of Object.entries(this.defaultBuffers)){const n=this.getBufferCapacity(bn[e]);t.resize(n)}}backupDefaultBufferLogsToStorage(){var e;null===(e=this.historyArgs.backupStorage)||void 0===e||e.set((e=>{let t=0;const n=[];for(const i of mn){const r=this.defaultBuffers[i];if(n.push(r.toArray()),t+=r.size,t>=e)break}return n.reverse().flat()}))}async restoreDefaultBufferLogsFromStorage(){var e;const t=await(null===(e=this.historyArgs.backupStorage)||void 0===e?void 0:e.get());if(!t)return;const n=Object.fromEntries(Object.entries(this.defaultBuffers).map((([e,t])=>[e,t.toArray()])));for(const e of Object.values(this.defaultBuffers))e.clear();for(const e of t)this.getDefaultBuffer(e.level).enqueue(e);for(const[e,t]of Object.entries(n)){const n=this.defaultBuffers[e];for(const e of t)n.enqueue(e)}this.backupDefaultBufferLogsToStorage()}pushLog(e,t){if(!this.isHistoryEnabled())return;(t?this.getCustomBuffer(t):this.getDefaultBuffer(e.level)).enqueue(e),t||this.backupDefaultBufferLogsToStorage()}getLogs(){const e=(e,t)=>({...e,data:dn.normalizeData(e.data),loggerName:t?e.loggerName:`common.${e.loggerName}`,exception:e.exception&&dn.normalizeException(e.exception)}),t=Object.values(this.defaultBuffers).map((t=>t.toArray().map((t=>e(t))))),n=Object.entries(this.customBuffers).map((([t,n])=>n.toArray().map((n=>e(n,t)))));return t.concat(n).flat()}initializeDebugCommands(){}}class yn{constructor(e){this.name=e,this._isError=e=>{const t=e;return t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}}trace(e,t,n){this._logMessage(hn.TRACE,e,t,n)}debug(e,t,n){this._logMessage(hn.DEBUG,e,t,n)}info(e,t,n){this._logMessage(hn.INFO,e,t,n)}warn(e,t,n){this._logMessage(hn.WARN,e,t,n)}error(e,t,n){this._logMessage(hn.ERROR,e,t,n)}fatal(e,t,n){this._logMessage(hn.FATAL,e,t,n)}_logMessage(e,t,n,i){const r={level:e,loggerName:this.name,message:t,timestamp:Date.now()};n&&(this._isError(n)?r.exception=n:r.data=n),r.data=r.data||i,this.handleEvent(r)}}class wn{constructor(e,t){this.name=e,this._createLogger=t}trace(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.trace(e,t,n)}debug(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.debug(e,t,n)}info(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.info(e,t,n)}warn(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.warn(e,t,n)}error(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.error(e,t,n)}fatal(e,t,n){void 0===this._logger&&(this._logger=this._createLogger(this.name)),this._logger.fatal(e,t,n)}}class xn extends yn{constructor(e,t,n,i){super(e),this._config=t,this._historyLogsService=n,this._loggerSettings=i}handleEvent(e){var t,n,i;this._config.filterFn(e)&&!(null===(t=this._loggerSettings)||void 0===t?void 0:t.skipWriteToConsole)&&this._config.writer.write(e),(null===(n=this._loggerSettings)||void 0===n?void 0:n.skipPushToHistory)||this._historyLogsService.pushLog(e,null===(i=this._loggerSettings)||void 0===i?void 0:i.customLogBufferKey)}}var En,Cn;!function(e){e.LEVEL={[hn.TRACE]:"color: white; background: orange;",[hn.DEBUG]:"color: black; background: #ffdc00;",[hn.INFO]:"color: black; background: #abdcfb",[hn.WARN]:"color: white; background: darkorange;",[hn.ERROR]:"color: white; background: red;",[hn.FATAL]:"color: white; background: darkred;"},e.GRAMMARLY="color: black; background: #bada55;";const t=new Map;function n(e,t){return e+Math.floor(Math.random()*(t-e+1))}function i(e){return`color: ${e.isDark?"white":"black"}; background: rgb(${e.red}, ${e.green}, ${e.blue})`}e.getLoggerName=function(e){const r=t.get(e);if(r)return i(r);const s=n(0,255),o=n(0,255),a=n(0,255),c={red:s,green:o,blue:a,isDark:Math.sqrt(s*s*.299+o*o*.587+a*a*.114)<127.5};return t.set(e,c),i(c)},e.RESET_DEFAULT="color: reset;",e.RESET_DEBUG=`color: ${self.matchMedia&&self.matchMedia("(prefers-color-scheme: dark)").matches?"white":"black"};`,e.getReset=function(t){return t!==hn.TRACE&&t!==hn.DEBUG?e.RESET_DEFAULT:t===hn.TRACE||t===hn.DEBUG?e.RESET_DEBUG:e.RESET_DEFAULT},e.outputLog=function(e){return[`grm ${e.level} [${e.loggerName}] ░░ ${e.message}`]}}(En||(En={}));class Sn{constructor(){this._writeFunc=Sn._commonWriteFunc}shouldWriteLog(e){const t=gn(e);return!!(t&&1<=t)}write(e){try{const t=En.outputLog(e);e.data&&t.push(e.data),e.exception&&t.push(e.exception),this.shouldWriteLog(e.level)&&this._writeFunc[e.level].apply(null,t)}catch(e){}}}Sn._commonWriteFunc=function(){const{debug:e,info:t,warn:n,error:i}=(r=console,new Proxy({},{get(e,t){const n=r[t];return n&&"function"==typeof n?n.bind(r):void 0}}));var r;return{[hn.TRACE]:e,[hn.DEBUG]:e,[hn.INFO]:t,[hn.WARN]:n,[hn.ERROR]:i,[hn.FATAL]:i}}();class Tn{static getInstance(){if(void 0===this._instanceShared)throw new Error("shared Env not inited yet");return this._instanceShared}static initShared(e){if(void 0!==this._instanceShared)throw new Error("shared Env already inited");this._instanceShared=e}constructor(e,t=on.create(!1),n=on.create(!1)){this._enableHistoryLoggerInProd=t,this._enableAdvancedHistoryLoggerInProd=n,this.enableHistoryLoggerInProd=(e=!0)=>{e&&!this._enableHistoryLoggerInProd.get()?(console.warn("Debug reports have been enabled"),this._enableHistoryLoggerInProd.set(!0)):!e&&this._enableHistoryLoggerInProd.get()&&(console.warn("Debug reports have been disabled"),this._enableHistoryLoggerInProd.set(!1))},this.enableAdvancedHistoryLoggerInProd=(e=!0)=>{e&&!this._enableAdvancedHistoryLoggerInProd.get()?(console.warn("Advanced logging has been enabled"),this._enableAdvancedHistoryLoggerInProd.set(!0)):!e&&this._enableAdvancedHistoryLoggerInProd.get()&&(console.warn("Advanced logging has been disabled"),this._enableAdvancedHistoryLoggerInProd.set(!1))};const i=e.testArgs,r=i&&i.processEnv?i.processEnv:_e.fromBrowserify(),s=be.getTargetEnv(r);this._initLogger(e,s);const o=function(e,t,n,i,r,s){const o=be.create(e,t,n,i,r,s);return ve.init(o),o}(e.browser,e.extensionType,e.deploymentType,e.context,r,s);this.context=e.context,this.config=o}_initLogger(e,t){const n={...e.historyLoggerExtraArgs,enableInProd:this._enableHistoryLoggerInProd,enableAdvancedInProd:this._enableAdvancedHistoryLoggerInProd};this.historyLogsService=new vn(n);const i="prod"!==t||"cs"!==e.context,r={create:(e,t)=>{return new xn(e,{writer:new Sn,filterFn:i?e=>!0:(n=hn.ERROR,e=>gn(e.level)>=gn(n))},this.historyLogsService,t);var n}};this.logger=r}}function kn(){return Tn.getInstance()}!function(e){e.create=function(e,t){return new wn(e,(()=>kn().logger.create(e,t)))}}(Cn||(Cn={}));const In=1e3;function Rn(e){return e*In}const Fn=In,An=new Set(["INPUT","BODY"]),On=new Set(["integrated","integrated_via_connector"]);var Nn=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new Pn(e,this.accumulator,this.seed,this.hasSeed))},e}(),Pn=function(e){function n(t,n,i,r){var s=e.call(this,t)||this;return s.accumulator=n,s._seed=i,s.hasSeed=r,s.index=0,s}return t(n,e),Object.defineProperty(n.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),n.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},n.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},n}(f);function Ln(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[_]}(e))return function(e,t){return new y((function(n){var i=new h;return i.add(t.schedule((function(){var r=e[_]();i.add(r.subscribe({next:function(e){i.add(t.schedule((function(){return n.next(e)})))},error:function(e){i.add(t.schedule((function(){return n.error(e)})))},complete:function(){i.add(t.schedule((function(){return n.complete()})))}}))}))),i}))}(e,t);if(Je(e))return function(e,t){return new y((function(n){var i=new h;return i.add(t.schedule((function(){return e.then((function(e){i.add(t.schedule((function(){n.next(e),i.add(t.schedule((function(){return n.complete()})))})))}),(function(e){i.add(t.schedule((function(){return n.error(e)})))}))}))),i}))}(e,t);if(Ke(e))return lt(e,t);if(function(e){return e&&"function"==typeof e[qe]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new y((function(n){var i,r=new h;return r.add((function(){i&&"function"==typeof i.return&&i.return()})),r.add(t.schedule((function(){i=e[qe](),r.add(t.schedule((function(){if(!n.closed){var e,t;try{var r=i.next();e=r.value,t=r.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),r}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Mn(e,t){return t?Ln(e,t):e instanceof y?e:new y(Ye(e))}function Dn(e,t){return"function"==typeof t?function(n){return n.pipe(Dn((function(n,i){return Mn(e(n,i)).pipe(x((function(e,r){return t(n,e,i,r)})))})))}:function(t){return t.lift(new Un(e))}}var Un=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Gn(e,this.project))},e}(),Gn=function(e){function n(t,n){var i=e.call(this,t)||this;return i.project=n,i.index=0,i}return t(n,e),n.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t)},n.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new Xe(this),i=this.destination;i.add(n),this.innerSubscription=Qe(e,n),this.innerSubscription!==n&&i.add(this.innerSubscription)},n.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},n.prototype._unsubscribe=function(){this.innerSubscription=void 0},n.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},n.prototype.notifyNext=function(e){this.destination.next(e)},n}(Ze);function Bn(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(i){return i.pipe(Bn((function(n,i){return Mn(e(n,i)).pipe(x((function(e,r){return t(n,e,i,r)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new jn(e,n))})}var jn=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Wn(e,this.project,this.concurrent))},e}(),Wn=function(e){function n(t,n,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var r=e.call(this,t)||this;return r.project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return t(n,e),n.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},n.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},n.prototype._innerSub=function(e){var t=new Xe(this),n=this.destination;n.add(t);var i=Qe(e,t);i!==t&&n.add(i)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(e){this.destination.next(e)},n.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(Ze);function Hn(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Bn(b,e)}function Vn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,i=null,r=e[e.length-1];return st(r)?(i=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof r&&(n=e.pop()),null===i&&1===e.length&&e[0]instanceof y?e[0]:Hn(n)(ut(e,i))}function $n(e){return!c(e)&&e-parseFloat(e)+1>=0}function zn(e,t){return void 0===e&&(e=0),void 0===t&&(t=Ve),(!$n(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=Ve),new y((function(n){return n.add(t.schedule(qn,e,{subscriber:n,counter:0,period:e})),n}))}function qn(e){var t=e.subscriber,n=e.counter,i=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:i},i)}function Kn(e){var t=e.index,n=e.period,i=e.subscriber;if(i.next(t),!i.closed){if(-1===n)return i.complete();e.index=t+1,this.schedule(e,n)}}var Jn=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new Yn(e,this.predicate,this.inclusive))},e}(),Yn=function(e){function n(t,n,i){var r=e.call(this,t)||this;return r.predicate=n,r.inclusive=i,r.index=0,r}return t(n,e),n.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},n.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},n}(f),Xn=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Zn=new y((function(e){return e.complete()}));function Qn(e){return e?function(e){return new y((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Zn}var ei=function(){function e(e){if(this.total=e,this.total<0)throw new Xn}return e.prototype.call=function(e,t){return t.subscribe(new ti(e,this.total))},e}(),ti=function(e){function n(t,n){var i=e.call(this,t)||this;return i.total=n,i.ring=new Array,i.count=0,i}return t(n,e),n.prototype._next=function(e){var t=this.ring,n=this.total,i=this.count++;t.length<n?t.push(e):t[i%n]=e},n.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,i=this.ring,r=0;r<n;r++){var s=t++%n;e.next(i[s])}e.complete()},n}(f);function ni(e){return function(t){return t.lift(new ii(e))}}var ii=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new ri(e,this.value))},e}(),ri=function(e){function n(t,n){var i=e.call(this,t)||this;return i.value=n,i}return t(n,e),n.prototype._next=function(e){this.destination.next(this.value)},n}(f);function si(e,t,n){var i,r="number"==typeof e?e:null===(i=e)||void 0===i?void 0:i.getTime();return null!=r&&r>=2147483647?new y((function(e){var i,s,o,a=Date.now(),c=zn(1e3,n).pipe((s=function(){return Date.now()-a<r},void 0===o&&(o=!1),function(e){return e.lift(new Jn(s,o))}),(i=1,function(e){return 0===i?Qn():e.lift(new ei(i))}),null==t?ni(0):Dn((function(){return zn(t,n)}))).subscribe(e);return function(){return c.unsubscribe()}})):function(e,t,n){void 0===e&&(e=0);var i=-1;return $n(t)?i=Number(t)<1?1:Number(t):st(t)&&(n=t),st(n)||(n=Ve),new y((function(t){var r=$n(e)?e:+e-n.now();return n.schedule(Kn,r,{index:0,period:i,subscriber:t})}))}(e,t,n)}function oi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return st(n)?(e.pop(),lt(e,n)):ut(e)}function ai(){return Hn(1)}function ci(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ai()(oi.apply(void 0,e))}function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return st(n)?(e.pop(),function(t){return ci(e,t,n)}):function(t){return ci(e,t)}}var ui,di=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new hi(e))},e}(),hi=function(e){function n(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return t(n,e),n.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},n}(f);function pi(e,t){return n=>n.pipe(ft(e),(function(e){return e.lift(new di)}),Ue((([e,n])=>t(e,n))))}function gi(e){return e.pipe((t="keypress",n={capture:!0},e=>e.pipe(Dn((e=>Vn(...e.map((e=>S(e,t,n)))))))),function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new Nn(e,t,n))}}((e=>e+1),0),function(e,t,n){return i=>i.pipe(Dn((i=>si(e).pipe(x((()=>n(i))),li(t(i))))))}(Fn,(e=>({event:ui.startTyping,timestamp:Date.now(),textLength:e})),(e=>({event:ui.endTyping,timestamp:Date.now()-Fn,textLength:e}))),pi(((e,t)=>e.event===t.event),((e,t)=>e.event===ui.startTyping&&t.event===ui.endTyping)),x((([e,t])=>({duration:t.timestamp-e.timestamp,textLength:t.textLength-e.textLength+1}))),Ue((({duration:e})=>e>0)));var t,n}!function(e){e.startTyping="startTyping",e.endTyping="endTyping"}(ui||(ui={}));const fi=()=>({ORGANIZATION_CONTROLS:{title:"Browser extension unavailable",message:"Your organization has turned off the Grammarly browser extension."},SERVER_UNAVAILABLE:{title:"Grammarly is temporarily unavailable",message:`There is an issue connecting to your organization’s security settings. Please try again later\n                or <a href="${Te().support}">contact support</a> if the issue persists.`}});var mi;!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function n(e,t){var n;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(n=e.llamaIntegration)||void 0===n?void 0:n.enabled))}function i(e,n,i,r){var s,o;const a=r?Fe(r):void 0,c=n.isLlamaInstalled&&(null===(s=i.llamaIntegration)||void 0===s?void 0:s.enabled);return t(a,null===(o=i.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&(c||"true"===e.showDesktopIntegrationExtensionToggle)}e.isEnabled=n,e.showSettingPopupToggle=i,e.showGrayGButton=function(e,t,r,s){return i(t,e,r,s)&&n(r,e)},e.isIntegrationEnabled=function(e,i,r){var s;return!(!e||!r)&&(t(i,null===(s=r.llamaIntegration)||void 0===s?void 0:s.disabledByDomain)&&n(r,e))}}(mi||(mi={}));function _i(e,t){var n;const i=e[t],r=null===(n=null==i?void 0:i.enabled)||void 0===n||n;return{...e.common,...i,enabled:r}}var bi;!function(e){function t(e,t){try{for(const n of Object.keys(t))if(t[n]&&t[n](e))return n;return null}catch(e){return null}}e.isSpecific={draftJs:e=>!(!e.hasAttribute("contenteditable")||!e.querySelector('[data-contents="true"] > [data-editor], [data-block]')),quill:e=>e.classList.contains("ql-editor")||e.classList.contains("ql-container"),redactor:e=>e.className.indexOf("redactor")>-1,prosemirror:e=>e.hasAttribute("pm-container")||e.classList.contains("ProseMirror"),scribe:e=>e.className.indexOf("scribe")>-1,trix:e=>e.className.indexOf("trix")>-1,"medium-editor":e=>e.className.indexOf("medium-editor")>-1,tinymce:e=>{if("IFRAME"!==e.tagName)return!1;const t=e;return t.id.indexOf("mce")>-1||!!(t.contentDocument&&t.contentDocument.querySelectorAll("#tinymce, .mce-content-body").length>0)},ckeditor4:e=>e.matches("iframe.cke_wysiwyg_frame")||e.classList.contains("cke_editable"),ckeditor5:e=>e.classList.contains("ck-editor__editable"),slate:e=>"true"===e.getAttribute("data-slate-editor"),mobiledoc:e=>e.classList.contains("__mobiledoc-editor")},e.isGeneric={contenteditable:e=>{const t=e.attributes.getNamedItem("contenteditable");return!(!function(e){return!(e instanceof HTMLSelectElement)}(e)||!t||"true"!==t.value&&""!==t.value&&"plaintext-only"!==t.value)},textarea:e=>"TEXTAREA"===e.tagName,iframe:t=>{if("IFRAME"===t.tagName){const n=t;return!!(n.contentDocument&&n.contentDocument.body&&e.isGeneric.contenteditable(n.contentDocument.body))}return!1},iframeHost:t=>{if("IFRAME"===t.tagName){const n=t;return!(n.contentDocument&&n.contentDocument.body&&e.isGeneric.contenteditable(n.contentDocument.body))}return!1}},e.get=function(n){return{generic:t(n,e.isGeneric),specific:t(n,e.isSpecific)}}}(bi||(bi={}));const vi="data-enable-grammarly",yi=["data-gramm_editor","data-gramm","data-gramm_id","gramm_editor"],wi=[...yi,"readonly","disabled"],xi=["pm-container",{name:"class",value:"ProseMirror"},"data-synchrony",{name:"data-gramm",value:"false"},{name:vi,value:"false"},{name:"aria-label",value:"Search Facebook"}],Ei=["changed-user","changed-plan","changed-dialect","cleanup","editor-fix","llama-action","close-current-tab"];function Ci(e,t){let n=e.parentNode;for(;null!==n;){if(Ti(n,t))return n;n=n.parentNode}return!1}function Si(e){return"true"===e.contentEditable||"plaintext-only"===e.contentEditable}function Ti(e,t){if(!e)return!1;const n=e.matches||e.msMatchesSelector||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;return!!n&&n.apply(e,[t])}function ki(e,t=null,n){return this.addEventListener(e,t,n),{off:()=>Ii.apply(this,[e,t,n])}}function Ii(e,t,n){this.removeEventListener(e,t||null,n)}var Ri,Fi,Ai;function Oi(e,t,n,i,r,s){var o,a;const c=function(e,t,n,i){var r,s,o,a,c,l,u;if(!(null===(r=e.connection)||void 0===r?void 0:r.online))return"disabled_due_to_network_connection";const d=fi();return t.isEnterpriseConfig&&(null===(s=t.unsupportedMessage)||void 0===s?void 0:s.message)===d.ORGANIZATION_CONTROLS.message?"disabled_by_enterprise":t.enabled||t.servicePage?null===(c=null===(a=null===(o=e.extensionSettings)||void 0===o?void 0:o[n])||void 0===a?void 0:a.enabled)||void 0===c||c?(null===(l=e.connectorSettings)||void 0===l?void 0:l.isConnected)?"integrated_via_connector":e.dynamicConfig&&e.extensionSettings&&mi.showGrayGButton(_i(e.extensionSettings,n),null!==(u=e.dapi)&&void 0!==u?u:{},e.dynamicConfig,i)?"disabled_due_to_desktop_integration":"integrated":"disabled_by_user":"disabled_by_grammarly"}(e,t,n,i);if(!On.has(c))return c;const l=Date.now(),u=(null!==(o=null==r?void 0:r.lastChangeEventTimestamp)&&void 0!==o?o:0)>l-2e3,d=(null!==(a=null==r?void 0:r.lastCheckingStatusTimestamp)&&void 0!==a?a:0)>l-6e4,h=function(e){return!e}(r)||!u;if(h){return(p=s)instanceof HTMLElement&&yi.some((e=>{const t=p.hasAttribute(e)?p:p.closest(`[${e}]`);if(!(t instanceof HTMLElement))return!1;const n=bi.get(t);return n.generic||n.specific}))?"disabled_by_site":"unsupported"}var p;return r.type===Ri.connector?"integrated_via_connector":r.type===Ri.ghost?"integrated_via_ghost":d?"integrated":"disabled_due_to_capi_connection"}!function(e){e.default="default",e.connector="connector",e.ghost="ghost"}(Ri||(Ri={}));class Ni{constructor(e,t=Cn.create("TypingTrackerImpl")){this._params=e,this._log=t,this._subs=new h,this._isIframe=ke(),this._iframeDomain=this._isIframe?cn(document.location.href).domainAlias:void 0,this._lastTypedFieldState=null,this._typingTargetList=on.create([document]),this._subs.add(gi(this._typingTargetList).subscribe((({duration:e,textLength:t})=>this._handleTyping(e,t))))}_handleTyping(e,t){var n,i;const r=document.activeElement,s=Oi(this._params.storeContent.get(),this._params.pageConfig,this._params.domain,this._params.url,this._lastTypedFieldState,r),o=function(e,t){return"integrated"!==e&&(!(t instanceof HTMLElement)||An.has(t.tagName)&&!Si(t))}(s,r),a={duration:e,textLength:t,integrationType:s,isIframe:this._isIframe,...this._iframeDomain?{iframeDomain:this._iframeDomain}:{},..."integrated"===s&&(null===(n=this._lastTypedFieldState)||void 0===n?void 0:n.integrationName)?{integrationName:this._lastTypedFieldState.integrationName}:{}};this._log.debug("typing detected:",{...a,activeElement:r,shouldSkipTracking:o,domain:this._params.domain,lastFocusedField:null===(i=this._lastTypedFieldState)||void 0===i?void 0:i.textField}),o||this._params.rpc.addTypingDurationMetric(this._params.domain,a)}registerFieldIntegration(e,t,n,i,r=on.create(an.idle)){const s=Date.now(),o={type:e,integrationName:n,textField:t,lastChangeEventTimestamp:s,lastCheckingStatusTimestamp:s},a=ht([i.contentChanges.async.pipe(Ue((({deltaChange:e})=>!e.isEmpty)),tt(500),x(Date.now)),r.pipe(tt(500),x((e=>({status:e,timestamp:Date.now()}))))]).pipe(x((([e,t])=>({...o,lastChangeEventTimestamp:e,lastCheckingStatusTimestamp:t.status===an.idle?Date.now():t.timestamp}))),ft(),Ue((e=>{var t,n,i;return e.lastChangeEventTimestamp>(null!==(n=null===(t=this._lastTypedFieldState)||void 0===t?void 0:t.lastChangeEventTimestamp)&&void 0!==n?n:0)||e.textField===(null===(i=this._lastTypedFieldState)||void 0===i?void 0:i.textField)}))).subscribe((e=>{this._lastTypedFieldState=e}));return{dispose(){a.unsubscribe()}}}addTypingTarget(e){this._typingTargetList.modify((t=>t.includes(e)?t:[...t,e]))}dispose(){this._subs.unsubscribe(),this._lastTypedFieldState=null}static async create(e,t){var n;const i=(null!==(n=self.top)&&void 0!==n?n:self).location.href,{originalDomain:r,domainAlias:s}=cn(i),o=await t.getPageConfig(r,i);return new Ni({rpc:t,url:i,domain:s,pageConfig:o,storeContent:e})}}!function(e){e.create=async function(e,t){return await t.isGateEnabled("DurationMetrics")?Ni.create(e,t):new De}}(Fi||(Fi={})),function(e){e.lessThan1Week="lessThan1Week",e.weekTo4Weeks="weekTo4Weeks",e.moreThan4weeks="moreThan4weeks",e.moreThan3Months="moreThan3Months"}(Ai||(Ai={}));const Pi={stats:"ex_perfstats",csInit:"ex_csInitPerf",viewInjection:"viewInjectionPerf"};function Li(e){const{_tag:t,...n}=e;return{[Pi[e._tag]]:n}}var Mi;function Di(e){return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message}!function(e){e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(Mi||(Mi={}));const Ui=e=>e.reduce(((e,t,n)=>e+(t-e)/(n+1)),0),Gi=(e,t)=>{const n=void 0===t?Ui(e):t;return e.length>1?Math.sqrt(e.reduce(((e,t)=>e+(t-n)**2),0)/(e.length-1)):0};var Bi,ji,Wi;function Hi(e){return $i.includes(e)}function Vi(e=Re(),t="other"){var n;return Hi(e)?null!==(n=function(e){return $i.getTopSiteId(e)}(e))&&void 0!==n?n:"null":t}!function(e){function t(){return{dummy:!0,startMeasure:()=>({endMeasure:()=>{},cancelMeasure:D}),measure:e=>e(),measureAsync:e=>e(),custom:D}}e.dummy=t,e.dummyFactoryInitialization=()=>()=>t()}(Bi||(Bi={})),function(e){e.dummy={flushMeasures:e=>[],measure:(e,t)=>t(),startMeasure:e=>({endMeasure(){},cancelMeasure(){}})}}(ji||(ji={})),function(e){let t;!function(e){let t;!function(e){let t;!function(e){e.stats="stats",e.csInit="csInit",e.viewInjection="viewInjection"}(t=e.Types||(e.Types={}))}(t=e.Tagged||(e.Tagged={}))}(t=e.Data||(e.Data={})),e.getStats=function(e){if(0===e.length)return{ct:0};{const t=e.reduce(((e,t)=>Math.min(e,t)),Number.MAX_VALUE),n=e.reduce(((e,t)=>Math.max(e,t)),Number.MIN_VALUE),i=e.length>=6?Ui(e):void 0;return{ct:e.length,min:t,max:n,range:n-t,avg:i,stddev:void 0!==i&&e.length>1?Gi(e,i):void 0}}}}(Wi||(Wi={}));const $i=new class{constructor(e){function t(e){return`Invalid pattern "${e}": "*" is allowed only at start and/or end position`}this._equal=new Set,this._prefix=[],this._suffix=[],this._infix=[],this._domain=[];for(const n of e)if(n.startsWith("**."))this._domain.push(n.substring(3));else{const e=n.indexOf("*");if(-1===e)this._equal.add(n);else if(e===n.length-1)this._prefix.push(n.substring(0,e));else{if(0!==e)throw new Error(t(n));{const e=n.indexOf("*",1);if(-1===e)this._suffix.push(n.substring(1));else{if(e!==n.length-1)throw new Error(t(n));this._infix.push(n.substring(1,e))}}}}}getTopSiteId(e){var t,n,i,r,s,o,a;return null!==(o=null!==(s=null!==(r=null!==(i=null!==(n=null!==(t=this._equal.has(e)?e:void 0)&&void 0!==t?t:this._domain.find((t=>t===e)))&&void 0!==n?n:(a=this._domain.find((t=>e.endsWith("."+t))),a?"**."+a:void 0))&&void 0!==i?i:this._prefix.find((t=>e.startsWith(t))))&&void 0!==r?r:this._suffix.find((t=>e.endsWith(t))))&&void 0!==s?s:this._infix.find((t=>e.includes(t))))&&void 0!==o?o:null}includes(e){return null!==this.getTopSiteId(e)}}(["mail.google.com","translate.google.*","docs.google.com","web.whatsapp.com","facebook.com","outlook.*","linkedin.com","zendesk.*","youtube.com","twitter.com","x.com","messenger.com","*.slack.*","*canvas*","*instructure*","trello.com","editor.wix.com","quizlet.com","mail.yahoo.com","*.force.*","keep.google.com","vk.com","fanyi.baidu.com","app.bullhornstaffing.com","app.qa-world.com","calendar.google.com","papago.naver.com","wordcounter.net","blogger.*","wattpad.com","**.wordpress.com","amazon.*","smallseotools.com","create.kahoot.it","apps.rackspace.com","basecamp.com","varsitytutors.com","canva.com","fanyi.youdao.com","reverso.net","message.alibaba.com","*schoology*","*.blackboard.*","classroom.google.com","*upwork*","business.facebook.com","medium.com","mail.aol.com","workhub.transcribeme.com","github.com","overleaf.com","chat.openai.com","chatgpt.com","**.substack.com","**.atlassian.net","**.greenhouse.io","**.lattice.com","**.latticehq.com","**.salesforce.com","**.force.com","**.zendesk.com","**.microsoftonline.com","**.outlook.com","**.facebook.com","**.messenger.com","**.genesys.com","**.cisco.com","**.avaya.com","**.oraclecloud.com","**.five9.com","**.tawk.to","**.helpscout.com","**.livechat.com","**.intercom.com","**.freshdesk.com","**.liveagent.com","**.hubspot.com","google.com","chat.google.com","classroom.google.com","quillbot.com","notion.so","**.peardeck.com","discord.com","**.officeapps.live.com","student.desmos.com","web.kamihq.com","deepl.com","upwork.com","app.nearpod.com","bard.google.com","instagram.com","teams.microsoft.com","studio.youtube.com","learning.amplify.com","commonlit.org","**.asana.com","reddit.com","forms.office.com","sites.google.com","*amazon.co*","apps.studysync.com","fiverr.com","newsnow.io"]);class zi{constructor(e){this._onMeasure=e}measure(e){const t=performance.now();let n=!1;try{const i=e();return n=!0,i}finally{this._onMeasure(performance.now()-t,n)}}async measureAsync(e){const t=performance.now();let n=!1;try{const i=await e();return n=!0,i}finally{this._onMeasure(performance.now()-t,n)}}}function qi(e){return e instanceof Error?function(e){if(e instanceof Error){const{name:t,message:n,stack:i,errors:r,suppressed:s,cause:o,...a}=e;return{...a,name:t,message:n,stack:i,errors:r,suppressed:s,cause:o}}return e}(e):e instanceof ErrorEvent?function(e){if(e instanceof ErrorEvent){const{message:t,type:n,lineno:i,colno:r,filename:s,error:o,...a}=e;return{...a,message:t,type:n,lineno:i,colno:r,filename:s,error:o}}return e}(e):e instanceof PromiseRejectionEvent?function(e){if(e instanceof PromiseRejectionEvent){const{type:t,reason:n,...i}=e;return{...i,type:t,reason:n}}return e}(e):e}function Ki(e){try{return JSON.stringify(e,((e,t)=>qi(t)))}catch(e){return JSON.stringify({json_error:"Cannot json stringify"})}}function Ji(e,t){return{json:Ki(e),exception:t?{name:t.name,message:t.message,stack:t.stack?Zi(t.stack):void 0,...un(t.extra)?t.extra:{}}:void 0}}function Yi(){return kn().browserApi.baseUri}const Xi={chromium:["<anonymous>","native","unknown location"],firefox:[],safari:["[native code]"]};function Zi(e,{browser:t=kn().config.bundleInfo.browser,extensionBaseUri:n=Yi()}={}){if(!e)return e;const i=Xi["chrome"===t||"edge"===t?"chromium":t],r=e=>i.some((t=>e.startsWith(t)))||n&&e.startsWith(n),s=e.split("\n");if("chrome"===t||"edge"===t){const e=[];let t=0;for(;t<s.length&&!s[t].startsWith("    at ");)e.push(s[t]),t++;for(;t<s.length;){const n=(o=s[t],a=void 0,c=void 0,l=void 0,null===(l=null!==(c=null!==(a=Qi.exec(o))&&void 0!==a?a:er.exec(o))&&void 0!==c?c:tr.exec(o))||void 0===l?void 0:l[1]);n?r(n)?e.push(s[t]):e.push("    at <hidden>"):e.push("    <unparsed>"),t++}return e.join("\n")}if("firefox"===t||"safari"===t)return s.map((e=>[e,"firefox"===t?nr(e):ir(e)])).map((([e,t])=>void 0===t?"<unparsed>":r(t)?e:"<hidden>")).join("\n");var o,a,c,l;P(t)}const Qi=/^ {4}at ([^(]*)$/,er=/^ {4}at [^(]* \(([^()]*)\)$/,tr=/^ {4}at eval \([^(]* \(([^()]*)\)\)$/;function nr(e){return e.split("@",2)[1]}function ir(e){var t;return null!==(t=e.split("@",2)[1])&&void 0!==t?t:e}const rr=Cn.create("lib.tracking.telemetry"),sr=.1,or=.05,ar=.01;var cr;!function(e){e.getMapPageCount=e=>void 0===e.mapPageCount?void 0:e.mapPageCount>10?"10+":e.mapPageCount}(cr||(cr={}));const lr=e=>e.substring(0,5),ur=(e,t)=>{let n;try{n=JSON.stringify(t)}catch(t){n=`stringify fail: '${String(t)}', '${Di(t)?t.message:"undefined"}'`,rr.warn(n,e)}return n};class dr{constructor(e=D,t=D,n=D,i=D,r=!1,s=Bi.dummyFactoryInitialization,o=D,a=D,c=(e=>.01),l=D,u=s(((e,{hideUserInfo:t,...n})=>{this._sendEvent({logger:e,level:Mi.INFO,hideUserInfo:t,...Li(n)})})),d=D,h=D,p=D,g=D,f=D){this._sendFelog=e,this._sendFelogUsage=t,this._setUserInfo=n,this._setContainerId=i,this._sendUsageMetrics=r,this._sendFelogEvent=o,this._sendFelogCrashLogs=a,this._getUsageMetricsRate=c,this._enableDataSharing=l,this._createPerfLogger=u,this._sendFelogMetricEvent=d,this._sendFemetricsRate=h,this._startFemetricsTimer=p,this._endFemetricsTimer=g,this._sendFemetricsTimer=f,this._sendEvent=e=>{try{this._sendFelogEvent(e)}catch(t){rr.warn(`Failed to send felog for ${JSON.stringify(e)}`,t)}},this._sendException=e=>(t,n,i,r=!0)=>{let s;s=i||(Di(t)?t.message:String(t)),this._sendEvent({message:s,...e,sendToFemetrics:r,extra:{...e.extra,...Ji(n,t)}})},this._sendUsageMetricsSamplingRatio=this._getUsageMetricsRate(we().bundleInfo.browser),this.sendFemetricsRate=(e,t,n)=>{this._sendFemetricsRate(e,t,n)},this.startFemetricsTimer=(e,t,n)=>{this._startFemetricsTimer(e,t,performance.now(),n)},this.endFemetricsTimer=(e,t,n,i)=>{this._endFemetricsTimer(e,t,performance.now(),n,i)},this.sendFemetricsTimer=(e,t,n,i)=>{this._sendFemetricsTimer(e,t,n,i)},this.restoredBgConnection=e=>{this._send("cs.connection.bg.restored",Mi.INFO,{timeWithoutConnection:e})},this.initWithoutBgConnection=()=>{this._send("cs.connection.bg.disconnected",Mi.INFO)},this.fetchDefinitionsFail=()=>{this._send("cs.connection.api.definition.failed",Mi.WARN)},this.tooLongPageConfigInit=e=>{this._send("cs.pageConfig.init.exceeded",Mi.WARN,{initTime:e})},this.tooLongUserUpdateTime=e=>{this._send("bg.state.user.update.exceeded",Mi.WARN,{updateTime:e})},this.lostBgPageConnection=()=>{this._send("cs.gbutton.bgConnection.lost",Mi.INFO)},this.restoreBgPageConnection=e=>{this._send("cs.gbutton.bgConnection.restored",Mi.INFO,{time:e})},this.dynamicConfigLoadFromPrefsError=e=>{this._sendSampled(ar,"bg.dynamicConfig.prefs.load.error",Mi.ERROR,{message:e})},this.dynamicConfigSaveToPrefsError=e=>{this._sendSampled(ar,"bg.dynamicConfig.prefs.save.error",Mi.ERROR,{message:e})},this.dynamicConfigLoadFromServerError=e=>{this._sendSampled(ar,"bg.dynamicConfig.server.load.error",Mi.ERROR,{message:e})},this.pageConfigCDNError=e=>{this._send("cs.pageConfig.cdn.error",Mi.ERROR,{message:e})},this.pageConfigLocalStorageError=(e,t)=>{this._send("cs.pageConfig.localStorage.error",Mi.INFO,{message:e,name:t})},this.pageConfigUpdated=(e,t)=>{this._send("cs.pageConfig.updated",Mi.INFO,{oldVersion:e,newVersion:t})},this.settingsPopupTimeout=()=>{this._send("settings.popup.init.timeout",Mi.WARN)},this.settingsUnsupportedShow=e=>{this._send("settings.popup.state.unsupported.show",Mi.INFO,{popupType:e})},this.gnarClientInitFail=e=>{this._send("gnar.bg.tracking.gnar.init.fail",Mi.WARN,{message:e})},this.bgTrackingInitFail=()=>{this._send("debug.tracking.init.fail",Mi.INFO)},this.userUpgradeClick=e=>{this._send("cs.ui.action.upgradeClick",Mi.INFO,{placement:e})},this.gGbUpHookClick=()=>{this._send("cs.ui.gb.uphook.click",Mi.INFO)},this.gButtonClick=()=>{this._send("cs.ui.gbutton.click",Mi.INFO)},this.unexpectedAnonymous=e=>{this._send("debug.bg.session.unexpectedAnonymous",Mi.INFO,e)},this.getDapiPropError=(e,t)=>{const n="bg.connection.dapi.getProp.error",i=ur(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:Mi.WARN,extra:{json:i},sendToFemetrics:!0})},this.getFetchPassportError=(e,t)=>{const n="bg.connection.passport.fetch.error",i=ur(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:Mi.WARN,extra:{json:i},sendToFemetrics:!0})},this.getCheetahStatusError=(e,t)=>{const n="bg.connection.cheetahSettings.getStatus.error",i=ur(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:Mi.WARN,extra:{json:i},sendToFemetrics:!0})},this.setDapiPropError=(e,t)=>{const n="bg.connection.dapi.setProp.error",i=ur(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:Mi.WARN,extra:{json:i},sendToFemetrics:!0})},this.toggleExtensionDefs=e=>{this._send("bg.settings.definitions.toggle",Mi.INFO,{enabled:e})},this.toggleExtension=(e,t,n)=>{const i={enabled:e,placement:t,domain:n};this._sendEvent({logger:"bg.settings.extension.toggle",level:Mi.INFO,sendToFemetrics:!0,extra:{json:Ki(i)},femetricsExtra:i})},this.disableUntilNextVisit=()=>{this._send("cs.gbutton.disableUntilNextVisit",Mi.INFO)},this.disableButtonClick=()=>{this._send("cs.gbutton.disableButtonClick",Mi.INFO)},this.cookieOverflow=(e,t)=>{this._send("debug.bg.state.cookie.overflow",Mi.INFO,{size:e,biggestCookie:t})},this.externalChangePlan=()=>{this._send("bg.api.external.changePlan",Mi.INFO)},this.externalChangeDialect=()=>{this._send("bg.api.external.changeDialect",Mi.INFO)},this.externalChangeUser=()=>{this._send("bg.api.external.changeUsed",Mi.INFO)},this.externalLogout=()=>{this._send("bg.api.external.logout",Mi.INFO)},this.safariLogoutFail=e=>{this._sendEvent({logger:"bg.safari.logout.error",level:Mi.INFO,message:e,sendToFemetrics:!0})},this.csInitialized=e=>{if("message"in e){const t=Vi();this._sendFemetricsRate("csInitialized",{message:e.message,isIframe:e.isIframe,stage:e.stage,domain:t,context:e.context});const n=we().buildInfo.version;this._sendEvent({level:Mi.INFO,logger:"csFailInitializedVersion",extra:{json:JSON.stringify({csVersion:n})}}),this._sendFemetricsRate("csFailInitializedVersion",{csVersion:n}),"facebook.com"===t&&this._sendEvent({level:Mi.INFO,logger:"csInitializedFailed",message:e.message,extra:{json:JSON.stringify({isIframe:e.isIframe,stage:e.stage,url:self.location.href,context:e.context})},hideUserInfo:!0})}else this._sendFemetricsRate("csInitialized",e,["firstInstall","registrationDate"])},this.acceptDataControl=()=>{this._send("bg.dataControl.accepted",Mi.INFO)},this.bgPage={bgStarted:e=>{this._sendFemetricsRate("bgStarted",e),"fail"===e.status&&this._sendException({logger:"bg.start.fail",femetricsExtra:{reason:e.reason},level:Mi.ERROR})(e.error,{reason:e.reason})},bgPageStarted:(e,t)=>{this._sendFemetricsRate("bgPageStarted",{context:e,time:t})},bgPageInitFail:e=>{this._send("bg.state.init.fail",Mi.ERROR,{initAttempts:e})},bgPageInitTimeout:e=>{this._send("bg.state.start.timeout",Mi.WARN,{initTime:e})}},this.popup={popupInitFail:(e,t)=>{this._sendEvent({logger:"popup.init.fail",level:Mi.ERROR,message:e,extra:t,femetricsMessage:lr(e)})},fetchTreatmentsFail:e=>{this._sendFemetricsRate("popupFetchTreatmentsFails",{message:lr(e)})},popupStateInitFail:e=>{this._sendEvent({logger:"popup.state.init.fail",level:Mi.ERROR,message:e,femetricsMessage:lr(e)})},initSuccess:()=>{this._sendEvent({logger:"popup.init.success",level:Mi.INFO,sendToFemetrics:!0})}},this.extensionUpdated=(e,t)=>{this._send("bg.state.updated",Mi.INFO,{currentVersion:e,previousVersion:t})},this.extensionUpdateFail=e=>{this._send("bg.state.update.fail",Mi.INFO,{previousVersion:e})},this.cannotGetInstallSource=()=>{this._send("bg.getSource.fail",Mi.WARN)},this.extensionInstall=e=>{this._sendEvent({logger:"bg.state.install",level:Mi.INFO,extra:{json:JSON.stringify({source:e})},sendToFemetrics:!0})},this.chromeContentScriptLoadError=(e,t)=>{this._send("bg.chrome.cs.load.error",Mi.WARN,{message:e,type:t})},this.reloadNotificationShow=()=>{this._send("bg.ui.notification.tabsReload.show",Mi.WARN)},this.reloadNotificationClick=()=>{this._send("bg.ui.notification.tabsReload.click",Mi.INFO)},this.fetchUserFail=(e,t,n,i)=>{const r="bg.user.fetch.fail",s=ur(r,{body:t,statusCode:n,reason:e,fromAuthRequest:!!i});this._sendEvent({logger:r,level:Mi.WARN,extra:{json:s},sendToFemetrics:!0})},this.getAccessTokenError=e=>this.sendFemetricsRate("oauthGetAccessTokenError",e),this.getAccessTokenSuccess=e=>this.sendFemetricsRate("oauthGetAccessTokenSuccess",e),this.initializeAccessTokenSuccess=()=>this._sendEvent({logger:"bg.api.service.getAccessToken",message:"initialize access token",level:Mi.INFO}),this.oauthLogout=e=>this.sendFemetricsRate("oauthLogout",e),this.compareUserInUserUpdate=e=>this.sendFemetricsRate("compareUserInUserUpdate",e),this.frequentCookieChanges=e=>{this._send("debug.cookie.onChange.error",Mi.INFO,{canceled:e})},this.initializePropFromDapi=e=>{this._send("bg.state.dapi.prop.initialize",Mi.INFO,{name:e})},this.personalizedInsightsConsentPopupShow=e=>{this._sendEvent({logger:"cs.personalizedInsightsConsent.popup.show",level:Mi.INFO,sendToFemetrics:!0,femetricsMessage:`Personalized Insights Consent Popup shown with consent type: ${e}`,hideUserInfo:!0})},this.personalizedInsightsConsentPopupInitializationError=e=>{this._sendEvent({logger:"cs.personalizedInsightsConsent.popup.initialization.error",level:Mi.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue initialing Personalized Insights Consent popup. Likely, gButtonPopupController has not been initialized yet at the time when updateState was called.",hideUserInfo:!0,extra:{json:JSON.stringify({err:e})}})},this.dataSharingGetError=e=>{this._sendEvent({logger:"bg.dataSharing.api.failure",level:Mi.ERROR,sendToFemetrics:!0,femetricsMessage:"There was an issue calling Data Sharing API",hideUserInfo:!1,extra:{json:JSON.stringify({err:e})}})},this.onboardingPopupShow=()=>{this._send("cs.onboarding.popup.show",Mi.INFO)},this.onboardingPopupCancel=()=>{this._send("cs.onboarding.popup.cancel",Mi.INFO)},this.onboardingTutorialShow=()=>{this._send("cs.onboarding.tutorial.show",Mi.INFO)},this.loginReminderPopupShow=()=>{this._send("cs.gbutton.popup.loginReminder.show",Mi.INFO)},this.loginReminderBadgeShow=()=>{this._send("bg.state.user.loginReminder.enable",Mi.INFO)},this.loginReminderCanceled=e=>{this._sendFelog("bg.state.user.loginReminder.canceled",e,Mi.ERROR)},this.logApiCallFailure=(e,t)=>{this._sendEvent({logger:"bg.api.service.request.failure",level:Mi.ERROR,message:"[API_CALL_FAILED]",extra:{json:JSON.stringify({filteredUrl:e,method:t})}})},this.logGrauthExchange=()=>{this._sendEvent({logger:"user.auth.grauth.exchange",level:Mi.INFO,message:"[GRAUTH_ROTATED]"})},this.unhandledExceptions={unhandledBgPageException:(e,t)=>{const n="bg.unhandledException";rr.error(n,new Error(e),t),this._sendSampledEvent(or,{logger:n,level:Mi.ERROR,message:fr(e),extra:t})},unhandledBgPageRejection:(e,t)=>{const n="bg.unhandledRejection";rr.error(n,new Error(e),t),this._sendSampledEvent(or,{logger:n,level:Mi.ERROR,message:gr(e),extra:t})},unhandledPopupException:(e,t)=>{const n="popup.unhandledException";rr.error(n,new Error(e),t),this._sendEvent({logger:n,level:Mi.ERROR,message:e,extra:t,femetricsMessage:lr(e)})},unhandledPopupRejection:(e,t)=>{const n="popup.unhandledRejection";rr.error(n,new Error(e),t),this._sendEvent({logger:n,level:Mi.ERROR,message:e,extra:t,femetricsMessage:lr(e)})}},this.csUnhandled=({message:e,femetricsExtra:t,error:n,printAsWarning:i})=>{const r="cs.unhandled";i?rr.warn(r,new Error(e)):rr.error(r,new Error(e)),this._sendEvent({logger:r,level:i?Mi.WARN:Mi.ERROR,message:e,femetricsExtra:t,sendToFemetrics:!0,extra:n?Ji({},n):void 0})},this.csCrash=G(((e,t)=>{rr.error("cs.crash",new Error(e)),this._sendEvent({logger:"cs.crash",level:Mi.ERROR,message:e,femetricsExtra:t})})),this.storageMigrationSucceeded=()=>{this._send("bg.storageMigration.success",Mi.INFO,{})},this.storageMigrationFailed=this._sendException({logger:"bg.storageMigration.failure",level:Mi.ERROR}),this.storageApplyChangesFailed=this._sendException({logger:"bg.storage.applyChanges.failure",level:Mi.ERROR}),this.cardShowAction=()=>{this._sendSampled(sr,"cs.editor.card.show",Mi.INFO)},this.cardHideAction=()=>{this._sendSampled(sr,"cs.editor.card.hide",Mi.INFO)},this.cardReplacementAction=()=>{this._sendSampled(sr,"cs.editor.card.replacement",Mi.INFO)},this.cardAddToDictAction=()=>{this._sendSampled(sr,"cs.editor.card.addToDict",Mi.INFO)},this.cardIgnoreAction=()=>{this._sendSampled(sr,"cs.editor.card.ignore",Mi.INFO)},this.synonymCardShowAction=e=>{this._sendSampled(sr,"cs.editor.synonym.show",Mi.INFO,{notFoundCard:e})},this.synonymCardHideAction=e=>{this._sendSampled(sr,"cs.editor.synonym.hide",Mi.INFO,{notFoundCard:e})},this.synonymReplacementAction=()=>{this._sendSampled(sr,"cs.editor.synonym.replacement",Mi.INFO)},this.dictCardShowAction=()=>{this._sendSampled(sr,"cs.editor.dict.show",Mi.INFO)},this.dictCardHideAction=()=>{this._sendSampled(sr,"cs.editor.dict.hide",Mi.INFO)},this.couldNotParseTransform=(e,t)=>{this._send("cs.cards.transforms.parse.error",Mi.WARN,{transformHTML:e,fallbackParseSuccessful:t})},this.disabledTabLoad=e=>{this._sendUsage("usage.loadOnDisabledTab",Mi.INFO,{accountType:e})},this.disabledTabByUserLoad=e=>{this._sendUsage("usage.loadOnDisabledByUserTab",Mi.INFO,{accountType:e})},this.initSession=(e,t,n,i)=>{this._sendUsage("usage.session.init",Mi.INFO,{isTopSite:Hi(e),accountType:t,fieldType:n,fieldSupported:i}),this._sendMetric("usage.session.init",{domain:e,accountType:t,fieldType:n,fieldSupported:i})},this.cardFirstInteraction=(e,t)=>{this._sendUsage("usage.card.interaction",Mi.INFO,{accountType:e,fieldType:t})},this.gnar={nextPingDateWriteError:e=>this._send("bg.gnarTracker.nextPingDateWriteError",Mi.ERROR,{error:e}),sendError:(e,t)=>this._sendException({logger:"bg.gnarTracker.sendError",level:Mi.ERROR,femetricsExtra:{context:t}})(e,{eventName:t}),trackBeforeSetUser:e=>this._send("bg.gnarTracker.trackBeforeSetUser",Mi.INFO,{millisSinceInit:e}),errorSetUser:this._sendException({logger:"bg.gnarTracker.errorSetUser",level:Mi.ERROR})},this.productMetricsClient={updateConfigurationFailed:(e,t)=>{this._sendException({logger:"bg.productMetricsClient.setUserInfoFailed",level:Mi.ERROR,femetricsExtra:{context:t}})(e,{error:e,context:t})}},this._sendGdocsPageExecutionException=this._sendException({logger:"cs.gdocs.pageExecution.exception",level:Mi.ERROR}),this.gdocs={nonDocumentPage:e=>{this._sendEvent({logger:"cs.gdocs.canvas.nonDocumentPage",level:Mi.WARN,sendToFemetrics:!0,femetricsMessage:`isViewMode: ${e.isViewMode}`,femetricsExtra:{context:e.pageType},extra:{json:Ki({url:e.url})},hideUserInfo:!0})},documentTabInfo:G((e=>{this.sendFemetricsRate("gdocsDocumentTabInfo",{hasTabQuery:e})})),tabSwitchFrequency:e=>{this.sendFemetricsRate("gdocsTabSwitchFrequency",e)},pageExecutionException:(e,t)=>this._sendGdocsPageExecutionException(e,{isGDocsCanvas:t}),disabledBeforeForceEnable:G((e=>this._send("cs.gdocs.disabledBeforeForceEnable",Mi.INFO,{disabledDate:e}))),enabledBeforeForceEnable:G((()=>this._send("cs.gdocs.enabledBeforeForceEnable",Mi.INFO))),replacementSelectionErrorInfo:e=>{this._sendFemetricsRate("gdocsReplacementSelectionErrorInfo",e)},eventTargetFail:G(this._sendException({logger:"cs.gdocs.eventTargetFail",level:Mi.ERROR})),sidebarFail:G(((e,t)=>this._sendException({logger:"cs.gdocs.getSidebarFail",level:Mi.ERROR})(e,{type:t}))),layoutTreeAvailability:e=>{this.sendFemetricsRate("gdocsInternalsLayoutTreeAvailability",e)}},this.canvasGdocs={injectedException:G(this._sendException({logger:"cs.gdocs.canvas.injected.exception",level:Mi.ERROR})),injectedError:B(((e,t,n,i)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.error",level:Mi.ERROR,message:t,extra:{json:Ki({context:e,data:n})},gdocsExtra:i,femetricsExtra:{context:e}})),(e=>e)),injectedInfo:B(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.injected.info",eventContext:e,level:Mi.INFO,sendToFemetrics:!0,gdocsExtra:t,extra:{json:Ki({context:e,data:n})},femetricsExtra:{context:e}})),(e=>e)),initializationException:G(((e,t,n)=>this._sendException({logger:"cs.gdocs.canvas.init.exception",level:Mi.ERROR,gdocsExtra:n,femetricsExtra:{type:t}})(e,{type:t}))),initializationTimeout:G(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.init.timeout",level:Mi.ERROR,message:`Initialization for ${t} timeout: ${e}ms`,extra:{json:Ki({type:t})},gdocsExtra:n,femetricsExtra:{type:t}}))),creatingException:G(((e,t)=>this._sendEvent({logger:"cs.gdocs.canvas.creating.exception",level:Mi.ERROR,message:e,gdocsExtra:t}))),initInterrupted:G((e=>this._sendEvent({logger:"cs.gdocs.canvas.interrupted",level:Mi.ERROR,message:"Interrupted",gdocsExtra:e}))),dataSourceException:G(((e,t)=>this._sendException({logger:"cs.gdocs.canvas.dataSource.exception",level:Mi.ERROR,femetricsExtra:{type:t}})(e,{type:t}))),error:B(((e,t,n,i,r)=>this._sendEvent({logger:"cs.gdocs.canvas.error",level:Mi.ERROR,message:t,extra:Ji({type:e,message:t,data:i},n),femetricsExtra:{type:e,mappingName:null==r?void 0:r.mappingName}})),(e=>e),((e,t,n,i,r)=>{this._sendFemetricsRate("gdocsError",{type:e,message:t&&t.substring(0,20)||"other",mappingName:null==r?void 0:r.mappingName,selectionDiff:"selectionService"===e?null==i?void 0:i.selectionDiff:void 0})})),warning:B(((e,t,n)=>this._sendEvent({logger:"cs.gdocs.canvas.warning",level:Mi.WARN,message:t,extra:Ji({type:e,message:t,data:n})})),(e=>e)),trackSessionFinalResult:G(((e,t)=>this._sendEvent({logger:"cs.gdocs.canvas.start.result",level:Mi.INFO,gdocsExtra:t,sendToFemetrics:!0,femetricsExtra:{type:e}}))),started:e=>this._sendEvent({logger:"cs.gdocs.canvas.started",level:Mi.INFO,sendToFemetrics:!0,gdocsExtra:e}),creating:()=>this._sendEvent({logger:"cs.gdocs.canvas.creating",level:Mi.INFO,sendToFemetrics:!0}),showLongDocPopup:e=>this._sendEvent({logger:"cs.gdocs.canvas.longDocPopup",level:Mi.INFO,sendToFemetrics:!0,gdocsExtra:e}),showSharedDocPopup:e=>this._sendEvent({logger:"cs.gdocs.canvas.sharedDocPopup",level:Mi.INFO,sendToFemetrics:!0,gdocsExtra:e}),debugPageSearchFail:G((e=>this._sendEvent({logger:"cs.gdocs.canvas.pageSearch.debug",level:Mi.INFO,extra:{json:Ki({data:e})}}))),debugMappingFail:G((e=>this._sendEvent({logger:"cs.gdocs.canvas.mapping.debug",level:Mi.INFO,extra:{json:Ki({data:e})}}))),buildTextMapPerf:this._createPerfLogger("cs.gdocs.canvas.perf.textMap",30),findPage:this._createPerfLogger("cs.gdocs.canvas.perf.findPage",100),mappingPerf:e=>new zi((t=>{1e-4>Math.random()&&this._sendFemetricsTimer("gdocsMapping",t,"summary",{...e,mapPageCount:cr.getMapPageCount(e)})})),fullTextNotFound:G((()=>this._send("cs.gdocs.canvas.fullTextNotFound",Mi.WARN))),equationsRenderInfo:e=>{this._sendFemetricsRate("gdocsEquationsRenderInfo",e)},mapping:({mapPageCount:e,attempts:t,mappingName:n,mode:i,tableMode:r,partialRenderMode:s,renderRTL:o})=>{this._sendFemetricsRate("gdocsMapping",{mappingMode:i,mappingName:n,tableMode:r,mapPageCount:e>5?"5+":e,mappingAttempts:t.length,partialRenderMode:s,renderRTL:o,...t.reduce(((e,t,n)=>({...e,[`mapping${n}_name`]:t.name,[`mapping${n}_success`]:t.success,[`mapping${n}_mappedPages`]:"number"==typeof t.mappedPageCount&&t.mappedPageCount>5?"5+":t.mappedPageCount})),{})},["os","userOrganizationType"]),this._sendFemetricsRate("gdocsMapping.short",{mappingName:n},["os","userOrganizationType"])},mappingFailedInfo:e=>{this._sendFemetricsRate("gdocsMappingFailedInfo",e)},mappings:{advanced:{byFeatures:({mapPageCount:e,injectedFeatures:t,...n})=>{this._sendFemetricsRate("gdocs.mapping.advanced.byFeatures",{...n,..._r(t),mapPageCount:e>5?"5+":e},["os"])},textCoverage:e=>{this._sendFemetricsRate("gdocs.mapping.advanced.coverage",e)},textCoverageShort:e=>{this._sendFemetricsRate("gdocs.mapping.advanced.coverage.short",e)}}},mappingStats:e=>{this._sendFemetricsRate("gdocsMappingStats",e,["os"])},mappingPageStats:e=>{this._sendFemetricsRate("gdocsMappingPageStats",e,["os"])},mappingStatsByTextLength:e=>{this._sendFemetricsRate("gdocsMappingStatsByTextLength",e,["os"])},mappingPageStatsByTextLength:e=>{this._sendFemetricsRate("gdocsMappingPageStatsByTextLength",e,["os"])},mappingStatsByTableMode:e=>{this._sendFemetricsRate("gdocsMappingStatsByTableMode",e,["os"])},mappingPageStatsByTableMode:e=>{this._sendFemetricsRate("gdocsMappingPageStatsByTableMode",e,["os"])},mappingMinPageGapsStats:e=>{this._sendFemetricsRate("gdocsMappingMinPageGapsStats",e,["os"])},mappingMaxPageGapsStats:e=>{this._sendFemetricsRate("gdocsMappingMaxPageGapsStats",e,["os"])},mappingSearchStats:e=>{this._sendFemetricsRate("gdocsMappingSearchStats",e,["os"])},partialMappingByPageExperimentUsage:e=>{this._sendFemetricsRate("gdocsPartialMappingByPageExperimentUsage",e,["os"])},partialMapping:{error:e=>{this._sendFemetricsRate("gdocsPartialMappingErrors",e,["os"])}},atmMappingPerformance:e=>{this._sendFemetricsRate("gdocsATMMappingPerformance",e,["os"])},selectionPatched:e=>{this._sendFemetricsRate("gdocsSelectionPatched",e)},trackFatalPopup:(e,t)=>{this._sendFemetricsRate("gdocsTrackFatalPopup",{reason:(null==e?void 0:e.isBrowserExtFault)?"extension":"google",content:String(null==e?void 0:e.textContent).slice(0,10),context:t?"started":"notStarted"})},lazyLoadSidebarController:e=>{this._sendFemetricsRate("gdocsLazyLoadSidebarController",e)}},this.gmailThreadContext={warning:B(((e,t,n)=>this._sendEvent({logger:"cs.threadContext.gmail.warning",level:Mi.WARN,message:t,extra:{json:Ki({type:e,message:t,data:n})}})),(e=>e))},this.autoFix={featureToggleClick:(e,t)=>{this._sendFemetricsRate("autoFixFeatureToggleClick",{autoFixFeatureState:e,autoFixFeatureTogglePlacement:t})},attemptToApplyInParallel:e=>{this._sendFemetricsRate("autoFixAttemptToApplyInParallel",{autoAlerApplierVersion:e})},attemptToApplyInParallelError:G(((e,t)=>this._sendEvent({logger:"cs.autoFix.attemptToApplyInParallelError",level:Mi.ERROR,sendToFemetrics:!0,autoFixExtra:{domain:e,autoAlerApplierVersion:t}})))},this.autoApply={inconsistentRevertAlertError:G(((e,t)=>this._sendEvent({logger:"cs.autoApply.inconsistentRevertAlert",level:Mi.ERROR,sendToFemetrics:!0,autoApplyExtra:{domain:e,pname:t}}))),triggered:()=>{this._sendFemetricsRate("autoApplyTriggered")},cardLooked:()=>{this._sendFemetricsRate("autoApplyCardLooked")},revertClick:()=>{this._sendFemetricsRate("autoApplyRevertClick")},reverted:()=>{this._sendFemetricsRate("autoApplyReverted")},affectedByTextChange:()=>{this._sendFemetricsRate("autoApplyAffectedByTextChange")},acceptClick:()=>{this._sendFemetricsRate("autoApplyAcceptClick")},settingsClick:e=>{this._sendFemetricsRate("autoApplySettingsClick",{autoApplySettingsMenuState:e})},turnOffUntilNextView:()=>{this._sendFemetricsRate("autoApplyTurnOffUntilNextView")},integrationCreated:()=>{this._sendFemetricsRate("autoApplyIntegrationCreated")}},this.knowledgeHub={error:B(((e,t,n,i)=>this._sendEvent({logger:"cs.knowledgeHub.error",level:Mi.ERROR,message:t,extra:{json:Ki({type:e,message:t,domain:n,data:i})}})),(e=>e)),integrationCreated:(e,t)=>{this._sendFemetricsRate("knowledgeHubIntegrationCreated",{site:e,integrationMode:t})},relatedMaterialsClick:e=>{this._sendFemetricsRate("knowledgeHubRelatedMaterialsClick",{site:e})},pointPeopleClick:(e,t)=>{this._sendFemetricsRate("knowledgeHubPointPeopleClick",{site:e,pointPeopleClickType:t})},descriptionCopyClick:e=>{this._sendFemetricsRate("knowledgeHubDescriptionCopyClick",{site:e})},suggestEditButtonClick:e=>{this._sendFemetricsRate("knowledgeHubSuggestEditButtonClick",{site:e})},featureToggleClick:(e,t)=>{this._sendFemetricsRate("knowledgeHubFeatureToggleClick",{site:e,featureState:t})},bgApiError:(e,t)=>{const n="bg.knowledgeHub.error",i=ur(n,{statusCode:e,message:t});this._sendEvent({logger:n,level:Mi.ERROR,extra:{json:i},sendToFemetrics:!0})},onboardingPopupShow:(e,t)=>{this._sendFemetricsRate("knowledgeHubOnboardingPopupShow",{onboardingType:e,site:t})},onboardingNextButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingNextButtonClick",{onboardingType:e,site:t,step:n})},onboardingSkipButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingSkipButtonClick",{onboardingType:e,site:t,step:n})},onboardingCloseButtonClick:(e,t,n)=>{this._sendFemetricsRate("knowledgeHubOnboardingCloseButtonClick",{onboardingType:e,site:t,step:n})}},this._cbLog=e=>B(((t,n,i,r)=>this._sendEvent({logger:"cs.citationBuilder",level:e,citationBuilderExtra:i,message:n,extra:Ji(void 0,r)})),(e=>e)),this.citationBuilder={error:this._cbLog(Mi.ERROR),warning:this._cbLog(Mi.WARN),info:this._cbLog(Mi.INFO)},this.translateOnboarding={error:this._cbLog(Mi.ERROR),warning:this._cbLog(Mi.WARN),info:this._cbLog(Mi.INFO)},this.humanWritingReport={error:B(((e,t,n,i)=>this._sendEvent({logger:"cs.humanWritingReport.error",level:Mi.ERROR,message:t,extra:{json:Ki({type:e,message:t,domain:n,data:i})}})),(e=>e))},this.g2LoggerFactory=({integrationName:e,level:t,loggerNameSuffix:n})=>({message:i,data:r={},error:s,feedbackData:o})=>{this._sendEvent({logger:"cs.g2"+(n?`.${n}`:""),level:t,message:i,extra:{...s?Ji(r,s):{json:Ki(r)}},g2Extra:{integrationName:e,feedbackData:o}})},this.touchTypistLoggerFactory=({integrationName:e,level:t,domain:n})=>({message:i,data:r={},error:s})=>{this._sendEvent({logger:"cs.touchTypist",level:t,message:i,extra:{...s?Ji(r,s):{json:Ki(r)}},touchTypistExtra:{integrationName:e,domain:n}})},this.performance={processInput:this._createPerfLogger("cs.fluid.processInput",100),processAlerts:this._createPerfLogger("cs.fluid.processAlerts",10),processFilterChange:this._createPerfLogger("cs.fluid.processFilterChange",10),csInitialized:(e,t,n,i,r)=>{this._createPerfLogger("cs.initialized").custom({_tag:Wi.Data.Tagged.Types.csInit,domain:self.location.host,hideUserInfo:!0,loadTime:e,initTime:t,pageLoadTime:n,injectTime:i,error:r?{message:r.message,stack:r.stack}:void 0})},viewInjection:e=>{this._createPerfLogger("cs.viewInjection").custom({_tag:Wi.Data.Tagged.Types.viewInjection,...e})}},this.autocorrect={responseTime:this._createPerfLogger("cs.autocorrect.responseTime",10),predictTime:this._createPerfLogger("cs.autocorrect.predictTime",10),integrationCreated:()=>{this._sendFemetricsRate("autoCorrectIntegrationCreated")},triggered:()=>{this._sendFemetricsRate("autoCorrectTriggered")},cardLooked:()=>{this._sendFemetricsRate("autoCorrectCardLooked")},revertClick:()=>{this._sendFemetricsRate("autoCorrectRevertClick")},reverted:()=>{this._sendFemetricsRate("autoCorrectReverted")},acceptClick:()=>{this._sendFemetricsRate("autoCorrectAcceptClick")},settingsClick:e=>{this._sendFemetricsRate("autoCorrectSettingsClick",{autoCorrectSettingsMenuState:e})},turnOffUntilNextView:()=>{this._sendFemetricsRate("autoCorrectTurnOffUntilNextView")},affectedByTextChange:()=>{this._sendFemetricsRate("autoCorrectAffectedByTextChange")}},this.assistant={initTime:this._createPerfLogger("cs.assistant.initTime",1),renderTime:this._createPerfLogger("cs.assistant.renderTime",1),openTime:this._createPerfLogger("cs.assistant.openTime",1),alertManagerError:this._sendException({logger:"cs.assistant.alertManagerError",level:Mi.ERROR})},this.sharedAssistant={open:(e,t)=>{this._sendFemetricsRate("sharedAssistant.open",{domain:e,isIframe:t})}},this.proofit={availabilityQuotaError:e=>{this._sendEvent({logger:"cs.proofit.availability_quota_error",level:Mi.ERROR,extra:{json:JSON.stringify(e)}})},submitResponseError:e=>{this._sendEvent({logger:"cs.proofit.submit_response_error",level:Mi.ERROR,extra:{json:JSON.stringify(e)}})},progressError:e=>{this._sendEvent({logger:"cs.proofit.progress_error",level:Mi.ERROR,extra:{json:JSON.stringify(e)}})},progressRejected:e=>{this._sendEvent({logger:"cs.proofit.progress_rejected",level:Mi.WARN,extra:{json:JSON.stringify(e)}})}},this.oauthExchangeError=e=>{this._send("bg.oauth.exchange.error",Mi.ERROR,{message:e})},this.chipmunkAPIError=e=>{this._send("bg.chipmunk.api.error",Mi.ERROR,{message:e})},this.iterable={sideEffectGetIterableClientAccessToken:(e,t,n)=>{this._sendFemetricsRate("sideEffectGetIterableClientAccessToken",{status:e,type:t,statusCode:n})},refreshIterableClientAccessToken:(e,t)=>{this._sendFemetricsRate("refreshIterableClientAccessToken",{status:e,statusCode:t})},iterableClientAccessTokenIsNull:()=>{this._sendFemetricsRate("iterableClientAccessTokenIsNull")},iterableGetIPMByTrigger:e=>{this._sendFemetricsRate("iterableGetIPMByTrigger",{trigger:e})},iterableGetIPM:(e,t,n)=>{this._sendFemetricsRate("iterableGetIPM",{status:e,statusCode:t,retryCount:n})},iterableIPMOpen:(e,t,n,i)=>{this._sendFemetricsRate("iterableIPMOpen",{status:e,statusCode:t,retryCount:n,campaignId:i})},iterableIPMDelete:(e,t,n,i,r)=>{this._sendFemetricsRate("iterableIPMDelete",{status:e,action:t,statusCode:n,retryCount:i,campaignId:r})},iterableIPMExpired:e=>{this._sendFemetricsRate("iterableIPMExpired",{campaignId:e})},iterableIPMClick:(e,t,n,i)=>{this._sendFemetricsRate("iterableIPMClick",{status:e,statusCode:t,retryCount:n,campaignId:i})},iterableIPMClose:(e,t,n,i,r)=>{this._sendFemetricsRate("iterableIPMClose",{status:e,action:t,statusCode:n,retryCount:i,campaignId:r})},iterableCustomEvent:(e,t,n,i)=>{this._sendFemetricsRate("iterableCustomEvent",{status:e,statusCode:t,retryCount:n,campaignId:i})},iterableUserUpdate:(e,t,n)=>{this._sendFemetricsRate("iterableUserUpdate",{status:e,statusCode:t,retryCount:n})},iterableIPMFailed:e=>{this._sendFemetricsRate("iterableIPMFailed",{reason:e})},iterableIPMTrigger:(e,t,n)=>{this._sendFemetricsRate("iterableIPMTrigger",{trigger:e,isTriggerEnabled:t,isTriggerAfterRateLimit:n})},iterableIPMCooldown:e=>{this._sendFemetricsRate("iterableIPMCooldown",{campaignId:e})},iterableIPMGlobalCooldown:()=>{this._sendFemetricsRate("iterableIPMGlobalCooldown")},iterableIPMImageLoadingError:e=>{this._sendFemetricsRate("iterableIPMImageLoadingError",{campaignId:e})},logIterableApi:e=>{this._sendEvent({logger:"bg.iterable.api",level:Mi.WARN,extra:{json:e},sendToFemetrics:!1})}},this.mise={getIterableAccessToken:(e,t)=>{this._sendFemetricsRate("getIterableClientAccessToken",{status:e,statusCode:t})},logMISeApi:e=>{this._sendEvent({logger:"bg.mise.api",level:Mi.WARN,extra:{json:e},sendToFemetrics:!0})}},this.alerts={inconsistentAlertWithText:(e,t)=>{this._sendFemetricsRate("inconsistentAlertWithText",{context:e,source:t})},cannotShowInlineCard:(e,t)=>{this._sendFemetricsRate("cannotShowInlineCard",{context:e,domain:Vi(t)})},showInlineCard:e=>{this._sendFemetricsRate("showInlineCard",{domain:Vi(e)})}},this.upgradeHooks={showUpgradeHook:(e,t,n)=>{this._sendFemetricsRate("showPremiumButton",{upgradeHookName:e,upgradeHookSlot:t,upgradeHookVariant:n})},clickUpgradeHook:(e,t,n)=>{this._sendFemetricsRate("clickPremiumButton",{upgradeHookName:e,upgradeHookSlot:t,upgradeHookVariant:n})}},this.upgradeHooksExp={upgradeHookExperimentPeek:(e,t,n)=>{this._sendFemetricsRate("upgradeHookExperiment",{experimentName:e,experimentGroup:t,domain:Vi(n)})},upgradeHookFirstHiddenPremiumAlertReceived:(e,t,n)=>{this._sendFemetricsRate("upgradeHookFirstHiddenPremiumAlertReceived",{experimentName:e,experimentGroup:t,domain:Vi(n)})},upgradeHookFirstSDUIReceivedFromCAPI:(e,t,n)=>{this._sendFemetricsRate("upgradeHookFirstSDUIReceivedFromCAPI",{experimentName:e,experimentGroup:t,domain:Vi(n)})},upgradeHookFeedRendered:(e,t,n)=>{this._sendFemetricsRate("upgradeHookFeedRenderedWithUpgradeCard",{experimentName:e,experimentGroup:t,domain:Vi(n)})},upgradeHookCardShown:(e,t,n)=>{this._sendFemetricsRate("upgradeHookCardShown",{experimentName:e,experimentGroup:t,domain:Vi(n)})}},this.sendToTabFailed=(e,t)=>{this._sendSampledEvent(or,{logger:"bg.connection.sendToTabFailed",level:Mi.ERROR,message:"send message to tab emit an error",extra:Ji(e,t)})},this.debugReports={downloadSuccessfully:(e,t)=>{const n="debugReports.downloadSuccessfully",i=ur(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:Mi.INFO,extra:{json:i},sendToFemetrics:!0})},downloadTimeout:(e,t)=>{const n="debugReports.downloadTimeout",i=ur(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:Mi.WARN,extra:{json:i},sendToFemetrics:!0})},downloadError:(e,t)=>{const n="debugReports.downloadError",i=ur(n,{envContext:e,downloadEnvContext:t});this._sendEvent({logger:n,level:Mi.WARN,extra:{json:i},sendToFemetrics:!0})}},this.dialectSettingsError=e=>{this._sendException({logger:"bg.api.dialectService",level:Mi.ERROR})(e)},this.debugSelectiveLogoutGate=()=>{this._sendEvent({logger:"bg.user.debugSelectiveLogoutGate",level:Mi.INFO})},this.logoutSuccess=e=>{this._sendEvent({logger:"bg.user.logoutSuccess",level:Mi.INFO,extra:{json:JSON.stringify({reason:e})}})},this.logoutError=e=>{this._sendException({logger:"bg.user.logout",level:Mi.ERROR})(e)},this.logoutLastAuthnEventError=e=>{this._sendException({logger:"bg.user.logout.lastAuthnEvent",level:Mi.ERROR})(e)},this.serializeTransportMsgFailed=()=>{this._sendFemetricsRate("error",{logger:"bg.serialize.transport.message.failed",level:Mi.ERROR,message:"Failed to serialize rpc message"})},this.hiddenFieldInjectionFailed=()=>{this._sendFemetricsRate("error",{logger:"cs.hiddenField.injection.failed",level:Mi.ERROR,domain:Vi()})},this.skipIntegrationForNonHtmlPage=()=>{this._sendFemetricsRate("info",{logger:"cs.skip.integration.for.non.html.page",domain:mr(self.location.hostname)})},this.backendManagedStorage={error:(e,t)=>{this._sendException({logger:"bg.backendManagedStorage",level:Mi.ERROR})(t,void 0,e)},warn:(e,t)=>{const n=ur("backendManagedStorage.warn",t);this._sendEvent({logger:"bg.backendManagedStorage",level:Mi.WARN,message:e,extra:{json:n}})},info:e=>{this._sendEvent({logger:"bg.backendManagedStorage",level:Mi.INFO,message:e})}},this.cookiesAccessibility={enabled:()=>{this.sendFemetricsRate("cookiesAccessibility",{enabled:!0},["os","osVersion","userOrganizationType"])},disabled:(e,t)=>{this.sendFemetricsRate("cookiesAccessibility",{enabled:!1,reason:e},["os","osVersion","userOrganizationType"]),t&&this._sendEvent({logger:"bg.cookiesInaccessibile",level:Mi.ERROR,message:t})}},this.replacement={info:e=>{this.sendFemetricsRate("replacementInfo",e,["os","userOrganizationType"])},infoShort:e=>{this.sendFemetricsRate("replacementInfoShort",e)},infoShortExtended:e=>{this.sendFemetricsRate("replacementInfoShortExtended",e)},approximateMatched:e=>{this.sendFemetricsRate("replacementInfo.approximateMatched",e)},format:{short:e=>{this.sendFemetricsRate("replacementInfo.format.short",e)},alert:e=>{this.sendFemetricsRate("replacementInfo.format.alert",e)},style:e=>{this.sendFemetricsRate("replacementInfo.format.style",e)},hyperlinks:e=>{this.sendFemetricsRate("replacementInfo.format.hyperlinks",e)},smartChips:e=>{this.sendFemetricsRate("replacementInfo.format.smartChips",e)},footnotes:e=>{this.sendFemetricsRate("replacementInfo.format.footnotes",e)}},gOSInfo:e=>{this.sendFemetricsRate("replacementInfo.gOS",e)},gdocs:(e,t)=>{this.sendFemetricsRate("replacementInfo.gdocs",e,["os"]);for(const[n,i]of t)this.sendFemetricsRate(`replacementInfo.gdocs.byGate.${n}`,{...e,enabled:i},["os"])},gdocsByFeatures:({injectedFeatures:e,...t})=>{this.sendFemetricsRate("replacementInfo.gdocs.advanced.byFeatures",{...t,..._r(e),hasLayout:void 0},["os"])},contentEditable:e=>{this.sendFemetricsRate("replacementInfo.contentEditable",e)},sessionCount:e=>{this.sendFemetricsRate("replacementSessionCount",e)},sessionStats:e=>{this.sendFemetricsRate("replacementSessionStats",e)},sessionStatsBySource:e=>{this.sendFemetricsRate("replacementSessionStatsBySource",e)},sessionStatsByReplacementType:e=>{this.sendFemetricsRate("replacementSessionStatsByReplacementType",e)},alert:e=>{this.sendFemetricsRate("replacementInfo.alert",e)},alertExtended:e=>{this.sendFemetricsRate("replacementInfo.alertExtended",e)},alertFailedLevenshteinDistance:e=>{this.sendFemetricsRate("replacementLevenshteinDistance",e)}},this.gOS={info:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:Mi.INFO,message:t,extra:n})},warn:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:Mi.WARN,message:t,extra:n})},error:(e,t,n)=>{this._sendEvent({logger:`gOS.${e}`,level:Mi.ERROR,message:t,extra:Ji(n)})}},this.auth={manageModeTimeoutFail:e=>{this._sendFemetricsRate("auth.manageModeTimeoutFail",{message:e})}},this.connector={connected:()=>{this._sendFemetricsRate("connector.connected")},disconnected:e=>{this._sendFemetricsRate("connector.disconnected",{message:e})},connectionFailed:e=>{this._sendFemetricsRate("connector.connectionFailed",{message:e})},checkConnectionFailed:e=>{this._sendFemetricsRate("connector.checkConnectionFailed",{message:e})},handshakeFailed:e=>{this._sendFemetricsRate("connector.handshakeFailed",{message:e})},textFieldIntegrated:(e,t)=>{this._sendFemetricsRate("connector.textFieldIntegrated",{domain:e,integrationName:t})},permissionViewShow:e=>{this._sendFemetricsRate("connector.permissionViewShow",{placement:e})},permissionViewClicked:e=>{this._sendFemetricsRate("connector.permissionViewClicked",{placement:e})},permissionViewClosed:e=>{this._sendFemetricsRate("connector.permissionViewClosed",{placement:e})},permissionPromptAccepted:e=>{this._sendFemetricsRate("connector.permissionPromptAccepted",{placement:e})},permissionPromptDenied:e=>{this._sendFemetricsRate("connector.permissionPromptDenied",{placement:e})},permissionPromptFailed:(e,t)=>{this._sendFemetricsRate("connector.permissionPromptFailed",{placement:e,message:t})}},this.pageIntegrationLifecycle=e=>{this._sendFemetricsRate("pageIntegrationLifecycle",e,["os","userOrganizationType"])},this.interactionToNextPaint=(e,t)=>{this._sendFemetricsTimer("interactionToNextPaint",e,"histogram",t)}}_send(e,t,n){const i=ur(e,n);try{this._sendFelog(e,String(null==n?void 0:n.message),t,n?{json:i}:void 0)}catch(t){rr.warn(`Failed to send felog for ${e}: '${Di(t)?t.message:"undefined"}'`,t)}}_sendUsage(e,t,n){if(this._sendUsageMetrics&&this._sendUsageMetricsSamplingRatio>Math.random())try{this._sendFelogUsage(e,"",t,n)}catch(t){rr.warn(`Failed to send usage felog for ${e}: '${Di(t)?t.message:"undefined"}'`,t)}}_sendSampled(e,t,n,i){e>Math.random()&&this._send(t,n,i)}_sendSampledEvent(e,t){e>Math.random()&&this._sendEvent(t)}_sendMetric(e,t){this._sendFelogMetricEvent({metricName:e,data:t})}sendCrashLogs(e,t){try{this._sendFelogCrashLogs(t)}catch(t){rr.warn(`Failed to send crash data data for ${e}: '${Di(t)?t.message:"undefined"}'`,t)}}setUserInfo(e){this._setUserInfo(e)}setContainerId(e){this._setContainerId(e)}enableDataSharing(){this._enableDataSharing()}notificationShown(e){this._send("cs.notification.show",Mi.INFO,{type:e})}notificationHide(e){this._send("cs.notification.hide",Mi.INFO,{type:e})}capiFinishedAndChecking(e){const t=Vi();this._sendFemetricsRate("capiFinishedAndChecking",{domain:t,disconnect:e})}capiRevisionUnfinished(e){const t=Vi();this._sendFemetricsRate("capiRevisionUnfinished",{domain:t,disconnect:e})}}var hr,pr;function gr(e){return e?"Failed to fetch"===e?hr.FAILED_FETCH:"Could not establish connection. Receiving end does not exist."===e||e.includes("No frame with id")||e.includes("No tab with id")||e.startsWith("Frame with ID")&&e.endsWith("was removed.")?hr.TAB_NOT_EXISTS:e.startsWith("IO error:")?hr.IO_ERROR:"The browser is shutting down."===e?hr.BROWSER_SHUTTING_DOWN:"No available storage method found."===e?hr.NO_STORAGE_METHOD_FOUND:"this._firefox is undefined"===e?hr.FIREFOX_UNDEFINED:"Load failed"===e?hr.LOAD_FAILED:"Unexpected user type for login reminder"===e?hr.UNEXPECTED_USER_TYPE:hr.OTHER:hr.EMPTY}function fr(e){return e?e.includes("executing a cancelled action")?pr.ACTION_CANCELED:"Script error."===e?pr.SCRIPT_ERROR:"object unsubscribed"===e?pr.OBJECT_UNSUBSCRIBED:e.includes("is not a function")?pr.INVALID_FUNCTION:pr.OTHER:pr.EMPTY}function mr(e){const t=t=>e.endsWith(t),n=Vi(e);if("other"===n){const e=["pubmatic.com","quantumdex.io","gumgum.com","aniview.com","amazon-adsystem","nextmillmedia.com","doubleclick.net","adsrvr.org","adnxs.com","msn.com"].find(t);if(e)return e}return n}function _r(e){return{strikethrough:e.useStrikethroughFiltering,codeBlocks:e.useCodeBlockFiltering}}!function(e){let t;!function(e){e.fromPartial=e=>e}(t=e.Mock||(e.Mock={}))}(dr||(dr={})),function(e){e.FAILED_FETCH="FailedToFetch",e.TAB_NOT_EXISTS="TabNotExists",e.IO_ERROR="IOError",e.BROWSER_SHUTTING_DOWN="BrowserShuttingDown",e.FIREFOX_UNDEFINED="FirefoxUndefined",e.LOAD_FAILED="LoadFailed",e.UNEXPECTED_USER_TYPE="UnexpectedUserType",e.NO_STORAGE_METHOD_FOUND="NoStorageMethodFound",e.EMPTY="Empty",e.OTHER="Other"}(hr||(hr={})),function(e){e.ACTION_CANCELED="ActionCanceled",e.SCRIPT_ERROR="ScriptError",e.OBJECT_UNSUBSCRIBED="ObjectUnsubscribed",e.INVALID_FUNCTION="InValidFunction",e.EMPTY="Empty",e.OTHER="Other"}(pr||(pr={}));Cn.create("lib.tracking.logger");let br;function vr(){if(!br){const e=kn().telemetryCallProvider;br=new dr(e.sendFelog,e.sendFelogUsageEvent,e.setUserInfo,e.setContainerId,we().appConfig.felog.sendUsageMetrics,function(){we().appConfig.felog.sendPerfMetricsType,0;return}(),e.sendFelogEvent,e.sendFelogCrashLogs,void 0,(()=>{var t;return null===(t=e.enableDataSharing)||void 0===t?void 0:t.call(e)}),void 0,e.sendFelogMetricEvent,e.sendFemetricsRate,e.startFemetricsTimer,e.endFemetricsTimer,e.sendFemetricsTimer)}return br}class yr{constructor(){this._storage=this._storage||{}}get _storage(){return self.__CS_SHARE_STORAGE__}set _storage(e){self.__CS_SHARE_STORAGE__=e}clean(){this._storage={}}set(e,t){this._storage[e]=t}get(e){return this._storage[e]}getOnce(e){const t=this._storage[e];return this.remove(e),t}remove(e){delete this._storage[e]}}var wr,xr,Er,Cr;!function(e){e.syncDevtoolsInitialStateWithTab="syncDevtoolsInitialStateWithTab"}(wr||(wr={})),function(e){class t extends Error{constructor(e,t=1e3){super(`SafePromiseError: ${String(e)}`),this.stack=(super.stack||"").slice(t)}}function n(e){return e.catch((e=>e instanceof Error&&!e.stack?Promise.reject(new t(e.message)):Promise.reject(e)))}e.fromPromise=n,e.fromAsync=function(e){return(...t)=>n(e(...t))},e.noop=e.fromPromise(Promise.resolve()),e.create=function(e){return n(new Promise(e))},e.sync=function(e){return n(new Promise(((t,n)=>t(e()))))},e.createCompletionSource=I,e.delay=k}(xr||(xr={}));class Sr{constructor(e,t){this._transport=e,this._log=t,this._calls=new Map,this._sub=this._transport.inbound.subscribe((e=>{var t;const n=this._calls.get(e.id);if(n)try{"err"in e?n.reject(e.err):n.resolve(e.res)}finally{this._calls.delete(e.id)}else null===(t=this._log)||void 0===t||t.warn(`received rpc call response for unregistered call ${e.id}`)})),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_handleCall(e,t){let n=H.create();for(;this._calls.has(n);)n=H.create();const i=xr.createCompletionSource();return this._calls.set(n,i),this._transport.outbound({id:n,method:e,args:t}),i.promise}dispose(){this._sub.unsubscribe()}}class Tr{constructor(e,t,n=H.create(),i=e){this._rpcMessageName=e,this._message=t,this._clientId=n,this._inboundMessageName=i,this.inbound=new y((e=>{const t=t=>{t.clientId===this._clientId&&e.next(t.data)};return this._message.on(this._inboundMessageName,t),()=>this._message.off(this._inboundMessageName,t)})),this.outbound=e=>{this._message.sendBackground(this._rpcMessageName,{clientId:this._clientId,data:e})}}}class kr extends Sr{constructor(e){super(new Tr("cs-to-bg-rpc-1557421403805",e))}}function Ir(e){return"tunnel"!==e.tag}!function(e){e.rpcLegacyMessageName="cs-to-bg-rpc-1587687052565",e.rpcLegacyObservableName="cs-to-bg-observable-rpc-1587687052565"}(Er||(Er={})),function(e){e.isSubscribe=e=>"action"in e.data&&"subscribe"===e.data.action,e.isUnsubscribe=e=>"action"in e.data&&"unsubscribe"===e.data.action,e.isDispose=e=>"action"in e.data&&"dispose"===e.data.action,e.isPong=e=>"pong"in e.data,e.isPing=e=>"ping"in e.data,e.isObservableResult=e=>"subscribableId"in e}(Cr||(Cr={}));const Rr=Symbol();var Fr,Ar;function Or(e){return e instanceof y?e:new y((t=>e.subscribe(t)))}!function(e){e.measure=e=>t=>new y((n=>t.subscribe((t=>e((()=>n.next(t)))),(e=>n.error(e)),(()=>n.complete())))),e.using=(e,t)=>function(e,t){return new y((function(n){var i,r;try{i=e()}catch(e){return void n.error(e)}try{r=t(i)}catch(e){return void n.error(e)}var s=(r?Mn(r):Zn).subscribe(n);return function(){s.unsubscribe(),i&&i.unsubscribe()}}))}(e,t),e.doNothing=e=>e}(Fr||(Fr={}));class Nr{constructor(e,t,n=Cn.create("GenericObservableRpcClient"),i){this._transport=e,this._observableTransport=t,this._log=n,this._serverId=i,this._calls=new Map,this._subscribeRelatedCalls=new Map,this._observables=new Map,this._subscribers=new Map,this._transportSubscription=Or(this._transport.inbound).pipe(Ue(Ir)).subscribe((e=>{this._processResponse(e)})),this._observableTransportSubscription=Or(this._observableTransport.inbound).pipe(Ue(Ir)).subscribe((e=>{this._processObservableMessage(e)})),this.api=new Proxy({},{get:(e,t)=>"then"===t?void 0:(...e)=>this._handleCall(t,e)})}_processResponse(e){const t=this._calls.get(e.id);if(t)try{if("err"in e)t.reject(e.err);else if(Cr.isObservableResult(e))try{const n=new y((t=>this._createSubscribeHandler(e.subscribableId,t)));this._observables.set(e.subscribableId,n),t.resolve(n)}catch(t){this._observables.delete(e.subscribableId)}else t.resolve(this.transformResult(e.res))}finally{this._calls.delete(e.id)}else this._log.warn(`received rpc call response for unregistered call ${e.id}`)}transformResult(e){return e}_processObservableMessage(e){if("subscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id)}else this._log.warn(`received rpc call subscribed response for unregistered subscribe call ${e.id}`)}else if("unsubscribed"in e){const t=this._subscribeRelatedCalls.get(e.id);if(t)try{t.resolve()}finally{this._subscribeRelatedCalls.delete(e.id),this._subscribers.delete(e.id)}else this._log.warn(`received rpc call unsubscribed response for unregistered unsubscribe call ${e.id}`)}else if("next"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.next(e.next):this._log.warn(`received observable next message for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("complete"in e)try{const t=this._subscribers.get(e.subscriptionId);t?(t.subscriber.complete(),this._subscribers.delete(e.subscriptionId)):this._log.warn(`received observable complete for unregistered subscription ${e.subscriptionId}`)}catch(t){this._subscribers.delete(e.subscriptionId)}else if("err"in e)try{const t=this._subscribers.get(e.subscriptionId);t?t.subscriber.error(e.err):this._log.warn(`received observable error for unregistered subscription  ${e.subscriptionId}`)}finally{this._subscribers.delete(e.subscriptionId)}else if("subErr"in e){const t=this._subscribeRelatedCalls.get(e.id);try{const n=this._subscribers.get(e.id);n?n.subscriber.error(e.subErr):this._log.warn(`received subscription error response for unregistered call ${e.id}`)}finally{t&&(t.reject(e.subErr),this._subscribeRelatedCalls.delete(e.id)),this._observables.delete(e.subscribableId),this._subscribers.delete(e.id)}}else if("ping"in e)try{this._observables.get(e.ping)?this._observableTransport.outbound({pong:e.ping}):this._log.warn(`received ping for unregistered observable ${e.ping}`)}finally{}}_handleCall(e,t){let n=H.create();for(;this._calls.has(n);)n=H.create();const i=xr.createCompletionSource();this._calls.set(n,i);const r=t.map((e=>{return t=e,Boolean(t)&&t._tag===Rr?e.toJSON():e;var t}));return this._transport.outbound({id:n,method:e,args:r,serverId:this._serverId}),i.promise}_createSubscribeHandler(e,t){let n=H.create();for(;this._subscribeRelatedCalls.has(n);)n=H.create();const i=xr.createCompletionSource();return this._subscribeRelatedCalls.set(n,i),this._observableTransport.outbound({id:n,subscribableId:e,action:"subscribe"}),this._subscribers.set(n,{subscribableId:e,subscriber:t}),()=>{this._handleUnsubscribe(n,e)}}_handleUnsubscribe(e,t){let n=H.create();for(;this._subscribeRelatedCalls.has(n);)n=H.create();const i=xr.createCompletionSource();return this._subscribeRelatedCalls.set(n,i),this._observableTransport.outbound({id:n,subscriptionId:e,subscribableId:t,action:"unsubscribe"}),this._subscribers.delete(e),i.promise}dispose(){for(const e of this._observables.keys())this._observableTransport.outbound({id:H.create(),subscribableId:e,action:"dispose"});this._observables.clear(),this._transportSubscription.unsubscribe(),this._observableTransportSubscription.unsubscribe(),this._calls.clear(),this._subscribeRelatedCalls.clear()}}class Pr extends Nr{constructor(e){super(new Tr(Er.rpcLegacyMessageName,e),new Tr(Er.rpcLegacyObservableName,e))}}!function(e){e.rpcLegacyMessageName="cs-to-bg-static-capi-rpc-1668544923207",e.rpcLegacyObservableName="cs-to-bg-static-capi-observable-rpc-1668544923207"}(Ar||(Ar={}));class Lr extends Nr{constructor(e){super(new Tr(Ar.rpcLegacyMessageName,e),new Tr(Ar.rpcLegacyObservableName,e))}}class Mr{constructor(e){this._baseApi=e,this._log=Cn.create("BaseMessageService"),this._initializedListenerEvents=new Set,this._listeners={},this._logError=e=>{this._log.error(`${Mr.name} handle an error: ${e.message}`)},this.on=(e,t)=>{var n;this._listeners[e]=null!==(n=this._listeners[e])&&void 0!==n?n:[],this._listeners[e].push(t),this._initializedListenerEvents.has(e)||(this._initializedListenerEvents.add(e),this._baseApi.listen(e,((...t)=>{var n;const i=null!==(n=this._listeners[e])&&void 0!==n?n:[];for(const e of i)try{e(...t)}catch(e){this._logError(e)}})))},this.once=(e,t)=>{const n=(...i)=>{this.off(e,n);try{t(...i)}catch(e){this._logError(e)}};this.on(e,n)},this.off=(e,t)=>{if(!this._listeners[e])return;const n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1),0===this._listeners[e].length&&delete this._listeners[e]}}}class Dr extends Mr{constructor(e){super(e),this._api=e,this.sendBackground=(e,t)=>{try{this._api.broadcastBackground(e,t)}catch(e){this._logError(e)}}}}const Ur=Rn(3);var Gr,Br,jr;!function(e){e.default="default",e.fallback="fallback"}(Gr||(Gr={})),function(e){e.bgHistoryLogs="bgHistoryLogs",e.popupHistoryLogs="popupHistoryLogs",e.csHistoryLogs="csHistoryLogs"}(Br||(Br={}));class Wr{constructor(e,t,n,i=Cn.create("DebugReportsGetterImpl")){this._envName=e,this._getLogsDefault=t,this._getLogsFallback=n,this._log=i}_getLogMessage(e,t){return t===Gr.fallback?`${e} from ${t}`:e}async _getLogs(e,t,n){const i=kn().context;this._log.debug(this._getLogMessage(`start get ${this._envName} logs`,t));try{const r=await Promise.race([e(),k(n).then((()=>{vr().debugReports.downloadTimeout(i,this._envName),this._log.warn(this._getLogMessage(`get ${this._envName} logs timeout`,t))}))]);return r?(vr().debugReports.downloadSuccessfully(i,this._envName),this._log.debug(this._getLogMessage(`successfully get ${this._envName}`,t)),r.map((e=>({...e,loggerName:`${this._envName}.${e.loggerName}`})))):void this._log.warn(this._getLogMessage(`${this._envName} logs is not defined`,t))}catch(e){return vr().debugReports.downloadError(i,this._envName),void this._log.warn(this._getLogMessage(`fail to get ${this._envName} logs`,t),e)}}get envName(){return this._envName}async getLogs(){return await this._getLogs(this._getLogsDefault,Gr.default,Ur)||(this._getLogsFallback?await this._getLogs(this._getLogsFallback,Gr.fallback,1e3):void 0)}static getLogsFromSessionStorageFallbackGetter(e,t=(()=>kn().browserApi.sessionStorage)){return()=>t().get(e).then((t=>{const n=t[e];return Array.isArray(n)?n.map((e=>{try{return JSON.parse(e)}catch(t){return{level:hn.WARN,loggerName:Wr.name,message:"Cannot parsed backup data!",timestamp:e.timestamp,data:{json:e},exeption:t}}})):void 0}))}}!function(e){e.UPDATE_BACKUP_STORAGE_TIMEOUT=Rn(5),e.BACKUP_STORAGE_LOGS_CAPACITY=100}(jr||(jr={}));class Hr{constructor(e,t,n,i=j,r=Cn.create(Hr.name,{skipPushToHistory:!0})){this._sessionStorage=e,this._key=t,this._skipSetLogs=n,this._throttle=i,this._log=r,this.get=()=>this._get(),this._get=Wr.getLogsFromSessionStorageFallbackGetter(this._key,(()=>this._sessionStorage)),this.set=this._throttle(jr.UPDATE_BACKUP_STORAGE_TIMEOUT,this._set.bind(this))}async _set(e){var t,n;if(await(null===(t=this._skipSetLogs)||void 0===t?void 0:t.call(this)))return void this._log.trace("set logs is skipped");const i=null===(n=e(jr.BACKUP_STORAGE_LOGS_CAPACITY))||void 0===n?void 0:n.slice(-jr.BACKUP_STORAGE_LOGS_CAPACITY).map((e=>{try{return JSON.stringify(e)}catch(t){return this._log.debug("cannot parse properly backup storage data",t,e),JSON.stringify({level:hn.WARN,loggerName:e.loggerName,message:e.message,timestamp:e.timestamp,exception:`cannot parse properly backup storage data: ${t.message}`})}}));return this._sessionStorage.set({[this._key]:i}).catch((e=>{this._log.warn(`error: on set ${this._key} logs to backup storage`,e),this._sessionStorage.remove(this._key).catch((e=>this._log.warn(`error: on remove ${this._key} logs from backup storage`,e)))}))}}const Vr="tracking/RPC";class $r extends Tn{static getInstance(){if(void 0===this._instanceCSShared)throw new Error("nonBG Env not inited yet");return this._instanceCSShared}static get isInited(){return void 0!==this._instanceCSShared}static initShared(e){if(void 0!==this._instanceCSShared)throw new Error("nonBG Env already inited");this._instanceCSShared=e,Tn.initShared(e)}}function zr(){return $r.getInstance()}class qr extends $r{static get isInited(){return void 0!==this._instance}static getInstance(){if(void 0===this._instance)throw new Error("cs Env not inited yet");return this._instance}static init(e){if(void 0!==this._instance)throw new Error("cs Env already inited");const t=new qr(e);return this._instance=t,$r.initShared(t),t.browserApi.message.start&&t.browserApi.message.start(),t}constructor(e){super({browser:e.browser,extensionType:e.extensionType,deploymentType:e.deploymentType,context:"cs",historyLoggerExtraArgs:{enableHistoryLoggerUntil:e=>{var t;null===(t=this.bgRpc)||void 0===t||t.api.enableHistoryLoggerUntil(e)},disableHistoryLogger:()=>{var e;null===(e=this.bgRpc)||void 0===e||e.api.disableHistoryLogger()},backupStorage:new Hr(e.browserApi.sessionStorage,Br.csHistoryLogs,(async()=>{var t,n;return e.skipWriteLogsToBackupStorage||document.hidden||ke()||!await(null===(t=this.bgRpc)||void 0===t?void 0:t.api.isGateEnabled("SessionStorageLogsBackup"))||!await(null===(n=this.bgRpc)||void 0===n?void 0:n.api.isCurrentTabFocused())})),getExperimentClient:()=>this.experimentClient}}),this.browserApi=e.browserApi,this.message=new Dr(e.browserApi.message),this.bgRpc=new kr(this.message),this.experimentClient=e.createExperimentClient(this.bgRpc),this.csShareStorage=new yr,this.capiBgRpc=new Pr(this.message),this.staticCapiBgRpc=new Lr(this.message),this.telemetryCallProvider=function(e,t=Cn.create("lib.tracking.call.transport")){return new Proxy({},{get:(n,i)=>{if("enableDataSharing"!==i)return(...n)=>{Promise.race([e.api.trackCall(Vr,[i,...n]).then((()=>null)),k(1e4).then((()=>new Error("timeout call through bg page")))]).then((e=>e&&t.warn("tracking call timeout",e))).catch((e=>t.warn("tracking call failed, reason:",e)))}}})}(this.bgRpc),this.productMetricsCSClient=function(e,t=Cn.create("lib.tracking.ProductMetricsClient.transport"),n=1e4){return new Proxy({},{get:(i,r)=>(...i)=>Promise.race([e.api.trackProductMetric(i).then((()=>null)),k(n,new Error("timeout call through bg page"))]).catch((e=>(t.warn("trackProductMetric call failed, reason:",e),e)))})}(this.bgRpc)}}function Kr(){return qr.getInstance()}var Jr,Yr,Xr,Zr;!function(e){let t;!function(e){e.disableOnTab="disableOnTab",e.reloadTab="reloadTab",e.showOnboardingDialog="showOnboardingDialog",e.hideGdocsSigninPopupMessage="hideGdocsSigninPopupMessage",e.sendCsLogsToPopup="sendCsLogsToPopup",e.downloadDebugReportsFromCS="downloadDebugReportsFromCS"}(t=e.Kind||(e.Kind={}))}(Jr||(Jr={})),function(e){let t;!function(e){e.sendCsLogs="sendCsLogs"}(t=e.Kind||(e.Kind={}))}(Yr||(Yr={})),function(e){const t=Cn.create("Reports");function n(e){var t;const n=null===(t=self.document)||void 0===t?void 0:t.createElement("a");n.href="data:application/octet-stream,"+encodeURIComponent(function(e){const t=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};return[["Level","Logger","Timestamp","Message"].join("\t"),...e.map((e=>{const n=[e.level,e.loggerName,new Date(e.timestamp).toISOString(),e.message];return e.data&&n.push(t(e.data)),e.exception&&n.push(t(e.exception)),n.join("\t")}))].join("\n")}(e)),n.target="_blank",n.download="grammarly-logs.tsv",n.click()}async function i(e){if(t.debug("start download debug reports"),!zr().historyLogsService.isHistoryEnabled())return t.debug("debug reports feature is not enabled"),alert("Logging is not enabled");if(!self.confirm('Click on "OK," will attempt to download a file with the information needed to investigate the issue you are experiencing. This archive may include domains you have recently visited and the text from the document you are typing in. To minimize the amount of sensitive information you share with us, we recommend that you (1) open a new browser window, (2) visit only the website where you can reproduce this issue, and (3) type in a document that includes only text you are comfortable sharing. For more details, see our Privacy Policy (https://www.grammarly.com/privacy-policy).'))return;t.debug("confirm download debug reports");const i=[];e.sort((e=>e.envName===zr().context?1:-1));try{await(s=In,o=r(),Promise.race([A(s),o]))}catch(e){t.warn("cannot get latest app state",e)}var s,o;for(const t of e){const e=await t.getLogs();i.push(...null!=e?e:[])}i.sort(((e,t)=>e.timestamp-t.timestamp)),n(i)}async function r(){t.info("latest experiments state",await zr().bgRpc.api.getExperimentTreatment()),t.info("latest storage state",await zr().browserApi.preferences.getAll()),t.info("browser info",pe())}e.download=i,e.initKeyboardShortcutHandler=function(e){return S(self,"keydown").pipe(Ue((e=>"KeyS"===e.code&&e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)))).subscribe((()=>{i(e)}))},e.logLatestState=r}(Xr||(Xr={})),function(e){function t(e){const t=()=>{e.bgRpc.api.sendToPopup({kind:Yr.Kind.sendCsLogs,option:{logs:e.historyLogsService.getLogs(),isIframeIntegration:ke()}})};return e.message.on(Jr.Kind.sendCsLogsToPopup,t),{dispose(){e.message.off(Jr.Kind.sendCsLogsToPopup,t)}}}function n(e){return[new Wr("bg",(()=>e.bgRpc.api.getBGLogs()),Wr.getLogsFromSessionStorageFallbackGetter(Br.bgHistoryLogs)),new Wr("cs",(()=>Promise.resolve(e.historyLogsService.getLogs())),Wr.getLogsFromSessionStorageFallbackGetter(Br.csHistoryLogs))]}function i(e){return e.message.on(Jr.Kind.downloadDebugReportsFromCS,s),{dispose(){e.message.off(Jr.Kind.sendCsLogsToPopup,s)}}}function r(e){const t=ke()?new h:Xr.initKeyboardShortcutHandler(n(e));return{dispose(){t.unsubscribe()}}}function s(){const e=n(Kr());Xr.download(e)}e.initSendLogsToPopupHandler=t,e.initDownloadDebugReportsListener=i,e.initKeyboardShortcutHandler=r,e.initListeners=function(e){const n=[t(e),r(e),i(e)];return{dispose(){n.forEach((e=>{e.dispose()}))}}},e.download=s}(Zr||(Zr={}));function Qr(e,t,n,i,r,s,o,a,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return r(i(n(t(e))));case 6:return s(r(i(n(t(e)))));case 7:return o(s(r(i(n(t(e))))));case 8:return a(o(s(r(i(n(t(e)))))));case 9:return c(a(o(s(r(i(n(t(e))))))));default:for(var l=arguments[0],u=1;u<arguments.length;u++)l=arguments[u](l);return l}}var es=1,ts=function(){return Promise.resolve()}(),ns={};function is(e){return e in ns&&(delete ns[e],!0)}var rs,ss=function(e){var t=es++;return ns[t]=!0,ts.then((function(){return is(t)&&e()})),t},os=function(e){is(e)},as=function(e){function n(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return t(n,e),n.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=ss(t.flush.bind(t,null))))},n.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);0===t.actions.length&&(os(n),t.scheduled=void 0)},n}(je),cs=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,i=-1,r=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++i<r&&(e=n.shift()));if(this.active=!1,t){for(;++i<r&&(e=n.shift());)e.unsubscribe();throw t}},n}(He),ls=new cs(as);function us(e,t,n){return n?us(e,t).pipe(x((function(e){return c(e)?n.apply(void 0,e):n(e)}))):new y((function(n){var r,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(s)}catch(e){return void n.error(e)}if(i(t))return function(){return t(s,r)}}))}function ds(e){var t=e.error;e.subscriber.error(t)}rs||(rs={});var hs=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e,t;switch(this.kind){case"N":return oi(this.value);case"E":return e=this.error,new y(t?function(n){return t.schedule(ds,0,{error:e,subscriber:n})}:function(t){return t.error(e)});case"C":return Qn()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();function ps(e,t){return void 0===t&&(t=0),function(n){return n.lift(new gs(e,t))}}var gs=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new fs(e,this.scheduler,this.delay))},e}(),fs=function(e){function n(t,n,i){void 0===i&&(i=0);var r=e.call(this,t)||this;return r.scheduler=n,r.delay=i,r}return t(n,e),n.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},n.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new ms(e,this.destination)))},n.prototype._next=function(e){this.scheduleMessage(hs.createNext(e))},n.prototype._error=function(e){this.scheduleMessage(hs.createError(e)),this.unsubscribe()},n.prototype._complete=function(){this.scheduleMessage(hs.createComplete()),this.unsubscribe()},n}(f),ms=function(){return function(e,t){this.notification=e,this.destination=t}}();var _s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new bs(e),i=Qe(this.notifier,new Xe(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n},e}(),bs=function(e){function n(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return t(n,e),n.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},n.prototype.notifyComplete=function(){},n}(Ze);function vs(e,t){return Bn(e,t,1)}function ys(e){return function(t){return 0===e?Qn():t.lift(new ws(e))}}var ws=function(){function e(e){if(this.total=e,this.total<0)throw new Xn}return e.prototype.call=function(e,t){return t.subscribe(new xs(e,this.total))},e}(),xs=function(e){function n(t,n){var i=e.call(this,t)||this;return i.total=n,i.count=0,i}return t(n,e),n.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},n}(f),Es=n(61986);const Cs={CheetahFetchSkills:new Es.Cc("cheetah_fetch_skills"),PlagiarismAiDetector:new Es.Cc("plagiarism_ai_detector_cheetah_web"),AiStudioInlineWritingGuidelines:new Es.Cc("wricomp_inline_writing_guidelines","enabled"),AiStudioEssayRubric:new Es.Cc("wricomp_essay_rubric","enabled"),CheetahFeatureFlagShowPeerFeedbackAction:new Es.Cc("wricomp_show_peer_feedback_action","enabled")};new Es.KS("smart_plagiarism_uphook",["control","test"]),new Es.KS("grammarly_pro_m3_ga_v1",["control","test"]),new Es.KS("premium_free_trial_eu_uk",["control","test"]),new Es.KS("long_form_premium_feed",["control","test"]),new Es.KS("in_product_discount_m1",["control","test"]),new Es.KS("ren_7d_win_back_discount",["control","test"]);const Ss={TrackINPInCheckScript:new(n(39406).Gate)("extension_track_inp_in_check_script")},Ts={...Cs,...Ss,StandWithUkraineGrammarlySuspended:new Es.Cc("standWithUkraineExtensionSuspended","enabled"),StandWithUkraineTheme:new Es.Cc("standWithUkraineExtensionTheme","enabled"),RtfSnippets:new Es.Cc("rtf_snippets","enabled"),LoadSnippetsViaGoldenGate:new Es.Cc("load_snippets_via_goldengate","enabled"),LazyLoadSnippetsSearchTrees:new Es.Cc("extensions_lazy_load_snippets","enabled"),StudentsOFEGdocs:new Es.Cc("citations_rollout_gdocs","enabled"),StudentsOFEInternal:new Es.Cc("citations_rollout_internal","enabled"),CitationBuilder:new Es.Cc("citation_builder","enabled"),CitationBuilderEditing:new Es.Cc("citation_builder_editing","enabled"),CitationBuilderManualInvocation:new Es.Cc("citation_builder_manual_invocation","enabled"),IPMExtensionRelease:new Es.Cc("ipm_extension_release","enabled"),ExtensionDebugReport:new Es.Cc("extension_debug_report","enabled"),SduiBulkDismiss:new Es.Cc("sdui_bulk_dismiss","enabled"),TrackSiblingDataForGMail:new Es.Cc("extension_track_sibling_data_for_gmail","enabled"),FixGmailHouseCat:new Es.Cc("gmail_housecat_memory_leak_fix","enabled"),KnowledgeHubGdocs:new Es.Cc("knowledge_hub_gdocs","enabled"),KnowledgeHubGmail:new Es.Cc("knowledge_hub_gmail","enabled"),KnowledgeHubSlack:new Es.Cc("knowledge_hub_slack","enabled"),KnowledgeHubWord:new Es.Cc("windowsextension_knowledge_hub_word","enabled"),SlackUseInsertHTML:new Es.Cc("extension_slack_use_insert_html"),KeyboardShortcut:new Es.Cc("extension_keyboard_shortcut","enabled"),EnableFirstVisibleHighlightTracking:new Es.Cc("extension_track_first_visible_highlight","enabled"),KnowledgeHubCheetahIntegration:new Es.Cc("gbgo_knowledge_share_web","enabled"),GdocsMultiColumnAllCombinations:new Es.Cc("gdocs_canvas_multicolumn_compare_all_combination","enabled"),GdocsRefactorDomQuery:new Es.Cc("gdocs_refactor_dom_query","enabled"),GDocsUseStackToStoreParentClip:new Es.Cc("gdocs_use_stack_to_store_parent_clip","enabled"),GdocsReturnAllRects:new Es.Cc("gdocs_return_all_rects","enabled"),SuggestionDeliveryAutoApply:new Es.Cc("suggestion_delivery_autoapply_extension_gate_23q3","enabled"),IndianEnglishDialect:new Es.Cc("indian_english_dialect","enabled"),IndianEnglishDialectInternal:new Es.Cc("indian_english_dialect_internal","enabled"),ConstructableStylesheets:new Es.Cc("constructable_stylesheets","enabled"),CheetahFeatureFlagCompose:new Es.Cc("cheetah_extension_feature_flag_compose","enabled"),CheetahFeatureFlagRewrite:new Es.Cc("cheetah_extension_feature_flag_rewrite","enabled"),CheetahFeatureFlagInlineRewrite:new Es.Cc("cheetah_extension_feature_flag_inline_rewrite","enabled"),CheetahFeatureFlagMagicRewrite:new Es.Cc("cheetah_extension_feature_flag_magic_rewrite","enabled"),CheetahFeatureFlagQuickReply:new Es.Cc("cheetah_extension_feature_flag_quick_reply","enabled"),CheetahFeatureFlagInlineQuickReply:new Es.Cc("cheetah_extension_feature_flag_inline_quick_reply","enabled"),CheetahFeatureFlagGDocsInlineRewrites:new Es.Cc("cheetah_extension_feature_flag_gdocs_inline_rewrites","enabled"),CheetahFeatureFlagOnboarding:new Es.Cc("cheetah_extension_feature_flag_onboarding","enabled"),CheetahStudentsOnboarding:new Es.Cc("ggo_students_onboarding","enabled"),CheetahStudentBTS:new Es.Cc("ggo_student_bts","enabled"),CheetahStudentPromptsInternal:new Es.Cc("ggo_student_prompts_internal","enabled"),CheetahFeatureFlagComplianceGButton:new Es.Cc("wri_comp_compliance_gbutton","enabled"),CheetahFeatureFlagInlineWritingGuidelines:new Es.Cc("wricomp_inline_writing_guidelines","enabled"),SkipAutoScrollForZeroHeightViewport:new Es.Cc("extension_skip_autoscroll_zero_height_viewport","enabled"),GDocsTextCorruptionValidateTextBeforeAlertApply:new Es.Cc("gDocs_tc_validate_text_before_alert_apply","enabled"),GDocsGetFormatMap:new Es.Cc("gdocs_get_format_map","enabled"),NonGDocsGetFormatMap:new Es.Cc("extension_get_format_map","enabled"),SupportMoreStyle:new Es.Cc("extension_support_more_style","enabled"),GDocsUseVisibleLayoutRoot:new Es.Cc("gdocs_use_visible_layout_root"),GDocsUnloadIfInitArgsChanged:new Es.Cc("gdocs_unload_when_init_args_changed"),GDocsDetectDocModeChangeByLayoutRootListener:new Es.Cc("gdocs_detect_dom_mode_change_by_layout_root"),GDocsWaitForModeIndicator:new Es.Cc("gdocs_wait_for_mode_indicator"),Iterable:new Es.Cc("iterable_gate_ext","enabled"),IterableRefreshKeyAndToken:new Es.Cc("iterable_gate_refresh_key_and_token_ext","enabled"),IterableRefreshKeyAndTokenWhenNull:new Es.Cc("iterable_refresh_key_and_token_when_null_ext","enabled"),IterableGDocsSidebarInitializedTrigger:new Es.Cc("iterable_gate_gdoc_sidebar_initialized_ext","enabled"),IterableUserSessionInitializedTrigger:new Es.Cc("iterable_gate_user_session_initialized_ext","enabled"),NonGDocsFirstAlertLookedAtTrigger:new Es.Cc("iterable_gate_non_gdocs_first_alert_looked_at_ext","enabled"),IterablePauseInTypingTrigger:new Es.Cc("iterable_gate_pause_in_typing_ext","enabled"),IterableEngagedByAlertsAcceptedTrigger:new Es.Cc("iterable_gate_alerts_accepted_ext","enabled"),IterableTriggerFromCustomPayload:new Es.Cc("iterable_trigger_from_custom_payload_ext","enabled"),IterableTargetDomain:new Es.Cc("iterable_target_domain_ext","enabled"),IterableMetrics:new Es.Cc("iterable_metrics_ext","enabled"),IterableTriggerMetrics:new Es.Cc("iterable_trigger_metrics_ext","enabled"),IterableLogs:new Es.Cc("iterable_logs_ext","enabled"),IterablePersistClientAccessTokens:new Es.Cc("iterable_persist_client_access_tokens_ext","enabled"),IterableCooldownAndImpressions:new Es.Cc("iterable_cooldown_and_retry_ext","enabled"),IterableGlobalCooldown:new Es.Cc("iterable_global_cooldown_ext","enabled"),IterableClientAccessTokenFromMISe:new Es.Cc("iterable_client_access_token_from_mise_ext","enabled"),IterableIframePositionFix:new Es.Cc("iterable_ipm_viewport_fix_ext","enabled"),SessionStorageLogsBackup:new Es.Cc("session_storage_logs_backup","enabled"),SduiPopoverNotifications:new Es.Cc("sdui_popover_manager_ext","enabled"),TextChangeBufferUseLegacy:new Es.Cc("text_change_buffer_use_legacy_3","enabled"),TextChangeBufferDontFlushOnApply:new Es.Cc("text_change_buffer_dont_flush_on_apply_1","enabled"),DontSyncAlertApplicationsWithInlineMode:new Es.Cc("dont_sync_alert_applications_with_inline_mode","enabled"),KnowledgeEngineSearchV2Alpha:new Es.Cc("knowledge_engine_search_v2alpha","enabled"),HideReportBugByGrammarlyEmployeeFeature:new Es.Cc("hide_report_bug_by_grammarly_employee_feature","enabled"),ExtensionFeatureFlagCAPIClientStorage:new Es.Cc("extension_feature_flag_capi_client_storage","enabled"),ExtensionFeatureFlagCAPIClientStorageCleanup:new Es.Cc("extension_feature_flag_capi_client_storage_cleanup","enabled"),ExtensionFeatureFlagCAPIClientStorageLogWarnings:new Es.Cc("extension_capi_client_storage_log_warnings","enabled"),ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests:new Es.Cc("extension_capi_client_storage_run_cleanup_requests","enabled"),CAPIDistinctConnectionStatus:new Es.Cc("extension_capi_distinct_connection_status","enabled"),TransformReplacementBeforeApplyFeature:new Es.Cc("extension_feature_transform_replacement_before_apply","enabled"),ZendeskTransformReplacementOnlyForString:new Es.Cc("extension_zendesk_transform_replacement_only_for_string","enabled"),ConfluenceZIndex:new Es.Cc("extension_confluence_integration_root_zindex","enabled"),GDocsInitGbuttonInsideCommentsField:new Es.Cc("gdocs_init_gbutton_inside_comments_field","enabled"),GDocsCreateRichText:new Es.Cc("gdocs_create_rich_text","enabled"),GDocsFormatGetFontFamily:new Es.Cc("gdocs_format_get_font_family","enabled"),GDocsFormatGetColor:new Es.Cc("gdocs_format_get_color","enabled"),GDocsAlignBasicStyleForTextDiff:new Es.Cc("gdocs_align_basic_style_for_text_diff","enabled"),GDocsReturnAppliedForNonSuccess:new Es.Cc("gdocs_return_applied_for_non_success","enabled"),GDocsReturnAppliedForAll:new Es.Cc("gdocs_return_applied_for_all","enabled"),GDocsCheckTextForSuggestionMode:new Es.Cc("gdocs_check_text_for_suggestion_mode","enabled"),GDocsNoDeleteEventForSuggestionMode:new Es.Cc("gdocs_no_delete_event_for_suggestion_mode","enabled"),GDocsUseSelectionServiceForSuggestionMode:new Es.Cc("gdocs_use_selection_service_suggestion_mode","enabled"),ExtensionA11yUIFixes:new Es.Cc("extension_a11y_ui_fixes","enabled"),ExtensionA11yKeyboardNavigation:new Es.Cc("extension_a11y_keyboard_navigation","enabled"),AutocorrectKeydownCaptureUserInput:new Es.Cc("extension_autocorrect_keydown_capture_user_input","enabled"),AutocorrectAllowCaptureNonTrustedUserEvents:new Es.Cc("extension_autocorrect_allow_capture_not_trusted_user_events","enabled"),DispatchDeltaDeleteEvent:new Es.Cc("extension_dispatch_deleta_delete_event","enabled"),SetCheckingStateAfterSubmitOT:new Es.Cc("extension_set_checking_state_after_submit_ot","enabled"),DiscordTransformInsertToReplace:new Es.Cc("extension_discord_transform_insert_to_replace","enabled"),DiscordExecComandReplacementService:new Es.Cc("extension_discord_exec_comand_replacement","enabled"),DiscordDelayAfterReplacementInBatch:new Es.Cc("extension_discord_delay_after_replacement_in_batch","enabled"),MSTeamsCustomTransformReplacementWithSpaces:new Es.Cc("extension_ms_teams_transform_replacement_with_spaces","enabled"),CAPIUnexpectedCheckingStatus:new Es.Cc("extension_capi_unexpected_checking_status","enabled"),ReplacementExecutionTimeoutValidation:new Es.Cc("extension_replacement_execution_timeout_validation","enabled"),CheetahSelectionContextUpdates:new Es.Cc("cheetah_selection_context_updates","enabled"),CheetahSelectionContextUpdatesServer:new Es.Cc("cheetah_selection_context_updates_server","enabled"),CheetahMergedWithGDocsInternalLabel:new Es.Cc("cheetah_oggy_gdocs_internal_label","enabled"),GDocsInternalsLayoutTreeAvailability:new Es.Cc("gdocs_internals_layout_tree_availability","enabled"),UseBodyToGetViewportDimentions:new Es.Cc("extension_use_body_to_get_viewport_dimentions","enabled"),CLEditorIntegration:new Es.Cc("extension_cleditor_integration","enabled"),GOSRollout:new Es.Cc("extension_gos_rollout","enabled"),GOSTelemetry:new Es.Cc("extension_gos_telemetry","enabled"),CentralizeStopEventPropagation:new Es.Cc("extension_centralize_stop_event_propagation","enabled"),CollectDataForPreserveFormatting:new Es.Cc("extension_collect_data_for_preserve_formatting","enabled"),FormattingUseBatchWhenHaveListItems:new Es.Cc("extension_preserve_formatting_skip_list_items","enabled"),FormattingReplaceEmptyStringToNonBreakingSpaceEntity:new Es.Cc("extension_formatting_support_continuous_white_spaces","enabled"),GDocsCollectLayoutRenderingStats:new Es.Cc("gdocs_collect_layout_rendering_stats","enabled"),GDocsInternalsFilterStrikethrough:new Es.Cc("gdocs_internals_filter_strikethrough","enabled"),GDocsTrackUnderline:new Es.Cc("gdocs_track_underline","enabled"),GDocsTrackStrikeThrough:new Es.Cc("gdocs_track_strikethrough","enabled"),GDocsInternalsFilterCodeBlocks:new Es.Cc("gdocs_internals_filter_code_blocks","enabled"),GDocsDebounceDataRendering:new Es.Cc("gdocs_debouncing_data_rendering","enabled"),GDocsExtractLinkFromGoogleInternals:new Es.Cc("gdocs_extract_link_from_internals","enabled"),GDocsExtractDocumentInternals:new Es.Cc("gdocs_extract_document_internals","enabled"),GDocsExtractSuggestionObjectsWithPath:new Es.Cc("gdocs_extract_suggestion_objects_with_path"),GDocsretryExtractAnnotationAfterOneSecond:new Es.Cc("gdocs_retry_extract_annotation_after_one_second"),GDocsRetryExtractAnnotation100Times:new Es.Cc("gdocs_retry_extract_annotation_100_times"),GDocsExtractLinkInternalsByPath:new Es.Cc("gdocs_extract_link_internals_by_path"),TrackInstitutionIdToGnar:new Es.Cc("extension_track_institution_id_to_gnar","enabled"),GdocsTrackFatalPopup:new Es.Cc("extension_gdocs_track_fatal_popup","enabled"),VbarsGlobal:new Es.Cc("vbars_global","enabled"),G2VBarsMonetization:new Es.Cc("extension_vbars_monetization","enabled"),G2VBarsWaitForLatestCheckingRevisionBeforeGettingRewrite:new Es.Cc("extension_vbars_rewrite_without_checking_completion","enabled"),CheetahOnboardingContextProviderFix:new Es.Cc("cheetah_extension_external_onboarding_context_provider_fix","enabled"),CheetahClearSDUIBufferOnReconnect:new Es.Cc("cheetah_extension_clear_sdui_buffer_on_reconnect","enabled"),InactiveIntegration:new Es.Cc("extension_inactive_integration","enabled"),StopInjectVBarUI:new Es.Cc("stop_inject_vbars_ui","enabled"),VbarsInGdocs:new Es.Cc("vbars_in_gdocs","enabled"),G2VbarsInternal:new Es.Cc("extension_g2_vbars_internal","enabled"),G2VbarsInternalIgnoreAllowList:new Es.Cc("extension_g2_vbars_internal_ignore_allow_list","enabled"),G2VbarsSelectionPreload:new Es.Cc("vbars_selection_preload_extension","enabled"),G2VBarsStreaming:new Es.Cc("vbars_extension_streaming"),HbarsInGdocs:new Es.Cc("hbars_in_gdocs","enabled"),UseApproximateTCValidation:new Es.Cc("use_approximate_tc_validation","enabled"),GDocsCanUseTransformBeforeValidate:new Es.Cc("gdocs_can_use_trasfrom_before_validate","enabled"),GDocsSendValidationInfoForBatchReplacement:new Es.Cc("gdocs_send_validation_info_for_batch_replacement","enabled"),CanIgnoreNonWidthCharsForTCValidation:new Es.Cc("extension_ignore_non_width_chars_for_tc_validaition","enabled"),GDocsCanIgnoreEndNewLine:new Es.Cc("gdocs_ignore_end_new_line_for_tc_validaition","enabled"),GDocsWhitespaceSelectionRetry:new Es.Cc("gdocs_whitespace_selection_retry","enabled"),OAuth2SelectiveLogout:new Es.Cc("extension_oauth2_selective_logout","enabled"),OAuth2LastAuthnEventLogout:new Es.Cc("extension_oauth2_last_authn_event_logout","enabled"),WritingExpertPullMode:new Es.Cc("extension_writing_expert_pull_mode"),WritingExpertInAssistantInternal:new Es.Cc("writing_expert_in_assistant"),WritingExpertInAssistantNative:new Es.Cc("writing_expert_in_assistant_native"),LockedUIRollout:new Es.Cc("locked_ui_rollout","unlimited_pool"),DebouncedInlineCardUpdate:new Es.Cc("extension_debounced_inline_card_update"),GDocsShouldCheckIfMappedSomething:new Es.Cc("gdocs_map_result_must_mapped_some_text"),GDocsCheckIndexBoundaryWhenTranslateIndex:new Es.Cc("gdocs_check_index_boundary_when_translate_index"),GDocsOnlyAddIncompleteResult:new Es.Cc("gdocs_only_add_incomplete_result"),GDocsPageInputValidationForParser:new Es.Cc("gdocs_page_input_validation_for_parser"),CheetahProfuseEventsTracking:new Es.Cc("cheetah_profuse_events_tracking"),RedditReplacementDuplicationFix:new Es.Cc("reddit_replacement_duplication_fix"),RedditNewUseOverlayLayout:new Es.Cc("reddit_new_use_overlay_layout"),RedditUseClipboardForCreatePost:new Es.Cc("extension_reddit_use_clipboard_for_create_post"),SalesforceServiceConsoleReplacementFix:new Es.Cc("salesforce_service_console_replacement_fix"),SalesforceFilterEmailThread:new Es.Cc("salesforce_filter_email_thread"),SalesforceDetailsTextareaRichReplacementServiceDelay:new Es.Cc("salesforce_details_textarea_replacement_service_delay"),StravaReplacementSelectionDelay:new Es.Cc("extension_strave_replacement_selection_delay"),SkipParallelAutoFixReplacement:new Es.Cc("skip_parallel_autofix_replacement"),AvoidExtraIntegrationControllerInitialization:new Es.Cc("extension_avoid_extra_integration_controller_initialization"),OggyOnGOS:new Es.Cc("extension_oggy_on_gos","enabled"),UnfixFast570:new Es.Cc("extension_unfix_fast_570"),LatticeReplacementDuplicationFix:new Es.Cc("lattice_replacement_duplication_fix"),NewSessionEndWithConnectionStats:new Es.Cc("new_session_end_with_connection_stats"),GDocsReplacementValidateOnlyFullTextBeforeReplacement:new Es.Cc("gdocs_replacement_only_validate_full_text_before_replacement"),GDocsReplacementValidateOnlyFragmentText:new Es.Cc("gdocs_replacement_only_validate_fragment_text"),GDocsParserMiddleware:new Es.Cc("gdocs_parser_middleware"),GDocsPerformanceParserMiddleware:new Es.Cc("gdocs_performance_parser_middleware"),GDocsCachingParserMiddleware:new Es.Cc("gdocs_caching_parser_middleware"),OggyIframeWrappers:new Es.Cc("extension_oggy_use_iframe_wrappers"),LoadAppActionsFromAppletCdn:new Es.Cc("app_actions_applet_cdn_extension"),SkipEmptyChangesForActiveAlertOverride:new Es.Cc("extension_skip_empty_changes_for_active_alert_override"),PerformanceScoreOggy:new Es.Cc("performance_score_oggy"),PerformanceIgnorePageHidden:new Es.Cc("performance_ignore_page_hidden"),TrackGButtonSpinAtSessionEndMetric:new Es.Cc("extension_track_gbutton_spin_at_session_end_metric"),UseHistogramStrikesBack:new Es.Cc("extension_use_histogram_strikes_back"),SessionTimeout:new Es.Cc("extension_session_timeout"),ConnectorGdocs:new Es.Cc("extension_connector_gdocs"),ConnectorNonGdocs:new Es.Cc("extension_connector_non_gdocs"),DurationMetrics:new Es.Cc("extension_duration_metrics"),CalcGDocsCurrentFocusFieldBasedOnFocusSuggestion:new Es.Cc("calc_gdocs_current_focus_field_based_on_focus_suggenstion"),FieldIntegrationManager:new Es.Cc("extension_field_integration_manager"),CheetahExecReplacementOnlyWhenItsExists:new Es.Cc("extension_cheetah_exec_replacement_only_when_its_exists"),SendChangesToCAPIAfterSequentialApply:new Es.Cc("extension_send_changes_to_capi_after_sequential_apply"),GDocsTabSwitchFrequencyTracking:new Es.Cc("gdocs_tab_switch_frequency_tracking"),GDocsDoNotKeepSidebarOpenState:new Es.Cc("gdocs_do_not_keep_sidebar_open_state"),DatabricksPerformanceMetrics:new Es.Cc("extension_databricks_performance_metrics"),ToggleSiteButtonBugFix:new Es.Cc("toggle_site_button_bug_fix"),PersonalizedInsightsConsentPopup:new Es.Cc("extension_personalized_insights_consent_onboarding"),PersonalizedInsightsEmailDomainAndSignature:new Es.Cc("extension_personalized_insights_email_domain_and_signature"),DataSharing:new Es.Cc("data_sharing_optin"),TrackLevenshteinDistanceForTextCorruption:new Es.Cc("extension_track_levenshtein_distance_for_text_corruption"),GDocsCanvasNotAvailableBugFix:new Es.Cc("gdocs_canvas_not_available_bug_fix"),TrackTextCorruptionDebugProductMetric:new Es.Cc("extension_track_text_corruption_debug_product_metric"),TouchTypist:new Es.Cc("extension_touch_typist"),TouchTypistInternal:new Es.Cc("extension_touch_typist_internal"),FixAlertProcessorApplyChangesPerformance:new Es.Cc("extension_alert_processor_apply_changes_performance"),MemoryLeakFixesBatch1:new Es.Cc("extension_memory_leak_fixes_batch_1"),MemoryLeakFixesAqua:new Es.Cc("extension_memory_leak_fixes_aqua"),FetchSkills:new Es.Cc("extension_fetch_skills"),GDocsParseSmartChipFragments:new Es.Cc("gdocs_parse_smart_chip_fragments"),NewsNowSingleInstantiation:new Es.Cc("newsnow_disable_multiple"),CanContainsPrivateFieldsInDocInfo:new Es.Cc("extension_can_contains_private_fields_in_doc_info"),HWRSourceTrackingEverywhere:new Es.Cc("extension_hwr_clipboard_everywhere"),HWRDisable:new Es.Cc("extension_hwr_disable"),HWRInternal:new Es.Cc("extension_human_writing_report_internal"),IframeMemoryLeakFixes:new Es.Cc("extension_iframe_memory_leak_fixes"),CleanupPageMapCanvas2dContext:new Es.Cc("cleanup_page_map_canvas_2d"),TrackInteractionToNextPaint:new Es.Cc("extension_track_interaction_to_next_paint"),TrackINPWithGrammarlyDisabled:new Es.Cc("extension_track_inp_with_grammarly_disabled"),TrackINPInDatabricks:new Es.Cc("extension_track_inp_in_databricks"),VitoTrafficIncrease:new Es.Cc("vito_traffic_increase"),MapImageNodeForRichText:new Es.Cc("map_image_node_for_rich_text"),PreventEmptySetContext:new Es.Cc("extension_prevent_empty_set_context"),GDocsSendComments:new Es.Cc("gdocs_send_comments"),TrackAlertProcessingPerformance:new Es.Cc("extension_track_alert_processing_performance"),ScreenHtmlSpecialCharactersOnInsert:new Es.Cc("extension_screen_html_special_characters_on_insert"),TrackTaskLatencyInINP:new Es.Cc("extension_track_task_latency_in_inp"),FixTransformedAlertsDetection:new Es.Cc("extension_fix_transformed_alerts_detection"),ReduceAlertProcessingOperations:new Es.Cc("extension_reduce_alert_processing_operations")};var ks,Is,Rs;!function(e){const t=Cn.create("universal.cs.integration.observables"),n=e=>S(e,"focus",{capture:!0});function i(e){return e instanceof Element&&e.shadowRoot&&e.shadowRoot.activeElement?i(e.shadowRoot.activeElement):e}function r(e,t){return{document:e,frame:t}}function s(e,n){const i=r(e),s=Mn(e.getElementsByTagName("iframe")),o=n.pipe(vs((e=>Array.from(e.addedNodes))),Ue((e=>"IFRAME"===e.nodeName))),a=ci(s,o).pipe(Ue((n=>function(e,n){try{const t=e.src;if(t&&"about:blank"!==t&&!t.startsWith("javascript")){return new URL(t,n.baseURI).origin===n.location.origin}return!0}catch(e){return t.warn("Error converting iframe's src to url",e),!0}}(n,e))),Bn((e=>{try{return function(e){const t=e.contentDocument;return t&&"complete"===t.readyState}(e)?oi(e):us((t=>e.addEventListener("load",t,!0)),(t=>e.removeEventListener("load",t))).pipe(x((()=>e)),ys(1))}catch(e){return t.warn("failed to receive iframes document",e),oi(null)}})),x((e=>{try{if(null!==e&&null!==e.contentDocument)return r(e.contentDocument,e)}catch(e){t.warn("failed to receive iframes document",e)}return null})),Ue((e=>null!==e)));return a.pipe(li(i))}e.createFocusObservable=function(e,t,r=n){return s(e,t).pipe(Bn((e=>function(e,t,n){var r,s;const o=e.document,a=zn(In),c=e.frame?Zn:(h=()=>oi(o.activeElement).pipe(Ue((e=>e&&o.defaultView&&o.defaultView.HTMLElement&&e instanceof o.defaultView.HTMLElement))),new y((function(e){var t;try{t=h()}catch(t){return void e.error(t)}return(t?Mn(t):Qn()).subscribe(e)}))),l=t(o).pipe(x((e=>e.target))),u=e.frame?Zn:Vn(a,n).pipe(Ue((e=>!!o.defaultView&&"visible"===o.visibilityState&&!!o.activeElement)),x((e=>o.activeElement)),ft()),d=Vn(u,l).pipe(Ue((e=>o.defaultView&&o.defaultView.HTMLElement&&e instanceof o.defaultView.HTMLElement)),x((e=>i(e))));var h;if(Kr().experimentClient.isGateEnabled(Ts.IframeMemoryLeakFixes)&&(null===(r=e.frame)||void 0===r?void 0:r.contentWindow))return ci(c,d).pipe(ft(),(p=Vn(S(null===(s=e.frame)||void 0===s?void 0:s.contentWindow,"unload")),function(e){return e.lift(new _s(p))}));var p;return ci(c,d).pipe(ft())}(e,r,t).pipe(x((t=>({element:t,owner:e})))))),ft(),ps(ls))},e.createReadonlyObservable=function(e,t,n){return s(e,t).pipe(Bn((e=>function(e,t,n){const i=(e,t)=>e.length===t.length&&e.every(((e,n)=>e===t[n]));return t.pipe(x((()=>Qr(n,e.querySelectorAll.bind(e),Array.from))),ft(i),x((e=>Qr(e,Array.from,Mn))),Bn((e=>e)),Ue(U))}(e.document,t,n).pipe(x((t=>({element:t,owner:e})))))),ft(),ps(ls))},e.docInfo=r}(ks||(ks={})),function(e){const t="grammarly-desktop-integration";e.inject=function(e=document.documentElement){var n,i;const r=`\n      div.${t} {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        padding: 0;\n        margin: -1px;\n        overflow: hidden;\n        clip: rect(0, 0, 0, 0);\n        white-space: nowrap;\n        border: 0;\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        -ms-user-select:none;\n        user-select:none;\n      }\n\n      div.${t}:before {\n        content: attr(data-content);\n      }\n    `,s=document.createElement("style");s.textContent=r;const o=document.createElement("div");o.setAttribute("aria-label","grammarly-integration"),o.setAttribute("role","group"),o.setAttribute("tabindex","-1"),o.setAttribute("class",t);const a=document.createElement(t);return a.attachShadow({mode:"open"}),a.setAttribute("data-grammarly-shadow-root","true"),null===(n=a.shadowRoot)||void 0===n||n.appendChild(s),null===(i=a.shadowRoot)||void 0===i||i.appendChild(o),e.appendChild(a),{activate:({isActive:e,isUserDisabled:t,mode:n})=>{null==o||o.setAttribute("data-content",JSON.stringify(n?{mode:n,isActive:e,isUserDisabled:t}:{isActive:e}))},remove:()=>{var e;null===(e=null==a?void 0:a.parentNode)||void 0===e||e.removeChild(a)}}},e.isInjected=function(){return!!document.querySelector(t)}}(Is||(Is={})),function(e){e.full="full",e.limited="limited"}(Rs||(Rs={}));class Fs{constructor(e=Cn.create("DesktopHiddenFieldIntegration"),t=vr){this._log=e,this._getFelog=t,this._integration=null,this._root=document.documentElement,this._state=on.create(null),this.getActiveElement=()=>{const e=document.activeElement,t=null==e?void 0:e.shadowRoot,n=null==e?void 0:e.contentDocument;return t&&t.activeElement?t.activeElement:n&&n.activeElement?n.activeElement:e},this.updateState=(e,t,n,i)=>{var r;const s=!mi.isIntegrationEnabled(i,e,t),o=mi.isEnabled(t,i)?Rs.limited:Rs.full,a=!n;this._state.set({isActive:s,mode:o,isUserDisabled:a}),a?this.dispose():null===(r=this.integration)||void 0===r||r.activate({isActive:s,mode:o,isUserDisabled:a})},this.updateForFocusedIntegration=()=>{const e=this.getActiveElement(),t=null==e?void 0:e.closest("[role=dialog][aria-modal=true]"),n=null!=t?t:document.documentElement;return n!==this._root&&(this._root=n,this.dispose()),this.integration},this.dispose=()=>{this._integration&&(this._integration.remove(),this._integration=null)},this._state.pipe(Ue(Boolean)).subscribe((e=>{this._log.debug("update DesktopHiddenField state",e)}))}get integration(){if(this._integration)return this._integration;if(Is.isInjected())return this._log.debug("DesktopHiddenField is already injected"),null;try{this._integration=Is.inject(this._root)}catch(e){return this._log.debug("DesktopHiddenField is not injected",e),this._getFelog().hiddenFieldInjectionFailed(),null}return this._log.debug("DesktopHiddenField is injected into "+(this._root===document.documentElement?"root":"dialog")),this._integration}}var As;!function(e){function t(e,t){return n(e,t).pipe(Lt(),ps(ls))}function n(e,t){return new y((n=>{const i=new MutationObserver((e=>n.next(e)));return i.observe(e,t),()=>i.disconnect()}))}e.create=t,e.createUnsafe=n,e.createFlattenHot=function(e,t){return n(e,t).pipe(vs((e=>e)),Lt())},e.observeAttribute=function(e,n){return t(e,{attributes:!0,attributeFilter:[n],subtree:!1,childList:!1}).pipe(x((t=>e.getAttribute(n))))},e.observeStyle=function(e){return t(e,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe(x((t=>e.style)))},e.observeChildList=function(e){return t(e,{attributes:!1,subtree:!1,childList:!0}).pipe(x((t=>e.childNodes)))}}(As||(As={}));var Os,Ns,Ps,Ls=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Ms(e,this.dueTime,this.scheduler))},e}(),Ms=function(e){function n(t,n,i){var r=e.call(this,t)||this;return r.dueTime=n,r.scheduler=i,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return t(n,e),n.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ds,this.dueTime,this))},n.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},n.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},n.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},n}(f);function Ds(e){e.debouncedNext()}!function(e){e.anonymous="anonymous",e.registered="registered",e.premium="premium",e.business="business",e.edu="edu",e.ngo="ngo",e.k12="k12",e.gov="gov"}(Os||(Os={})),function(e){function t(e){return!e.anonymous&&e.premium}function n(e){var t;return["BUSINESS","NGO","GOV"].includes((null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)||"")}function i(e){return!!e.institutionInfo}function r(e){var t;return"EDU"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function s(e){var t;return"K12"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function o(e){var t;return"NGO"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}function a(e){var t;return"GOV"===(null===(t=e.institutionInfo)||void 0===t?void 0:t.organizationType)}e.getType=function(e){return i(e)?o(e)?Os.ngo:r(e)?Os.edu:a(e)?Os.gov:s(e)?Os.k12:Os.business:e.premium?Os.premium:e.anonymous?Os.anonymous:Os.registered},e.isFree=function(e){return!e.anonymous&&!e.premium},e.isPremium=t,e.isFreeTrial=function(e){return!!(t(e)&&e.customFields&&e.customFields.frontend_premiumTrialEndDate)&&new Date<new Date(e.customFields.frontend_premiumTrialEndDate)},e.getUserRole=function(e,t){var n;return null===(n=e.roles)||void 0===n?void 0:n.find((e=>e.type===t))},e.isEdcBlocked=function(e){return!!e.edc&&!e.edc.compliant},e.isDocsDisabled=function(e){var t,n;return null!==(n=null===(t=e.editorFeatures)||void 0===t?void 0:t.docsDisabled)&&void 0!==n&&n},e.hasRole=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_role&&""!==e.customFields.frontend_role)},e.hasSoundFluentGoals=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_soundFluent&&""!==e.customFields.frontend_soundFluent)},e.hasPrimaryLanguage=function(e){return!!e.customFields&&(void 0!==e.customFields.frontend_primaryLanguage&&""!==e.customFields.frontend_primaryLanguage)},e.isBusinessAdmin=function(e){var t;return Boolean(n(e)&&(null===(t=null==e?void 0:e.institutionInfo)||void 0===t?void 0:t.admin))},e.shouldUserSeeLegacyGBBranding=function(e,t){return n(e)&&["BUSINESS","ENTERPRISE"].includes(t)},e.doesUserBelongToBusinessInstitution=n,e.doesUserBelongToInstitution=i,e.doesUserBelongToEDUInstitution=r,e.doesUserBelongToK12Institution=s,e.doesUserBelongToNGOInstitution=o,e.doesUserBelongToGOVInstitution=a,e.isClaimed=function(e){return e.groups.includes("claimed-invitation")};e.isGrammarlyEmployee=function(e){var t;return e.email.endsWith("@grammarly.com")&&624392205===(null===(t=e.institutionInfo)||void 0===t?void 0:t.id)},e.isTestUser=function(e){return e.email.endsWith("@bh.exacttarget.com")},e.isConsumerUser=function(e){return!i(e)},e.defaultUser={anonymous:!0,groups:[],id:"",premium:!1,isTest:!1,settings:{},subscriptionFree:!1,type:"anonymous",email:"",registrationDate:(new Date).toString(),firstName:""}}(Ns||(Ns={})),function(e){e.empty="empty",e.local="local",e.server="server",e.localOverride="localOverride"}(Ps||(Ps={}));const Us={source:Ps.local,version:"0",newRichTextFieldsEnabled:!0,fluidDisabledForFirefox:!1,fluidDisabledForSafari:!1,fullSentenceRewritesDisabled:!1,overrideKey:"dynamicConfigOverrideKey",ungatingRenewalNotificationEnabled:!1,quillJSCatchAllDisabled:!1};const Gs=(e,t)=>{const n=on.create({}),i={getAll:async()=>await r.getAll(),get:async e=>await r.get(e),patch:async e=>await r.set(e),changes:(r=e.browserApi.preferences).changes};var r;const s={...i,view:n.view.bind(n)},o=ht(Mn(i.changes).pipe(li(null),(c=200,void 0===l&&(l=Ve),function(e){return e.lift(new Ls(c,l))}),Dn((()=>i.getAll()))),Mn(W(5,(a=2,In/a),(()=>e.bgRpc.api.getPageConfig(t,self.location.href))).catch((e=>null))).pipe(li(null)),((e,i)=>{var r,s,o,a,c,l;const u=null!==(s=null===(r=e.extensionSettings)||void 0===r?void 0:r[t])&&void 0!==s?s:{},d=(null===(o=null==u?void 0:u.enabled)||void 0===o||o)&&(null===(a=null==i?void 0:i.enabled)||void 0===a||a);return n.set(e),{user:null!==(c=e.user)&&void 0!==c?c:Ns.defaultUser,settings:e.extensionSettings,dynamicConfig:null!==(l=e.dynamicConfig)&&void 0!==l?l:Us,dapi:e.dapi,enabled:d}}));var a,c,l;return{persistentStoreLite:s,viewStoreLite:o}};var Bs,js=-1,Ws=function(e){addEventListener("pageshow",(function(t){t.persisted&&(js=t.timeStamp,e(t))}),!0)},Hs=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Vs=function(){var e=Hs();return e&&e.activationStart||0},$s=function(e,t){var n=Hs(),i="navigate";return js>=0?i="back-forward-cache":n&&(document.prerendering||Vs()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},zs=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},qs=function(e,t,n,i){var r,s;return function(o){t.value>=0&&(o||i)&&((s=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=s,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Ks=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},Js=function(e){var t=!1;return function(){t||(e(),t=!0)}},Ys=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Xs=0,Zs=1/0,Qs=0,eo=function(e){e.forEach((function(e){e.interactionId&&(Zs=Math.min(Zs,e.interactionId),Qs=Math.max(Qs,e.interactionId),Xs=Qs?(Qs-Zs)/7+1:0)}))},to=function(){return Bs?Xs:performance.interactionCount||0},no=function(){"interactionCount"in performance||Bs||(Bs=zs("event",eo,{type:"event",buffered:!0,durationThreshold:0}))},io=[],ro=new Map,so=0,oo=[],ao=function(e){if(oo.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=io[io.length-1],n=ro.get(e.interactionId);if(n||io.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};ro.set(i.id,i),io.push(i)}io.sort((function(e,t){return t.latency-e.latency})),io.length>10&&io.splice(10).forEach((function(e){return ro.delete(e.id)}))}}},co=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Js(e),"hidden"===document.visibilityState?e():(n=t(e),Ks(e)),n},lo=[200,500],uo=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Ys((function(){var n;no();var i,r=$s("INP"),s=function(e){co((function(){e.forEach(ao);var t=function(){var e=Math.min(io.length-1,Math.floor((to()-so)/50));return io[e]}();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},o=zs("event",s,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=qs(e,r,lo,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Ks((function(){s(o.takeRecords()),i(!0)})),Ws((function(){so=to(),io.length=0,ro.clear(),r=$s("INP"),i=qs(e,r,lo,t.reportAllChanges)})))})))};new Date;const ho={textInputLatencyV1:.1,scrollLatencyV1:.1,resizeLatencyV1:.1,highlightsDisplay:.1,gButtonTextCheck:.1,inlineAlertDisplay:.1,inlineAlertApply:.1,gButtonDisplay:.1,gButtonSpinAtSessionEnd:.1,gDocsParserExecutionTimeV1:.01,gDocsCachingExecutionTimeV1:1,interactionToNextPaint:.1,alertProcessing:.1},po={textInputLatencyV1:{"docs.google.com":.01}},go=(e,t)=>Math.random()<((e,t)=>{var n,i,r;const s=Vi(),o=null==t?void 0:t.sessionSamplingForMetrics,a=null==o?void 0:o.find((t=>(null==t?void 0:t.metricName)===e)),c=(null===(i=null===(n=null==a?void 0:a.byDomain)||void 0===n?void 0:n.find((e=>e.domain===s)))||void 0===i?void 0:i.value)||(null===(r=po[e])||void 0===r?void 0:r[s]);return void 0!==c?c:(null==a?void 0:a.value)||ho[e]})(e,t),fo=["client","client_version","device"],mo=["user_id","user_type","institution_id"];const _o=(e,t="round")=>{switch(t){case"floor":return Math.floor(e);case"ceil":return Math.ceil(e);case"round":return Math.round(e);default:return P(t)}};class bo{static trackTaskLatency(e,t,n=performance.now()){const i=Math.round(n-t),r=bo.getTaskLatency(e);(!r||r<i)&&bo._taskLatencyMap.set(e,i)}static getTaskLatency(e){return bo._taskLatencyMap.get(e)}static reset(){bo._taskLatencyMap.clear()}}bo._taskLatencyMap=new Map;var vo=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}();function yo(e){return void 0===e&&(e=null),function(t){return t.lift(new wo(e))}}var wo=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new xo(e,this.defaultValue))},e}(),xo=function(e){function n(t,n){var i=e.call(this,t)||this;return i.defaultValue=n,i.isEmpty=!0,i}return t(n,e),n.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},n.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},n}(f);function Eo(e){return void 0===e&&(e=To),function(t){return t.lift(new Co(e))}}var Co=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new So(e,this.errorFactory))},e}(),So=function(e){function n(t,n){var i=e.call(this,t)||this;return i.errorFactory=n,i.hasValue=!1,i}return t(n,e),n.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},n.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},n}(f);function To(){return new vo}function ko(e,t){var n=arguments.length>=2;return function(i){return i.pipe(e?Ue((function(t,n){return e(t,n,i)})):b,ys(1),n?yo(t):Eo((function(){return new vo})))}}const Io=2147483642;var Ro=n(87104);function Fo(e,t){const n=e.anchorNode;if(!n)return!1;const i=wi.map((e=>Array.isArray(e)?`[${e[0]}="${e[1]}"]`:`[${e}]`)).join(","),r=t.activeElement,s=e.toString().trim(),o="TEXTAREA"!==n.tagName&&"INPUT"!==n.tagName,a=!r||"INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName,c=!Si(n),l=!Ci(n,i)&&!Ti(n,i),u=!Ci(n,"[contenteditable=true],[contenteditable=plaintext-only]")&&!function(e){let t=e.parentNode;for(;null!==t;){if(Si(t))return t;t=t.parentNode}return!1}(n);return!!(s&&o&&a&&c&&l&&u)}var Ao,Oo,No=n(16742);!function(e){const t="important";function n(e){return String(e)+"px"}e.isValid=function(){const e=self.document.getSelection();return!(!e||e.toString().match(/[0-9_±!@#$%^&*:"|<>?~().,:}{’='-/ /]/))&&Fo(e,self.document)},e.animation=function(e){const i=document.createElement("div"),r=i.attachShadow({mode:"open"}),s=document.createElement("style");s.innerHTML=No.__css,r.appendChild(s);const o=self.document.getSelection().getRangeAt(0).getBoundingClientRect(),a=document.createElement("div");a.style.setProperty("top",n(o.top),t),a.style.setProperty("left",n(o.left),t),a.style.setProperty("height",n(o.height),t),a.style.setProperty("max-width",n(o.width),t),a.style.setProperty("z-index",Io.toString(),t),a.classList.add(No.animatedUnderline,No.checkAnimatedUnderline),r.appendChild(a),document.body.appendChild(i);const c=zn(10),l=ht(e.pipe(ko(),ni(!1),li(!0),ft()),c.pipe(x((()=>{const e="."+Ro.completeAnimation;if(document.querySelector(e))return!0;const t=Array.from(document.querySelectorAll("grammarly-extension"));for(const n of t)if(n.shadowRoot&&n.shadowRoot.querySelector(e))return!0;return!1})),li(!1),ft())).pipe(Ue((([e,t])=>!e||t)),ft()).subscribe(u);return{unsubscribe:u};function u(){l.unsubscribe(),i.remove()}}}(Ao||(Ao={})),function(e){e.init=function(e,t){const n=Cn.create("lib.external");!function(e,t,n,i=document,r=!1,s,o){const a=e,c=i.documentElement;if(r){const e=i.createElement("link");e.href=a,e.rel="preload",e.as="script",e.onload=()=>{e.remove()},c.prepend(e)}const l=i.createElement("script");l.async=!1,l.defer=!1,l.src=a,l.type="text/javascript",t&&l.setAttribute("data-ext-id",t),n&&l.setAttribute("data-ext-version",n),l.onload=()=>{null==s||s(),l.remove()},l.onerror=()=>{null==o||o()},c.prepend(l)}(t("src/js/Grammarly-externalEventsInjectedCs.js"),xe());const i=Ei.map((t=>{const i=`external:${t}`;return ki.call(document,i,(({detail:t})=>{n.trace("external event",{event:i,detail:t}),e.sendBackground(i,t)}))}));return{dispose:()=>{i.forEach((e=>e.off()))}}}}(Oo||(Oo={}));const Po="grExtInstalled",Lo="grExtDisabled";function Mo(e){var t;null===e&&"next"===(null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.dataset[Lo])||(null===e?function(){var e;(null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.dataset)&&delete document.body.dataset[Lo]}():document.body.dataset[Lo]=e)}var Do,Uo;!function(e){function t(e){zn(10).pipe(Ue((()=>!!document.body)),ko()).subscribe((()=>{document.body.dataset.newGrCSCheckLoaded=e.buildInfo.version,document.body.dataset[Po]=""}))}e.init=function(e,n,i,r){const s=[];return t(i),self.location.protocol===i.appConfig.url.grammarlyProtocol&&r.match(`^([a-z\\-0-9]+\\.)*${i.appConfig.url.grammarlyDomain}$`)&&s.push(Oo.init(n,e.getUrl)),{dispose:()=>{s.forEach((e=>e.dispose()))}}}}(Do||(Do={})),function(e){const t=Date.now(),n=e=>self.performance.mark("@grammarly-extension:"+e);e.callExecuteContentScript=()=>n("callExecuteContentScript"),e.checkScriptInitEnd=e=>{const i=Math.random()<.01&&Ee();if(n("checkScriptInitEnd"),i){const n=Date.now();e.api.trackCall(Vr,["sendFelogEvent",{ex_csInitPerf:{domain:self.location.host,initTime:n-t,pageLoadTime:n-self.performance.timing.responseEnd},hideUserInfo:!0,level:Mi.INFO,logger:"checkScript.initialized"}])}},e.checkScriptInitStart=()=>n("checkScriptInitStart")}(Uo||(Uo={}));class Go{constructor(e,t,n,i=Cn.create("ExtensionIntegrationCheck")){this._csShareStorage=e,this._loadContentScript=t,this._log=i,this._pageEnable=!0,this._citationBuilderEnable=!1,this._humanWritingReportEnable=!1,this._enabledDefs=!1,this._isAnonymous=!0,this._wasLoaded=!1,this._isDesktopIntegrationEnable=!1,this._mutations=As.createFlattenHot(self.document,{childList:!0,subtree:!0}),this._textFieldsObservable=ks.createFocusObservable(self.document,this._mutations),this._subs=[this._textFieldsObservable.subscribe((e=>{const t=e.owner.frame||e.element,n=bi.get(t);if(this._log.debug("detected click",{field:t,fieldType:n}),this._pageEnable&&(n.generic||n.specific)){const e=crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2);t.__grammarlyPerformanceTimerId=e,t.__grammarlyPerformanceTimerStartTime=performance.now(),this.load()}})),Go.clickObserver.subscribe((e=>{2===e.detail&&this._enabledDefs&&this._pageEnable&&!this._isAnonymous&&Ao.isValid()&&(this._log.debug("dictionary event executed",e),this._csShareStorage.set("extensionDictionaryEvent",e),this._subs.push(Ao.animation(Go.clickObserver)),this.load())}))],n&&!ke()&&this.load()}load(){this._wasLoaded&&!this._isDesktopIntegrationEnable||(this._log.info("Loading main content script"),this._wasLoaded=!0,Uo.callExecuteContentScript(),this.dispose(),this._loadContentScript())}dispose(){this._subs.forEach((e=>{try{e.unsubscribe()}catch(e){}}))}async updateState(e,t,n,i,r,s,o,a,c){if(this._isDesktopIntegrationEnable=i,(!this._pageEnable&&t||!this._citationBuilderEnable&&r||!this._humanWritingReportEnable&&s)&&this.load(),this._pageEnable&&!t&&!this._wasLoaded){await a.fetchTreatments();const e=a.isGateEnabled(Ss.TrackINPInCheckScript);Ee()&&e&&((e,t)=>{self.__grammarlyINPListenerInitialized||(self.__grammarlyINPListenerInitialized=!0,go("interactionToNextPaint",t)&&uo(e))})((t=>{if(!this._pageEnable){const n=vr();(({metric:e,domain:t,integrationIds:n,sessionIds:i,trackINPInDatabricks:r,trackINPWithGrammarlyDisabled:s,felog:o,productMetricsClient:a})=>{var c,l;const u=n.size>0;if(u||s){const{osName:s,browserName:d}=pe();if(o.interactionToNextPaint(e.value,{os:s,browserName:d,domain:Vi(t),grammarlyWasActive:u?"true":"false",rating:e.rating}),r){const r=20,s=[...n].slice(-r).join(","),o=[...i].slice(-r).join(","),d=u.toString(),h=null===(c=bo.getTaskLatency("alertProcessing"))||void 0===c?void 0:c.toString(),p=null===(l=bo.getTaskLatency("highlightProcessing"))||void 0===l?void 0:l.toString();a.send({event_name:"interactionToNextPaint-performance",dataset_name:"performance",latency:_o(e.value),hostname:t,integration_id:s,extra:{session_id:o,grammarly_was_active:d,rating:e.rating,max_alert_processing_latency:h,max_highlight_processing_latency:p}},{additionalProps:[...fo,...mo]}),bo.reset()}}})({metric:t,domain:Re(),felog:n,integrationIds:new Set,sessionIds:new Set,productMetricsClient:o,trackINPInDatabricks:e,trackINPWithGrammarlyDisabled:e})}}),c)}this._citationBuilderEnable=r,this._humanWritingReportEnable=s,this._isAnonymous=e,this._pageEnable=t,this._enabledDefs=n,Mo(this._pageEnable?null:"forever")}}!function(e){e.clickObserver=S(self.document,"click",{capture:!0});let t=!1,n=[];function i(){n.forEach((e=>e&&e.dispose())),n=[],t=!0}e.start=async function(r,s=!0,o,a=!1){Uo.checkScriptInitStart();const c=Re(),l=qr.init({...r,skipInitExtensionApi:s,skipWriteLogsToBackupStorage:!0}),u=Cn.create("universal.check");if("text/html"!==document.contentType)return u.info("not a html page, skip integration check"),void vr().skipIntegrationForNonHtmlPage();const d=new e(l.csShareStorage,(()=>{(null!=o?o:l.bgRpc.api.loadContentScript)(),i()}),a),h=new Fs,p=Do.init(l.browserApi,l.message,l.config,c),{viewStoreLite:g,persistentStoreLite:f}=Gs(l,c),m=G((e=>{vr().sendFemetricsRate("checkScriptInitialized",{domain:Vi(),isExtensionEnabled:e,isIframe:ke()},["firstInstall","registrationDate"])})),_=g.subscribe((e=>{var t,n,i,r;u.debug("check script state is updated",e);const s=null===(t=e.settings)||void 0===t?void 0:t.common;d.updateState(null===(i=null===(n=e.user)||void 0===n?void 0:n.anonymous)||void 0===i||i,e.enabled,null!==(r=null==s?void 0:s.enabledDefs)&&void 0!==r&&r,mi.isIntegrationEnabled(s,c,e.dynamicConfig),Le(c,e.dynamicConfig,s),function(e){return"enabled"===(null==e?void 0:e.kind)&&e.domainSettings.some((e=>e.logAllDocuments?e.logAllDocuments:e.activeDocumentIds.length>0))}(null==s?void 0:s.humanWritingReport),l.productMetricsCSClient,l.experimentClient,e.dynamicConfig),h.updateState(c,e.dynamicConfig,e.enabled,s),m(e.enabled)})),b=[d,p,h];l.message.once("contentScript-disconnected",(()=>{_.unsubscribe(),l.csShareStorage.clean(),b.forEach((e=>e&&e.dispose()))})),l.message.once(Jr.Kind.disableOnTab,(()=>{h.dispose()})),Zr.initSendLogsToPopupHandler(l),n.push(Zr.initKeyboardShortcutHandler(l)),Uo.checkScriptInitEnd(l.bgRpc),(e=>{if(self.location.href.includes("grammarly.com/extension-success")){const t=document.getElementById("click-to-run");t&&(t.onclick=()=>{var t,n;confirm("Always allow Grammarly to run on every website")?(e.api.enableClickToRunOnAllWebsites(),null===(t=document.getElementById("click-to-run-success"))||void 0===t||t.click()):null===(n=document.getElementById("click-to-run-fail"))||void 0===n||n.click()})}})(l.bgRpc),Fi.create(f.view(),l.bgRpc.api).then((e=>n.push(e))),t&&n.length&&i(),u.info("Check script initialization complete")}}(Go||(Go={}));var Bo=n(43693);const jo={HumanWritingReport:new Bo.Experiment("extension_human_writing_report",["control","test"]),HumanWritingReportRolloutStudents:new Bo.Experiment("extension_hwr_rollout_students",["control","test_on","test_off"]),HumanWritingReportRolloutFreeUser:new Bo.Experiment("extension_hwr_rollout_free_user",["control","test_on","test_off"]),HumanWritingReportRolloutPremiumUser:new Bo.Experiment("extension_hwr_rollout_premium_user",["control","test_on","test_off"]),HumanWritingReportRolloutG4E:new Bo.Experiment("extension_hwr_rollout_g4e_institution",["control","test_on","test_off"])};function Wo(e){return e.endsWith("_1")||e.endsWith("_2")?e.slice(0,-2):null}class Ho{constructor(e,t=te(Object.values(jo),(e=>[e])),n=Object.values(Ss)){this._bgRpc=e,this._experiments=t,this._gates=n,this._experimentTreatments=new Map,this._disposed=!1,this._gateTreatments=new Map,this.setPrefetchedTreatments=e=>{!this._disposed&&this._updateTreatmentForExpAndGates(e)},this.fetchTreatments=async(e={})=>{!this._disposed&&await this._fetchTreatments(e.clearCacheOnError)},this.dispose=()=>{this._disposed=!0},this.getTreatment=e=>{if(this._disposed)return null;const t=this.peekTreatment(e);return null!==t&&this.logTreatment(e,t).catch((()=>{})),t},this.peekTreatment=e=>{if(this._disposed)return null;const t=this._experimentTreatments.get(e.name)||this._gateTreatments.get(e.name),n=null==t?void 0:t.groupName;if(n){const t=e.experiencesArray.find((e=>{return(t=e,[`${t}_1`,`${t}_2`]).includes(n);var t}));if(t)return t}return null},this.logTreatment=(e,t)=>{if(this._disposed)return Promise.resolve();const n=this._experimentTreatments.get(e.name)||this._gateTreatments.get(e.name);if(!n||Wo(n.groupName)!==t)throw new Error("Cannot find associated treatment");return(void 0!==n.needLog?n.needLog:"gate"!==n.type)?this._bgRpc.api.logExperimentTreatment(n):Promise.resolve()}}_updateTreatmentForExpAndGates(e){this._experimentTreatments=new Map(e.filter((e=>"experiment"===e.type)).map((e=>[e.experimentName,e]))),this._gateTreatments=new Map(e.filter((e=>"gate"===e.type)).map((e=>[e.experimentName,e])))}async _fetchTreatments(e){let t=null,n=null;try{const e=this._experiments.concat(this._gates);t=await this._bgRpc.api.getExperimentTreatment(e.map((e=>e.name)))}catch(t){n=t,e&&this._experimentTreatments.clear()}if(t)return void this._updateTreatmentForExpAndGates(t);let i=null,r=null;try{i=await this._bgRpc.api.getGateTreatment(this._gates.map((e=>e.name)))}catch(t){r=t,e&&this._gateTreatments.clear()}if(i&&(this._gateTreatments=new Map(i.map((e=>[e.experimentName,e])))),r||n)throw r||n}isGateEnabled(e){return!this._disposed&&this._getExperienceOfEnabledGate(e.name)===e.experience}_getExperienceOfEnabledGate(e){const t=this._gateTreatments.get(e);return t?Wo(t.groupName):null}}function Vo(){return self.chrome&&self.chrome.runtime&&self.chrome.runtime.lastError}function $o(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function zo(){return $o()+$o()+"-"+$o()+"-"+$o()+"-"+$o()+"-"+$o()+$o()+$o()}const qo="message:to-priv";var Ko;!function(e){e[e.success=0]="success",e[e.successWithEmpty=1]="successWithEmpty",e[e.alreadyMigrated=2]="alreadyMigrated"}(Ko||(Ko={}));const Jo=Cn.create("extension-api.message"),Yo=()=>{};class Xo{constructor(){this._listeners={},this._queue={},this.fire=(e,t,n=Yo,i)=>{const r=this._listeners[e]||[];r.length?r.forEach((e=>e(t,n,i))):(this._queue[e]=this._queue[e]||[],this._queue[e].push({content:t,callback:n,sender:i}))},this.unlisten=(e,t)=>{const n=this._listeners[e]||[],i=n.indexOf(t);-1!==i&&(1===n.length?delete this._listeners[e]:n.splice(i,1))},this.listenOnce=(e,t)=>{const n=(i,r,s)=>{this.unlisten(e,n),t&&t(i,r,s)};this.listen(e,n)},this.listen=(e,t)=>{this._listeners[e]=this._listeners[e]||[],-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t);const n=this._queue[e]||[];if(n.length){for(const e of n)try{t(e.content,e.callback,e.sender)}catch(e){Jo.error("exception during proccesing buffered messages",e)}delete this._queue[e]}}}}const Zo=Cn.create("Messaging.extension-api.content");class Qo{constructor(e,t,n,i){this._bgIsWorking=t,this._extensionId=n,this._onRuntimeMessageFromBg=i,this.kind="content-script-message-api",this._callbacks={},this._messageHelper=new Xo,this._disconnected=!1,this.broadcastBackground=async(e,t,n)=>{var i,r;const s=zo();n&&"function"==typeof n&&(this._callbacks[s]=n);try{if(!this.backgroundPort){if(!await this._bgIsWorking())throw new Error("lost connection to bg port");this.initPort(),Zo.trace("Content script connection was restored")}null===(i=this.backgroundPort)||void 0===i||i.postMessage({type:e,callid:s,content:t})}catch(n){if(!await this._bgIsWorking())return this._onDisconnect();try{this.initPort(),null===(r=this.backgroundPort)||void 0===r||r.postMessage({type:e,callid:s,content:t})}catch(n){throw Zo.error("failed to invoke postMessage() on bg port",n,{type:e,callid:s,content:t}),n}}},this._onRuntimeMessageHandler=async(e,t,n)=>{if(n({status:!0}),!await this._bgIsWorking())return this._onDisconnect();t.id!==this._extensionId&&e.type!==`cs-bg-runtime-${xe()}`||(this._onBgPortMessage(e.data),this.initPort())},this._onBgPortMessage=({callid:e,content:t,type:n})=>{this._callbacks[e]?(this._callbacks[e](t),delete this._callbacks[e]):this._messageHelper.fire(n,t,(t=>{if(!this.backgroundPort)throw new Error("fail reply to bg page - connection lost");this.backgroundPort.postMessage({content:t,callid:e})}))},this._onDisconnect=async()=>{var e,t;if(null===(t=null===(e=this.backgroundPort)||void 0===e?void 0:e.removeMessageListeners)||void 0===t||t.call(e),this.backgroundPort=null,await this._bgIsWorking())return Zo.trace("BG SW is shutdown, but BG SW page is still available."),void this._messageHelper.fire("bgSW-shutdown",null);this._disconnected||(this._onRuntimeMessageFromBg.removeListener(this._onRuntimeMessageHandler),this._disconnected=!0,Zo.warn("Content script messaging went disconnected."),this._messageHelper.fire("contentScript-disconnected",null))},this._portInit=e,this.initPort(),this._onRuntimeMessageFromBg.addListener(this._onRuntimeMessageHandler)}initPort(){const e=this._portInit;this.backgroundPort||(this.backgroundPort=e(qo),this.backgroundPort.onMessage(this._onBgPortMessage),this.backgroundPort.onDisconnect(this._onDisconnect))}listen(e,t){this._messageHelper.listen(e,t)}}class ea{constructor(e,t){this.port=e.runtime.connect({name:t})}onMessage(e){this.port.onMessage.addListener(e)}onDisconnect(e){this.port.onDisconnect.addListener(e)}postMessage(e){this.port.postMessage(e)}}function ta(e){const t=new Map;for(const{isFree:n,cardLayout:{group:i}}of e){t.has(i)||t.set(i,{lensName:i,free:0,premium:0});const e=t.get(i);e&&(e[n?"free":"premium"]+=1)}return Array.from(t.values()).sort(((e,t)=>t.premium-e.premium))}const na="%appName%",ia={extensionSettingsToolbar:"%appName%SettingsToolbar",gdocsSidebarCardList:"%appName%AdvancedIssues",assistantCardList:"%appName%AdvancedIssues",extensionSettingsAssistant:"%appName%AssistantSettings",gdocsGoals:"%appName%AssistantGoals",extensionBusinessUphookPopup:"gb%appName%UphookPopup",gbExtensionSettingsToolbar:"gb%appName%SettingsToolbar",gbExtensionSettingsAssistant:"gb%appName%AssistantSettings",extensionGButton:"%appName%GButton",extPreviewsPopup:"%appName%PreviewsPopup",toneSuggestion:"%appName%ToneDetector",grammarlyGoPrompts:"%appName%GrammarlyGoPrompts",plagiarism:"%appName%_plagiarism_plagiarismView_premium"};function ra(e,t){return{key:e,value:t}}function sa(e){var t;return(null!==(t=ia[e])&&void 0!==t?t:e).replace(na,((e,t)=>{const n=z.getAppName(Se(),we().bundleInfo.extensionType,we().bundleInfo.deploymentType);return 0===t?n:(i=n).charAt(0).toUpperCase()+i.slice(1);var i}))}function oa(e,t){return ra(e,t)}function aa(e){return e.map((e=>[e.key,e.value].map(encodeURIComponent).join("="))).join("&")}function ca(e,t){if(0===t.length)return e;const n=e.includes("?");return[e,aa(t)].join(n?"&":"?")}function la(e){const t=[];return void 0!==e.medium&&t.push(oa("utm_medium",e.medium)),void 0!==e.source&&t.push(oa("utm_source",e.source)),void 0!==e.campaign&&t.push(oa("utm_campaign",sa(e.campaign))),e.clickToRun&&t.push(oa("click_to_run","true")),t}function ua(e){return la(e)}ra("fromExtension","true");la({medium:"internal"})[0];function da(e,t){var n;const i=[ra("app_type","extension"),ra("browser",Se()),...e.currentAlerts?[ra("lensedAlerts",(r=ta(e.currentAlerts),btoa(JSON.stringify(r))))]:[],...ua({medium:"internal",campaign:e.utmCampaign,source:null!==(n=e.utmSource)&&void 0!==n?n:e.isAnonymous?"signupHook":"upHook"})];var r;const s=ca(Te().planComparison,i);t.open(s,!0)}function ha(e,t){chrome.runtime.lastError?t(chrome.runtime.lastError):e()}class pa{constructor(){this._log=Cn.create("extension-api.managed-storage.validator")}validate(e,t){switch(e){case"GrammarlyEnrollmentToken":return"string"==typeof t&&t.length>0&&/^[a-z0-9_-]+$/i.test(t);case"GrammarlyBlockedClients":case"GrammarlyBlockedDomains":return"string"==typeof t;case"GrammarlyConfidentialModeEnabled":case"GrammarlyDlpEnabled":return"boolean"==typeof t;case"GrammarlyExtensionMode":return"string"==typeof t&&("limited"===t||"full"===t);default:return this._log.warn(`Unknown key: ${e}`),!1}}}class ga{constructor(){this._log=Cn.create("extension-api.managed-storage.chrome"),this._validator=new pa}get(e){return xr.fromPromise(Promise.race([new Promise((t=>{chrome.storage.managed.get(e,(n=>{ha((()=>{const i=n[e];void 0===i||this._validator.validate(e,i)?t([i]):(this._log.warn(`Invalid value for "${e}": ${JSON.stringify(n[e])}`),t([void 0]))}),(n=>{this._log.error(`Could not get "${e}"`,n),t([void 0,n])}))}))})),new Promise((t=>{setTimeout((()=>{this._log.error(`Manage storage timeout to get "${e}"`),t([void 0,new Error("Manage storage timeout to get access")])}),3e3)}))]))}}var fa;!function(e){class t{constructor(e,t){this._port=e,this._getErrorMessage=t}onMessage(e){this._port.onMessage.addListener(e)}onDisconnect(e){this._port.onDisconnect.addListener((()=>e(this._getErrorMessage())))}postMessage(e){this._port.postMessage(e)}}e.PortImpl=t,e.createPort=function(e,n){return function(e){return!!e}(e.runtime.connectNative)?new t(e.runtime.connectNative(n),(()=>{var t;return null===(t=e.runtime.lastError)||void 0===t?void 0:t.message})):null}}(fa||(fa={}));class ma{constructor(e){this._chromeInstance=e,this.kind="chrome-mv3",this.get=e=>xr.create(((t,n)=>{this._chromeInstance.storage.session.get(e,(e=>{ha((()=>t(e)),n)}))})),this.set=e=>xr.create(((t,n)=>{this._chromeInstance.storage.session.set(e,(()=>{ha(t,n)}))})),this.getAll=()=>xr.create(((e,t)=>{this._chromeInstance.storage.session.get(null,(n=>{ha((()=>e(n)),t)}))})),this.remove=e=>xr.create(((t,n)=>{this._chromeInstance.storage.session.remove(e,(()=>{ha(t,n)}))})),this.removeAll=()=>xr.create(((e,t)=>{this._chromeInstance.storage.session.clear((()=>{ha(e,t)}))})),this.onChange=e=>{const t=()=>{this.getAll().then((t=>e(t)))};return this._chromeInstance.storage.session.onChanged.addListener(t),()=>this._chromeInstance.storage.session.onChanged.removeListener(t)},this.allowCStoUseSessionStorage=()=>xr.create(((e,t)=>{var n,i,r,s,o,a;null===(r=null===(i=null===(n=chrome.storage)||void 0===n?void 0:n.session)||void 0===i?void 0:i.setAccessLevel)||void 0===r||r.call(i,{accessLevel:null!==(a=null===(o=null===(s=chrome.storage)||void 0===s?void 0:s.AccessLevel)||void 0===o?void 0:o.TRUSTED_AND_UNTRUSTED_CONTEXTS)&&void 0!==a?a:"TRUSTED_AND_UNTRUSTED_CONTEXTS"},(()=>{ha(e,t)}))}))}}class _a{constructor(){this.kind="memory",this._data={},this._listeners=[],this.get=e=>xr.sync((()=>(Array.isArray(e)?e:[e]).reduce(((e,t)=>({...e,[t]:this._data[t]})),{}))),this.set=e=>xr.sync((()=>{this._data={...this._data,...e},this._callListeners()})),this.getAll=()=>xr.sync((()=>this._data)),this.remove=e=>xr.sync((()=>{(Array.isArray(e)?e:[e]).forEach((e=>{e in this._data&&delete this._data[e]})),this._callListeners()})),this.removeAll=()=>xr.sync((()=>{this._data={},this._callListeners()})),this.onChange=e=>(this._listeners.push(e),()=>this._listeners.splice(this._listeners.indexOf(e),1))}_callListeners(){this._listeners.forEach((e=>e(this._data)))}}class ba{constructor(e,t){this._chrome=e,this._manifestVersion=t,this.kind="web-extension",this.executeScript=(e,t,n)=>xr.create(((i,r)=>{"3"!==this._manifestVersion?this._chrome.tabs.executeScript(t,{file:e,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>va(null==e?void 0:e[0],i,r))):this._chrome.scripting.executeScript({files:[e],target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return va(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,i,r)}))})),this.executeFunction=(e,t,n)=>xr.create(((i,r)=>{"3"!==this._manifestVersion?this._chrome.tabs.executeScript(t,{code:`(${e.toString()})()`,matchAboutBlank:!0,...n?{frameId:Number(n)}:{}},(e=>va(null==e?void 0:e[0],i,r))):this._chrome.scripting.executeScript({func:e,target:{tabId:t,...n?{frameIds:[Number(n)]}:{}}},(e=>{var t;return va(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.result,i,r)}))})),this.insertCSS=(e,t,n,i)=>xr.create(((r,s)=>{"3"!==this._manifestVersion?this._chrome.tabs.insertCSS(e,{file:t,code:n,matchAboutBlank:!0,...i?{frameId:Number(i)}:{}},(()=>va(void 0,r,s))):this._chrome.scripting.insertCSS({target:{tabId:e,...i?{frameIds:[Number(i)]}:{}},files:t?[t]:void 0,css:n},(()=>va(void 0,r,s)))}))}open(e,t){return xr.create(((n,i)=>{this._chrome.tabs.create({url:e,active:t},(e=>{ha((()=>n(e)),i)}))}))}updateCurrent(e){return xr.create(((t,n)=>{this._chrome.tabs.update({url:e},(e=>{ha((()=>t(e)),n)}))}))}getActiveTab(){return xr.create(((e,t)=>{const n=this._chrome.tabs;n.query({active:!0,lastFocusedWindow:!0},(i=>{ha((()=>{i&&i.length?e(i[0]):n.query({active:!0},(n=>{ha((()=>{e(n[0])}),t)}))}),t)}))}))}getAllTabs(){return xr.create(((e,t)=>this._chrome.tabs.query({},(n=>ha((()=>e(n)),t)))))}getActiveTabUrl(){return xr.create(((e,t)=>this.getActiveTab().then((n=>ha((()=>e(n&&n.url)),t)))))}_onActiveTabChange(e){this._chrome.tabs.onActivated.addListener((t=>this._chrome.tabs.get(t.tabId,e))),this._chrome.tabs.onUpdated.addListener(((t,n)=>{this.getActiveTab().then((i=>{i&&i.id===t&&(n.url||n.favIconUrl||"complete"===n.status)&&this._chrome.tabs.get(t,e)}))}))}_onTabChangeError(e,t,n){n(e),"Tabs cannot be edited right now (user may be dragging a tab)."===(null==e?void 0:e.message)&&setTimeout((()=>{this.getActiveTab().then((e=>{ha((()=>t(e)),n)}))}),100)}onActiveTabChange(e,t){const n=n=>{ha((()=>!!n&&e(n)),(n=>this._onTabChangeError(n,(t=>!!t&&e(t)),t)))};this._onActiveTabChange(n),this._chrome.windows.onFocusChanged.addListener((e=>this._chrome.tabs.query({active:!0,windowId:e,lastFocusedWindow:!0},(([e])=>n(e))))),this.getActiveTab().then(n)}onWindowOrActiveTabChange(e,t){const n=n=>{ha((()=>e(n)),(n=>this._onTabChangeError(n,(t=>e(t)),t)))};this._onActiveTabChange(n),this._chrome.windows.getCurrent().then((i=>{ha((()=>{i.focused?this.getActiveTab().then(n):e(void 0)}),(n=>{t(n),e(void 0)}))})),this._chrome.windows.onFocusChanged.addListener((t=>{this._chrome.windows.getCurrent().then((i=>{i.focused?this._chrome.tabs.query({active:!0,windowId:t,lastFocusedWindow:!0},(([e])=>n(e))):e(void 0)}))})),this._chrome.windows.onRemoved.addListener((()=>{this._chrome.windows.getCurrent().then((t=>{t.focused?this.getActiveTab().then(n):e(void 0)}))}))}reload(e){return xr.create(((t,n)=>{const i=()=>ha((()=>t()),n);e.id?this._chrome.tabs.reload(e.id,{},i):this._chrome.tabs.reload(i)}))}closeCurrentTab(){return xr.create(((e,t)=>{this.getActiveTab().then((n=>{n&&n.id&&this._chrome.tabs.remove(n.id,(()=>{ha((()=>e()),t)}))}))}))}focusTab(e){return xr.create(((t,n)=>{this._chrome.tabs.update(e,{highlighted:!0},(()=>{ha((()=>t()),n)}))}))}sendMessageToTab(e,t,n){return xr.create(((i,r)=>{this._chrome.tabs.sendMessage(t,e,{frameId:n},(()=>{ha((()=>i()),r)}))}))}}function va(e,t,n){Vo()?n(Vo()):t(e)}class ya{get button(){const e=this._action;return{kind:"web-extension",setBadge(t){e.setBadgeText({text:t})},setIconByName(t){const{prefix:n,postfix:i}=function(e){return{prefix:"./src/icon/toolbar/icon",postfix:e?"-"+e:""}}(t);e.setIcon({path:{16:`${n}16${i}.png`,32:`${n}32${i}.png`}})},setBadgeBackgroundColor(t){e.setBadgeBackgroundColor({color:t})}}}get baseUri(){var e;return null!==(e=this._baseUrl)&&void 0!==e?e:chrome.runtime.getURL("")}constructor(e,t,n,i){var r;this.preferences=e,this.message=t,this.tabs=n,this._manifestVersion=i,this._isManifestV3="3"===this._manifestVersion,this._action=this._isManifestV3?chrome.action:chrome.browserAction,this.managedStorage=new ga,this.sessionStorage=this._isManifestV3&&(null===(r=chrome.storage)||void 0===r?void 0:r.session)?new ma(chrome):new _a,this.thirdPartyExtensionsInstalled={},this.notification={kind:"web-extension",create:e=>xr.create(((t,n)=>{const i=chrome.notifications,r=zo();i.create(r,Object.assign({type:"basic"},e),(()=>{ha((()=>{const e=new y((e=>{const t=t=>t===r&&e.next(t);return i.onClicked.addListener(t),()=>i.onClicked.removeListener(t)})),n=new y((e=>{const t=(t,n)=>t===r&&e.next({id:t,buttonIndex:n});return i.onButtonClicked.addListener(t),()=>i.onButtonClicked.removeListener(t)})),s=new y((e=>{const t=(t,n)=>t===r&&e.next({id:t,byUser:n});return i.onClosed.addListener(t),()=>i.onClosed.removeListener(t)}));t({id:r,click:e,buttonClick:n,close:s})}),n)}))})),clear:e=>xr.create(((t,n)=>{chrome.notifications.clear(e,(e=>{ha((()=>t(e)),n)}))}))},this.cookies={kind:"web-extension",get:e=>xr.create(((t,n)=>chrome.cookies.get(e,(e=>ha((()=>t(e)),n))))),remove:e=>xr.fromPromise(new Promise(((t,n)=>chrome.cookies.remove(e,(()=>ha((()=>t(null)),n)))))),getAll:e=>xr.create(((t,n)=>chrome.cookies.getAll(e,(e=>ha((()=>t(e)),n))))),set:e=>xr.create(((t,n)=>chrome.cookies.set(e,(e=>ha((()=>t(e)),n))))),watch(e,t){const n=n=>{const{cookie:i,cause:r}=n;!i||!i.name||e.path&&e.path!==i.path||e.name!==i.name||e.domain&&-1===i.domain.indexOf(e.domain)||("explicit"===r&&t(i),"expired_overwrite"===r&&t())};return chrome.cookies.onChanged.addListener(n),()=>chrome.cookies.onChanged.removeListener(n)},getChanges(e){return new y((t=>this.watch(e,(e=>t.next(e)))))}},this.management={uninstallSelf(){chrome.management.uninstallSelf()}},this._baseUrl=M((()=>chrome.runtime.getURL("")),(e=>null)),this.permissions=chrome.permissions?{watchAdded:e=>{chrome.permissions.onAdded.addListener(e)},added:new y((e=>{const t=t=>{e.next(t)};return chrome.permissions.onAdded.addListener(t),()=>{chrome.permissions.onAdded.removeListener(t)}})),watchRemoved:e=>{chrome.permissions.onRemoved.addListener(e)},removed:new y((e=>{const t=t=>{e.next(t)};return chrome.permissions.onRemoved.addListener(t),()=>{chrome.permissions.onRemoved.removeListener(t)}})),getAll:xr.fromAsync((()=>new Promise((e=>chrome.permissions.getAll(e))))),request:xr.fromAsync((e=>new Promise(((t,n)=>chrome.permissions.request(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)})))))),contains:xr.fromAsync((e=>new Promise(((t,n)=>{chrome.permissions.contains(e,(e=>{chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)}))}))))}:void 0,this.fetchBlocklistConfig=()=>xr.noop,this.getUrl=e=>this._baseUrl?this._baseUrl+e:chrome.runtime.getURL(e),this.fetchInternalResource=(e,t)=>xr.fromPromise(fetch(this.getUrl(e)).then((e=>"json"===t?e.json():e.arrayBuffer()))),this.openUrl=e=>this.tabs.open(e,!0),this.openSubscriptionPage=e=>da(e,this.tabs),this.isExtensionUrl=(e,t)=>this.getUrl(e)===t,this.reload=()=>chrome.runtime.reload(),this.i18n={detectLanguage:e=>xr.create(((t,n)=>chrome.i18n.detectLanguage(e,(e=>ha((()=>t(e)),n))))),getUILanguage:()=>chrome.i18n.getUILanguage(),getAcceptLanguages:()=>xr.create(((e,t)=>chrome.i18n.getAcceptLanguages((n=>ha((()=>e(n)),t)))))},this.initCodeSplittingListener=()=>{return chrome.runtime.onMessage.addListener((e=this.tabs.executeScript,(t,n,i)=>{t&&"CODE_SPLITTING_INJECT"===t.type&&t.file&&n&&n.tab&&null!=n.tab.id&&(e(t.file,Number(n.tab.id),n.frameId),i())}));var e},this.isExtensionInstalled=xr.fromAsync((async(e,t=!1)=>{if(!t&&void 0!==this.thirdPartyExtensionsInstalled[e])return this.thirdPartyExtensionsInstalled[e];if("undefined"==typeof fetch)return!1;const n=ya.thirdPartyExtensionsData[e].publicResources.reduce(((t,n)=>(Ce()&&t.push(`chrome-extension://${ya.thirdPartyExtensionsData[e].MSStoreId}${n}`),t.concat(`chrome-extension://${ya.thirdPartyExtensionsData[e].id}${n}`))),[]);return(i=n.map((e=>fetch(e))),R(Promise.all([...i].map(R)))).then((e=>!0)).catch((e=>!1));var i})),this.setUninstallURL=e=>chrome.runtime.setUninstallURL(e),this.connectNative=e=>fa.createPort(chrome,e),this.indexedDB=self.indexedDB}}ya.thirdPartyExtensionsData={mseditor:{id:"gpaiobkfhnonedkhhfjpmhdalgeoebfa",MSStoreId:"hokifickgkhplphjiodbggjmoafhignh",publicResources:["/fonts/fabric-icons.css"]},office:{id:"ndjpnladcallmjemlbaebfadecfhkepb",MSStoreId:"gggmmkjegpiggikcnhidnjjhmicpibll",publicResources:["/fonts/fabric-icons.css"]}},Go.start({browser:"chrome",extensionType:"chromiumWebExtension",deploymentType:"regular",browserApi:function(){const e=function(){var e;const t=new wt;return null===(e=chrome.storage)||void 0===e||e.onChanged.addListener(((e,n)=>{"local"===n&&t.next(e)})),{...(n=chrome,{get:e=>xr.create(((t,i)=>n.storage.local.get(e,(e=>{ha((()=>t(e)),i)})))),set:e=>xr.create(((t,i)=>n.storage.local.set(e,(()=>{ha(t,i)})))),getAll:()=>xr.create(((e,t)=>n.storage.local.get(null,(n=>{ha((()=>e(n)),t)})))),remove:e=>xr.create(((t,i)=>n.storage.local.remove(e,(()=>{ha(t,i)})))),removeAll:()=>xr.create(((e,t)=>n.storage.local.clear((()=>{ha(e,t)}))))}),changes:t};var n}(),{manifestVersion:t,tabs:n}={manifestVersion:"3",tabs:new ba(chrome,"3")},i=new Qo((e=>new ea(chrome,e)),(r=()=>e.getAll(),async()=>{try{return await r(),!0}catch(e){return!1}}),chrome.runtime.id,chrome.runtime.onMessage);var r;return new ya(e,i,n,t)}(),createExperimentClient:e=>new Ho(e)})})();